<!doctype html>
<html lang="en">
  <head>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-17535311-5"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-17535311-5');
  </script>


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyed vs Non-Keyed Root JSON Elements &amp; UI5 Binding</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/">Home</a></li>
        <li class="nav-item"><a href="/about/">About</a></li>
        <li class="nav-item"><a href="/posts/">Archive</a></li>
        <li class="nav-item"><a href="/tags/">Tags</a></li>
        <li class="nav-item"><a href="/feed.xml">Feed</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>Keyed vs Non-Keyed Root JSON Elements &amp; UI5 Binding</h1>

<time datetime="2014-07-26">26 Jul 2014</time><a href="/tags/databinding/" class="post-tag">databinding</a><a href="/tags/multicombobox/" class="post-tag">multicombobox</a><a href="/tags/openui5/" class="post-tag">openui5</a><a href="/tags/sapui5/" class="post-tag">sapui5</a><a href="/tags/ui5/" class="post-tag">ui5</a>

<p>In a screencast this week (<a href="https://www.youtube.com/watch?v=0UIyKoiZ-gE">OpenUI5 MultiComboBox First Look</a>) I explicitly used the model mechanism’s requestCompleted event to get to the model data and manipulate it, adding a key to the root array. Initially the data looked like this:</p>
<p><img src="/img/2014/07/Screen-Shot-2014-07-26-at-14.20.21.png" alt="image"></p>
<p>and I added a key to this root array so it looked like this:</p>
<p><img src="/img/2014/07/Screen-Shot-2014-07-26-at-14.23.44.png" alt="image"></p>
<p>I did this programmatically in the requestCompleted event of the model mechanism, as you can see in the <a href="https://gist.github.com/qmacro/973aea751b00654b399a#file-multicombobox-html-L38">Gist for the MultiComboBox.html file, specifically starting at line 38</a>:</p>
<pre class="language-javascript"><code class="language-javascript">oModel<span class="token punctuation">.</span><span class="token function">attachEventOnce</span><span class="token punctuation">(</span><span class="token string">'requestCompleted'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">var</span> oModel <span class="token operator">=</span> oEvent<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	oModel<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>		<span class="token string-property property">"ProductCategories"</span> <span class="token operator">:</span> oModel<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>However, while fun and interesting, I want to point out that this is not absolutely necessary. The model will still support an unkeyed root element such as this array, as shown in the first screenshot above. You can see how this is done in the [Gist for the MultiComboBox-without-Keyed-Root.html file](https://gist.github.com/qmacro/973aea751b00654b399a#file-multicombobox-without-keyed-root-html) – the difference is we don’t need to manipulate the data in the requestCompleted event and the binding for the MultiComboBox items aggregation looks like this:
<pre><code>{/}
</code></pre>
<p>rather than this:</p>
<pre><code>{/ProductCategories}
</code></pre>
<p>Of course, having an unkeyed root element means that you can’t have anything else in that JSON source, which may cause you issues further down the line. But it’s not critical for this example.</p>

<hr>
<style>
.utterances {
  margin-left: inherit !important;
}
</style>
<script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script>

<hr>
<ul><li>Next: <a href="/2014/07/26/this-week-in-fiori-2014-30/">This Week in Fiori (2014-30)</a></li><li>Previous: <a href="/2014/07/22/openui5-tutorial-at-oscon-2014/">OpenUI5 Tutorial at OSCON 2014</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /2014/07/26/keyed-vs-non-keyed-root-json-elements-and-ui5-binding/ -->
  </body>
</html>
