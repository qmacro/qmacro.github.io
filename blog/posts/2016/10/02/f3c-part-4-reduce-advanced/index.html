<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2016/10/02/f3c-part-4-reduce-advanced/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.7884d8f8e9dd86c3b137.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>F3C Part 4 - Reduce advanced | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="F3C Part 4 - Reduce advanced"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2016/10/02/f3c-part-4-reduce-advanced/"><meta name="description" content="F3C Part 4 - Reduce advanced 02 Oct 2016 | 2 min read FunFunFunction Video: Reduce advanced - Part 4 of Functional Programming in JavaScript..."><meta property="og:description" content="F3C Part 4 - Reduce advanced 02 Oct 2016 | 2 min read FunFunFunction Video: Reduce advanced - Part 4 of Functional Programming in JavaScript..."><meta name="description" content="F3C Part 4 - Reduce advanced 02 Oct 2016 | 2 min read FunFunFunction Video: Reduce advanced - Part 4 of Functional Programming in JavaScript..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>F3C Part 4 - Reduce advanced</h1><div class="post__details"><time datetime="2016-10-02">02 Oct 2016 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p>FunFunFunction Video: <a href="https://www.youtube.com/watch?v=1DMolJ2FrNY&amp;index=4&amp;list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84">Reduce advanced - Part 4 of Functional Programming in JavaScript</a></p><p>(This post is part of the <a href="/blog/posts/2016/10/02/f3c-a-funfunfunction-companion-series/">F3C</a> series)</p><p>Reduce is powerful, much more than its siblings. You can use it not only to sum values (the classic &quot;hello world&quot; example for <code>reduce</code>), but also to build up a complex end result that may look nothing like what you started with, i.e. the list you are calling <code>reduce</code> upon. It's a mistake to think of <code>reduce</code> in terms of what that word means in English; you're not necessarily making something smaller than what you started with, you can make pretty much anything, of any size[^n].</p><p>As well as function composition (slotting functions into each other), another common style in functional programming is function chaining. The binding together of small functions that operate on data one after the other[^n].</p><p>The example that MPJ uses in this video is a good illustration of chaining. Aside from the call to <code>console.log</code>, the entire program is a single statement - an assignment of a value to the <code>output</code> variable:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> output <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">line</span> <span class="token operator">=></span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">customers<span class="token punctuation">,</span> line</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>What MPJ doesn't say explicitly, but is one of the reasons why this approach is so powerful and simple, is that each of these functions take input, and produce <em>new</em> output. There's no mutation of state. This means that there is less to go wrong. Further, apart from <code>trim</code>, all functions produce or operate on lists:</p><p><code>split</code> operates on a string and produces a list <code>map</code> operates on a list and produces another list <code>reduce</code> operates on a list and produces ... well, whatever you want</p><p>Notice that this part: <code>map(line =&gt; line.split('\t'))</code> actually produces a list ... of lists.</p><p>[^n]: It may help to think of reduce by its other common name, in other languages: &quot;fold&quot;, a name which signifies the action of executing the callback function on each element in turn.</p><p>[^n]: This reminds me of the Unix philosophy of small programs doing one thing well, connected and passing data via a series of pipes.</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/fp/">#fp</a> <a href="/tags/language-ramblings/">#language-ramblings</a> <a href="/tags/f3c/">#f3c</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2016/10/02/f3c-part-5-closures/"><span>←</span> <span>F3C Part 5 - Closures</span> </a><a href="/blog/posts/2016/10/02/f3c-part-3-reduce-basics/"><span>F3C Part 3 - Reduce basics</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.bsky.social" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>