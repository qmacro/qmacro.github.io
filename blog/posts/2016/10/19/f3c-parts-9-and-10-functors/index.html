<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2016/10/19/f3c-parts-9-and-10-functors/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.bed7db4098e5e4fe9224.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>F3C Parts 9 and 10 - Functors | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="F3C Parts 9 and 10 - Functors"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2016/10/19/f3c-parts-9-and-10-functors/"><meta name="description" content="F3C Parts 9 and 10 - Functors 19 Oct 2016 | 2 min read FunFunFunction Videos: Functors - FunFunFunction #10 and Functors: I was WRONG! -..."><meta property="og:description" content="F3C Parts 9 and 10 - Functors 19 Oct 2016 | 2 min read FunFunFunction Videos: Functors - FunFunFunction #10 and Functors: I was WRONG! -..."><meta name="description" content="F3C Parts 9 and 10 - Functors 19 Oct 2016 | 2 min read FunFunFunction Videos: Functors - FunFunFunction #10 and Functors: I was WRONG! -..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>F3C Parts 9 and 10 - Functors</h1><div class="post__details"><time datetime="2016-10-19">19 Oct 2016 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p>FunFunFunction Videos: <a href="https://www.youtube.com/watch?v=YLIH8TKbAh4&amp;index=9&amp;list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84">Functors - FunFunFunction #10</a> and <a href="https://www.youtube.com/watch?v=DisD9ftUyCk&amp;list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&amp;index=10">Functors: I was WRONG! - FunFunFunction #11</a> (yes, the sequence numbers are a bit mixed up, don't worry though)</p><p>(This post is part of the <a href="/blog/posts/2016/10/02/f3c-a-funfunfunction-companion-series/">F3C</a> series)</p><p>There are two videos in the series. In the first, MPJ explores what functors are, and based on material in the blogosphere, makes some statements that aren't quite accurate. So he follows up with a second video correcting those statements, which I think was an excellent way to fix things. There's a lot to be said for learning by watching other people learn.</p><p>There's quite a bit to take in from these two videos on functors, so here's my summary of functor essentials:</p><ul><li><p>a functor is a type -- for us, an object or container -- that has a <code>map</code> method[^n]</p></li><li><p>this container can contain elements of any type</p></li><li><p>the <code>map</code> method tranforms the elements, by applying the supplied function to each of them[^n]</p></li><li><p>while the elements are transformed, the structure of the container remains intact</p></li><li><p>the result is a new functor</p></li></ul><p>As MPJ points out, the most common functor in our context is JavaScript's <code>Array</code>. Here it is in action[^n]:</p><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><span class="token string">"the"</span><span class="token punctuation">,</span> <span class="token string">"quick"</span><span class="token punctuation">,</span> <span class="token string">"brown"</span><span class="token punctuation">,</span> <span class="token string">"fox"</span><span class="token punctuation">,</span> <span class="token string">"jumps"</span><span class="token punctuation">,</span> <span class="token string">"over"</span><span class="token punctuation">,</span> <span class="token string">"the"</span><span class="token punctuation">,</span> <span class="token string">"lazy"</span><span class="token punctuation">,</span> <span class="token string">"dog"</span><span class="token punctuation">]</span><br>  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x<span class="token punctuation">.</span>length<span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><br><span class="token comment">// [false, false, false, false, false, true, false, true, false]</span></code></pre><p>The point of the second <code>map</code> in the example is to show that what is returned by the first <code>map</code> is indeed a functor -- another <code>Array</code>, in fact -- over which we can call <code>map</code> again.</p><p>While <code>Array</code> is the most obvious functor, MPJ points out that some implementations of Promises are functors, as are Streams (the latter is the subject of the next episode in this series). There's a Promise example, but it's not quite right - there are a couple of bracket-related typos. Here's what I think it should look like instead:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Promise <span class="token keyword">from</span> <span class="token string">'bluebird'</span><br><br><span class="token keyword">const</span> whenDragonLoaded <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>      <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> ‘Fluffykins’<span class="token punctuation">,</span> <span class="token literal-property property">health</span><span class="token operator">:</span> <span class="token number">70</span>  <span class="token punctuation">}</span><br>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">const</span> names <span class="token operator">=</span> <br>    whenDragonLoaded<br>        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">dragon</span> <span class="token operator">=></span> dragon<span class="token punctuation">.</span>name<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>One thing I was slightly unsure of in correcting the brackets was replacing the curly braces (the ones that wrapped the object literal in the <code>resolve</code> call) with square brackets. At one level it is fine - the curly braces were simply not syntactically correct. But I felt as though adding the &quot;container&quot; syntax I was &quot;helping&quot; the Promise be a functor. Moreover, in one of the articles on JavaScript Promises that I read, I picked up the sentiment that doing exactly this was deemed bad practice. Anyway, I'm sure things will become clearer here as I explore further.</p><p>[^n]: (although it doesn't have to be called that, I guess - the method name could be different, but have the same effect) [^n]: &quot;lifting&quot; the function into the container [^n]: I'm deliberately using small, generic variable names, as that's what functional programming suggests to me - making things simple and generic means I don't want to inadvertently attach &quot;contextual baggage&quot; with variable names that mean something only in one context</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/language-ramblings/">#language-ramblings</a> <a href="/tags/f3c/">#f3c</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2016/11/03/better-collaboration-through-chemistry/"><span>←</span> <span>Better collaboration through chemistry</span> </a><a href="/blog/posts/2016/10/16/f3c-part-8-promises/"><span>F3C Part 8 - Promises</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>