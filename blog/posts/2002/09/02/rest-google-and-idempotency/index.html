<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2002/09/02/rest-google-and-idempotency/"><link href="/assets/main.6972fce5fb2684e4524a.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>REST, Google, and idempotency | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="REST, Google, and idempotency"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2002/09/02/rest-google-and-idempotency/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@qmacro"><meta name="description" content="REST, Google, and idempotency 02 Sep 2002 | 2 min read Sam has asked Mark Baker a question, or rather, presented an apparent conundrum. It..."><meta property="og:description" content="REST, Google, and idempotency 02 Sep 2002 | 2 min read Sam has asked Mark Baker a question, or rather, presented an apparent conundrum. It..."><meta name="description" content="REST, Google, and idempotency 02 Sep 2002 | 2 min read Sam has asked Mark Baker a question, or rather, presented an apparent conundrum. It..."><meta property="og:image" content="https://qmacro.org/images/DJA-head.png"><meta name="twitter:image" content="https://qmacro.org/images/DJA-head.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/talks">Talks</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>REST, Google, and idempotency</h1><div class="post__details"><time datetime="2002-09-02">02 Sep 2002 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p>Sam has <a href="http://radio.weblogs.com/0101679/2002/09/02.html#a784">asked</a> Mark Baker a question, or rather, presented an apparent conundrum. It was a pleasant subject to ponder as I was rolling out the pastry for some apple and blackberry pies, and on returning to the keyboard, I’ve decided to put some of my own thoughts down on Sam’s points, even though I’m still learning about all this stuff.</p><p><em>Point #1: ‘GETs must not have side effects’ is perhaps REST’s most cherished axiom</em></p><p>If I had to pick one as being the most cherished, I’d go for the one that says that anything that’s important is a first class URI citizen (i.e. addressable by a URI). The ‘no side effects’ axiom appears to be ‘just’ a natural follow on from the presentation of how the HTTP verbs are supposed to be understood and used.</p><p><em>Point #2: The 1001st call to Google is different, and [so] the [GET] query is not idempotent</em></p><p>In the SOAP context, a SOAP Fault will be returned by Google if you exceed your limit of 1000 calls in a day. Returning a SOAP Fault within the context of an HTTP 200 OK status is one thing. But percolating this response up to a REST (i.e. HTTP) context would imply returning, say, an HTTP 403 FORBIDDEN, with a body explaining why. This is a valid response to a GET.Having different results, different status codes, returned on a GET query doesn’t necessarily imply any side effects. Indeed, in our beloved canonical stock-quote example, we don’t even need to regard the HTTP status codes to see that results can be different on the same GET query (the stock market would be a very dull place if they weren’t). And what about Google itself? The same search query one day will not necessarily return the same results the next day. Different query results, no implied side-effects.</p><p><em>Point #3: So, what do you do?</em></p><p>Nothing different. Through REST-tinted spectacles, the 1001th GET receives a 403, and you act accordingly. No lives have been lost, no state has been changed. Potentatus idem manet. As the saying goes. Well. It does now.</p><p>Of course, these are just my thoughts. Apologies to Sam if I’ve misunderstood his points, and to Mark if I’ve potentially muddied the waters.</p><p>P.S. maybe I should have used ‘potestas’…</p><p>P.P.S. I’m a grey, not a black-and-white, person</p></main><aside class="post__aside"><div class="post__tags"></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2002/09/03/mozilla-&quot;bookmark-this-group-of-tabs&quot;/"><span>←</span> <span>Mozilla &quot;Bookmark This Group of Tabs&quot;</span> </a><a href="/blog/posts/2002/08/31/cacheing-on-xslt-service/"><span>Cacheing on XSLT service</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a href="https://twitter.com/qmacro" target="_blank" rel="noopener noreferrer">Twitter</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>