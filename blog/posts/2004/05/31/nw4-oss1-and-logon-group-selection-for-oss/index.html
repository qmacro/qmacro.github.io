<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2004/05/31/nw4-oss1-and-logon-group-selection-for-oss/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.4654d4542dcb045c9ba3.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>NW4, OSS1 and logon group selection for OSS | DJ Adams</title><link rel="icon" type="‚Äúimage/x-icon‚Äù" href="/images/favicon.ico"><meta property="og:title" content="NW4, OSS1 and logon group selection for OSS"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2004/05/31/nw4-oss1-and-logon-group-selection-for-oss/"><meta name="description" content="NW4, OSS1 and logon group selection for OSS 31 May 2004 | 4 min read While waiting for the DD ACTIVATION phase of an add-on installation to..."><meta property="og:description" content="NW4, OSS1 and logon group selection for OSS 31 May 2004 | 4 min read While waiting for the DD ACTIVATION phase of an add-on installation to..."><meta name="description" content="NW4, OSS1 and logon group selection for OSS 31 May 2004 | 4 min read While waiting for the DD ACTIVATION phase of an add-on installation to..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>NW4, OSS1 and logon group selection for OSS</h1><div class="post__details"><time datetime="2004-05-31">31 May 2004 </time><span>| </span><span>4 min read</span></div></header><main class="post__content"><p>While waiting for the DD ACTIVATION phase of an add-on installation to finish, my mind wandered off to something I‚Äôd noticed with my new <a href="/blog/posts/2004/03/19/was-6.40-testdrive-for-linux-is-here!/">WAS 6.40 testdrive for Linux is here!</a> system, with the SID ‚ÄúNW4‚Äù (NetWeaver ‚Äô04). Normally, when you start transaction OSS1, and hit the button to connect to OSS, you‚Äôre presented with a popup giving you a choice of groups, like the one in the screenshot here.</p><p><img src="/images/2004/05/groupselectionpopup_38869.png" alt="screenshot of the group selection popup in OSS1"></p><p>But it wasn‚Äôt happening from my NW4 system. So I rolled up my sleeves, and wielded the mighty ‚Äú/h‚Äù in the ok-code (in the R/2 days we used to call this ‚Äúhobble mode‚Äù :-), cleaving my way into the ABAP that lay beneath OSS1. What I found was quite interesting.</p><h2>lgtst</h2><p>There‚Äôs a command-line program called <code>lgtst</code> that can be used to query the message server of an SAP system and have information on logon groups and so on returned. This <code>lgtst</code> program is not, apparently, supported on all operating systems, so there‚Äôs a condition in the ABAP that checks that.</p><h2>Direct SAPGUI call</h2><p>If the server‚Äôs operating system is not supported, then a simple logon string is constructed from the technical settings held in OSS1 (menu path Parameter -&gt; Technical settings). For example, if you specify a SAProuter at your site thus:</p><pre class="language-text"><code class="language-text">Name: host01 IP Address: 192.168.0.66 Instance: 99</code></pre><p>with SAProuter details thus:</p><pre class="language-text"><code class="language-text">Name: sapserv3 IP Address: 147.204.2.5 Instance: 99</code></pre><p>and the SAPnet message server details thus:</p><pre class="language-text"><code class="language-text">Name: oss001 DB Name: O01 Instance: 01</code></pre><p>then the route string constructed is just the concatenated saprouters leading to the dispatcher at O01‚Äôs ‚Äô01‚Äô instance, like this:</p><pre class="language-text"><code class="language-text">/H/192.168.0.66/S/sapdp99/H/147.204.2.5/S/sapdp99/H/oss001/S/sapdp01</code></pre><p>This route string is then used in conjunction with a direct local call to your SAPGUI client, so that the end result is that a new SAPGUI instance is started for that connection.</p><p>So far, so good (or not, depending on your luck with SAProuter routing :-).</p><p>Logon group popup, then SAPGUI call On the other hand, if the server‚Äôs operating system is supported, then something rather different happens. In this case, the <code>lgtst</code> program is executed on the server, to discover what logon groups are available for OSS. How does this happen? Well, the SAProuter information we‚Äôve already seen is used to construct a route string:</p><pre class="language-text"><code class="language-text">/H/192.168.0.66/S/sapdp99/H/147.204.2.5/S/sapdp99 ...</code></pre><p><strong>but</strong>, instead of pointing to a dispatcher at the SAP OSS end:</p><pre class="language-text"><code class="language-text">... /H/oss001/S/sapdp01</code></pre><p>it points to system O01‚Äôs message server:</p><pre class="language-text"><code class="language-text">... /H/oss001/S/sapmsO01</code></pre><p>Once this route string has been constructed, it‚Äôs used in a call to <code>lgtst</code> like this:</p><pre class="language-text"><code class="language-text">lgtst -H /H/.../H/oss001/S/sapmsO01 -S x -W 30000</code></pre><p>This is basically requesting that the message server for O01 send back information on available servers (instances) and logon groups. A typical reply looks like this:</p><pre class="language-text"><code class="language-text">list of reachable application servers ------------------------------------- <br>[pwdf1120_O01_01] [pwdf1120] [10.16.0.11] [sapdp01] [3201] [DIA UPD BTC SPO ICM ] <br>[pwdf1302_O01_01] [pwdf1302] [147.204.100.41] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf0936_O01_01] [pwdf0936] [10.16.0.19] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf0810_O01_01] [pwdf0810] [10.16.0.18] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf1307_O01_01] [pwdf1307] [147.204.100.46] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf1300_O01_01] [pwdf1300] [147.204.100.39] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf1301_O01_01] [pwdf1301] [147.204.100.40] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf1177_O01_01] [pwdf1177] [10.16.1.13] [sapdp01] [3201] [DIA UPD BTC SPO ICM ] <br>[pwdf0937_O01_01] [pwdf0937] [10.16.0.20] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf0809_O01_01] [pwdf0809] [10.16.0.17] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf0808_O01_01] [pwdf0808] [10.16.0.16] [sapdp01] [3201] [DIA UPD BTC SPO ICM ] <br>[pwdf0807_O01_01] [pwdf0807] [10.16.0.15] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[pwdf0392_O01_01] [pwdf0392] [10.16.0.10] [sapdp01] [3201] [DIA BTC SPO ICM ] <br>[o01main_O01_01] [pwdf1070] [147.204.100.35] [sapdp01] [3201] [DIA UPD ENQ BTC SPO UP2 ICM ] <br>list of selectable logpn groups with favorites ------------------------------------------------ <br>[1_PUBLIC] [147.204.100.40] [3201] [620] <br>[2_JAPANESE] [147.204.100.40] [3201] [620] <br>[DO_NOT_USE] [147.204.100.35] [3201] [620] <br>[EWA] [147.204.100.40] [3201] [620] <br>[REPL] [10.16.1.13] [3201] [620] <br>[SPACE] [10.16.1.13] [3201] [620]</code></pre><p>What we‚Äôre interested in are the lines in the second half of the output ‚Äì the list of selectable logon groups. The key data items here are the group names themselves (e.g. 1_PUBLIC), the IP addresses (e.g. 147.204.100.40), and the port numbers (e.g. 3201). The ABAP behind transaction OSS1 receives this <code>lgtst</code> output and parses it out into a nice list of groups, which it then presents to the user as shown in the screenshot above.</p><p>(And it goes almost without saying that if the call to <code>lgtst</code> fails, we get that friendly message ‚ÄúUnable to connect to message server (default connection will be used)‚Äù and revert back to the direct SAPGUI call).</p><p>So <strong>that‚Äôs</strong> where this popup comes from. Ok. Now I understand. It‚Äôs amazing how you use a transaction for years and never really look into how it actually works.</p><h2>Why not Linux?</h2><p>So, just to get back to why I came here in the first place ‚Äì why doesn‚Äôt this popup appear in NW4? NW4 is a Linux-based testdrive system. <code>lgtst</code> works fine. But look at this:</p><pre class="language-text"><code class="language-text">*---- Folgende Betriebssysteme werden unterst√ºtzt <br>IF ( SY-OPSYS = 'HP-UX' ) OR ( SY-OPSYS = 'AIX' ) <br>OR ( SY-OPSYS = 'OSF1' ) OR ( SY-OPSYS = 'SINIX' ) <br>OR ( SY-OPSYS = 'SunOS' ) OR ( SY-OPSYS = 'Windows NT' ) <br>OR ( SY-OPSYS = 'Relia' ) OR ( SY-OPSYS = 'SP_DC' ) <br>OR ( SY-OPSYS = 'OS/400' ).</code></pre><p>No Linux? Hmm, I soon fixed that, by copying the transaction (OSS1 -&gt; ZSS1) and the ABAP behind OSS1 (RSEFA910), adding a line to this IF statement to bring a bit of love the choice operating system of a ‚ÄúGnu generation‚Äù üòâ</p><p>Now I can call ZSS1 and delight in the group logon popup. Hurrah!</p><p><a href="https://blogs.sap.com/2004/05/31/nw4-oss1-and-logon-group-selection-for-oss/">Originally published on SAP Community</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/sapcommunity/">#sapcommunity</a> <a href="/tags/oss/">#oss</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2004/06/24/forget-soap-build-real-web-services-with-the-icf/"><span>‚Üê</span> <span>Forget SOAP - build real web services with the ICF</span> </a><a href="/blog/posts/2004/05/11/sap-at-jax-2004/"><span>SAP at JAX 2004</span> <span>‚Üí</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>