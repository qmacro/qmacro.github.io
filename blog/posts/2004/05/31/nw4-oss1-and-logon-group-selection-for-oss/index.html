<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>NW4, OSS1 and logon group selection for OSS</title>
		<meta name="description" content="Digging into logon group selection.">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
		<link rel="icon" type="image/x-icon" href="/images/favicon.ico">

      <meta property="og:title" content="NW4, OSS1 and logon group selection for OSS">
        <meta property="og:site_name" content="DJ Adams">
          <meta property="og:image" content="/images/site-image.png">
        <meta property="og:description" content="Digging into logon group selection.">
        <meta property="og:url" content="https://qmacro.org/blog/posts/2004/05/31/nw4-oss1-and-logon-group-selection-for-oss/">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #2884d2;
	--text-color-link-active: #15b0ed;
	--text-color-link-visited: #9f4199;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden:not(:focus):not(:active) {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
/* main :first-child { */
/* 	margin-top: 0; */
/* } */

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

#skip-link {
	text-decoration: none;
	background: var(--background-color);
	color: var(--text-color);
	padding: 0.5rem 1rem;
	border: 1px solid var(--color-gray-90);
	border-radius: 2px;
}

/* Prevent visually-hidden skip link fom pushing content around when focused */
#skip-link.visually-hidden:focus {
	position: absolute;
	top: 1rem;
	left: 1rem;
	/* Ensure it is positioned on top of everything else when it is shown */
	z-index: 999;
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
	color: seagreen;
}

pre,code[class*="language-"] {
	line-height: 1.2em !important;
	font-size: 0.93em !important;
}

pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-word;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	counter-reset: start-from var(--postlist-index);
	list-style: none;
	padding: 0;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-style: italic;
}

/* may want to make the description text smaller at some stage */
.post-description-list {
	font-size: 1.0em;
}

.post-description-main {
	font-style: italic;
}

.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

blockquote {
	margin-top: 0px;
	margin-left: 0px;
	margin-bottom: 15px;
	padding-left: 15px;
	border-left: 5px solid lightgray;
}
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
.utterances {
  margin-left: inherit !important;
}</style>
		

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script>
    

	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">DJ Adams</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
					<li class="nav-item"><a href="/blog/">Blog</a></li>
					<li class="nav-item"><a href="/feed/feed.xml">Feed</a></li>
				</ul>
			</nav>
		</header>

		<main id="main">
			<heading-anchors>
				


<h1 id="nw4-oss1-and-logon-group-selection-for-oss">NW4, OSS1 and logon group selection for OSS</h1>

<ul class="post-metadata">
	<li><time datetime="2004-05-31">31 May 2004</time></li>
	<li><a href="/tags/sapcommunity/" class="post-tag">sapcommunity</a>, </li>
	<li><a href="/tags/oss/" class="post-tag">oss</a></li>
</ul>

<p class="post-description-main">Digging into logon group selection.</p>

<p>While waiting for the DD ACTIVATION phase of an add-on installation to finish, my mind wandered off to something I‚Äôd noticed with my new <a href="/blog/posts/2004/03/19/was-6.40-testdrive-for-linux-is-here!/">WAS 6.40 testdrive for Linux is here!</a> system, with the SID ‚ÄúNW4‚Äù (NetWeaver ‚Äô04). Normally, when you start transaction OSS1, and hit the button to connect to OSS, you‚Äôre presented with a popup giving you a choice of groups, like the one in the screenshot here.</p>
<p><img src="/images/2004/05/GroupSelectionPopup.png" alt="screenshot of the group selection popup in OSS1"></p>
<p>But it wasn‚Äôt happening from my NW4 system. So I rolled up my sleeves, and wielded the mighty ‚Äú/h‚Äù in the ok-code (in the R/2 days we used to call this ‚Äúhobble mode‚Äù :-), cleaving my way into the ABAP that lay beneath OSS1. What I found was quite interesting.</p>
<h2 id="lgtst">lgtst</h2>
<p>There‚Äôs a command-line program called <code>lgtst</code> that can be used to query the message server of an SAP system and have information on logon groups and so on returned. This <code>lgtst</code> program is not, apparently, supported on all operating systems, so there‚Äôs a condition in the ABAP that checks that.</p>
<h2 id="direct-sapgui-call">Direct SAPGUI call</h2>
<p>If the server‚Äôs operating system is not supported, then a simple logon string is constructed from the technical settings held in OSS1 (menu path Parameter -&gt; Technical settings). For example, if you specify a SAProuter at your site thus:</p>
<pre class="language-text" tabindex="0"><code class="language-text">Name: host01 IP Address: 192.168.0.66 Instance: 99</code></pre>
<p>with SAProuter details thus:</p>
<pre class="language-text" tabindex="0"><code class="language-text">Name: sapserv3 IP Address: 147.204.2.5 Instance: 99</code></pre>
<p>and the SAPnet message server details thus:</p>
<pre class="language-text" tabindex="0"><code class="language-text">Name: oss001 DB Name: O01 Instance: 01</code></pre>
<p>then the route string constructed is just the concatenated saprouters leading to the dispatcher at O01‚Äôs ‚Äô01‚Äô instance, like this:</p>
<pre class="language-text" tabindex="0"><code class="language-text">/H/192.168.0.66/S/sapdp99/H/147.204.2.5/S/sapdp99/H/oss001/S/sapdp01</code></pre>
<p>This route string is then used in conjunction with a direct local call to your SAPGUI client, so that the end result is that a new SAPGUI instance is started for that connection.</p>
<p>So far, so good (or not, depending on your luck with SAProuter routing :-).</p>
<p>Logon group popup, then SAPGUI call
On the other hand, if the server‚Äôs operating system is supported, then something rather different happens. In this case, the <code>lgtst</code> program is executed on the server, to discover what logon groups are available for OSS. How does this happen? Well, the SAProuter information we‚Äôve already seen is used to construct a route string:</p>
<pre class="language-text" tabindex="0"><code class="language-text">/H/192.168.0.66/S/sapdp99/H/147.204.2.5/S/sapdp99 ...</code></pre>
<p><strong>but</strong>, instead of pointing to a dispatcher at the SAP OSS end:</p>
<pre class="language-text" tabindex="0"><code class="language-text">... /H/oss001/S/sapdp01</code></pre>
<p>it points to system O01‚Äôs message server:</p>
<pre class="language-text" tabindex="0"><code class="language-text">... /H/oss001/S/sapmsO01</code></pre>
<p>Once this route string has been constructed, it‚Äôs used in a call to <code>lgtst</code> like this:</p>
<pre class="language-shell" tabindex="0"><code class="language-shell">lgtst <span class="token parameter variable">-H</span> /H/<span class="token punctuation">..</span>./H/oss001/S/sapmsO01 <span class="token parameter variable">-S</span> x <span class="token parameter variable">-W</span> <span class="token number">30000</span></code></pre>
<p>This is basically requesting that the message server for O01 send back information on available servers (instances) and logon groups. A typical reply looks like this:</p>
<pre class="language-text" tabindex="0"><code class="language-text">list of reachable application servers -------------------------------------
[pwdf1120_O01_01] [pwdf1120] [10.16.0.11] [sapdp01] [3201] [DIA UPD BTC SPO ICM ]
[pwdf1302_O01_01] [pwdf1302] [147.204.100.41] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf0936_O01_01] [pwdf0936] [10.16.0.19] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf0810_O01_01] [pwdf0810] [10.16.0.18] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf1307_O01_01] [pwdf1307] [147.204.100.46] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf1300_O01_01] [pwdf1300] [147.204.100.39] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf1301_O01_01] [pwdf1301] [147.204.100.40] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf1177_O01_01] [pwdf1177] [10.16.1.13] [sapdp01] [3201] [DIA UPD BTC SPO ICM ]
[pwdf0937_O01_01] [pwdf0937] [10.16.0.20] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf0809_O01_01] [pwdf0809] [10.16.0.17] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf0808_O01_01] [pwdf0808] [10.16.0.16] [sapdp01] [3201] [DIA UPD BTC SPO ICM ]
[pwdf0807_O01_01] [pwdf0807] [10.16.0.15] [sapdp01] [3201] [DIA BTC SPO ICM ]
[pwdf0392_O01_01] [pwdf0392] [10.16.0.10] [sapdp01] [3201] [DIA BTC SPO ICM ]
[o01main_O01_01] [pwdf1070] [147.204.100.35] [sapdp01] [3201] [DIA UPD ENQ BTC SPO UP2 ICM ]
list of selectable logpn groups with favorites ------------------------------------------------
[1_PUBLIC] [147.204.100.40] [3201] [620]
[2_JAPANESE] [147.204.100.40] [3201] [620]
[DO_NOT_USE] [147.204.100.35] [3201] [620]
[EWA] [147.204.100.40] [3201] [620]
[REPL] [10.16.1.13] [3201] [620]
[SPACE] [10.16.1.13] [3201] [620]</code></pre>
<p>What we‚Äôre interested in are the lines in the second half of the output ‚Äì the list of selectable logon groups. The key data items here are the group names themselves (e.g. 1_PUBLIC), the IP addresses (e.g. 147.204.100.40), and the port numbers (e.g. 3201). The ABAP behind transaction OSS1 receives this <code>lgtst</code> output and parses it out into a nice list of groups, which it then presents to the user as shown in the screenshot above.</p>
<p>(And it goes almost without saying that if the call to <code>lgtst</code> fails, we get that friendly message ‚ÄúUnable to connect to message server (default connection will be used)‚Äù and revert back to the direct SAPGUI call).</p>
<p>So <strong>that‚Äôs</strong> where this popup comes from. Ok. Now I understand. It‚Äôs amazing how you use a transaction for years and never really look into how it actually works.</p>
<h2 id="why-not-linux">Why not Linux?</h2>
<p>So, just to get back to why I came here in the first place ‚Äì why doesn‚Äôt this popup appear in NW4? NW4 is a Linux-based testdrive system. <code>lgtst</code> works fine. But look at this:</p>
<pre class="language-abap" tabindex="0"><code class="language-abap"><span class="token comment">*---- Folgende Betriebssysteme werden unterst√ºtzt</span>
<span class="token keyword">IF</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'HP-UX'</span> <span class="token punctuation">)</span> <span class="token keyword">OR</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'AIX'</span> <span class="token punctuation">)</span>
<span class="token keyword">OR</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'OSF1'</span> <span class="token punctuation">)</span> <span class="token keyword">OR</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'SINIX'</span> <span class="token punctuation">)</span>
<span class="token keyword">OR</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'SunOS'</span> <span class="token punctuation">)</span> <span class="token keyword">OR</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'Windows NT'</span> <span class="token punctuation">)</span>
<span class="token keyword">OR</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'Relia'</span> <span class="token punctuation">)</span> <span class="token keyword">OR</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'SP_DC'</span> <span class="token punctuation">)</span>
<span class="token keyword">OR</span> <span class="token punctuation">(</span> SY<span class="token token-operator punctuation">-</span>OPSYS <span class="token operator">=</span> <span class="token string">'OS/400'</span> <span class="token punctuation">)</span><span class="token punctuation">.</span></code></pre>
<p>No Linux? Hmm, I soon fixed that, by copying the transaction (OSS1 -&gt; ZSS1) and the ABAP behind OSS1 (RSEFA910), adding a line to this IF statement to bring a bit of love the choice operating system of a ‚ÄúGnu generation‚Äù üòâ</p>
<p>Now I can call ZSS1 and delight in the group logon popup. Hurrah!</p>
<hr>
<p><a href="https://blogs.sap.com/2004/05/31/nw4-oss1-and-logon-group-selection-for-oss/">Originally published on SAP Community</a></p>



<script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async=""></script>

<ul class="links-nextprev"><li class="links-nextprev-prev">‚Üê Previous<br> <a href="/blog/posts/2004/05/11/sap-at-jax-2004/">SAP at JAX 2004</a></li><li class="links-nextprev-next">Next ‚Üí<br><a href="/blog/posts/2004/06/22/real-web-services-with-rest-and-icf/">Real Web Services with REST and ICF</a></li>
</ul>

			</heading-anchors>
		</main>

		<!-- This page `/blog/posts/2004/05/31/nw4-oss1-and-logon-group-selection-for-oss/` was built on 2026-01-28T08:12:42.645Z -->
		<script type="module" src="/dist/t-8sxMV3B9.js"></script>
	</body>
</html>
