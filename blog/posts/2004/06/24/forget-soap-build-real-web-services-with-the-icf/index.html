<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2004/06/24/forget-soap-build-real-web-services-with-the-icf/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.7884d8f8e9dd86c3b137.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Forget SOAP - build real web services with the ICF | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Forget SOAP - build real web services with the ICF"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2004/06/24/forget-soap-build-real-web-services-with-the-icf/"><meta name="description" content="Forget SOAP - build real web services with the ICF 24 Jun 2004 | 3 min read I don’t like getting into a lather when it comes to data and..."><meta property="og:description" content="Forget SOAP - build real web services with the ICF 24 Jun 2004 | 3 min read I don’t like getting into a lather when it comes to data and..."><meta name="description" content="Forget SOAP - build real web services with the ICF 24 Jun 2004 | 3 min read I don’t like getting into a lather when it comes to data and..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Forget SOAP - build real web services with the ICF</h1><div class="post__details"><time datetime="2004-06-24">24 Jun 2004 </time><span>| </span><span>3 min read</span></div></header><main class="post__content"><p>I don’t like getting into a lather when it comes to data and function integration. Rather than using SOAP, I prefer real web services, built with HTTP.</p><p>As an example of taking the <a href="https://web.archive.org/web/20040907010810/http://rest.blueoxen.net/cgi-bin/wiki.pl">REST</a>ian approach to exposing your SAP data and functionality through services you can build with the excellent Internet Communication Framework (ICF) layer, I thought I’d show you how straightforward and natural data integration can be by using a spreadsheet as an example.</p><p>In my recent SDN article (published this week):</p><p><strong>“Real Web Services with REST and ICF“</strong> (unfortunately lost and not archived)</p><p>… I presented a simple ICF handler example that allowed you to directly address various elements of CTS data (I prototyped it in my NW4 system so I thought I’d use data at hand, and build an example that you could try out too). For instance, you could retrieve the username of the person responsible for a transport by addressing precisely that data element like this:</p><pre class="language-text"><code class="language-text">http://shrdlu.local.net:8000/qmacro/transport/NW4K900007/as4text</code></pre><p>The approach of making your SAP data and functionality first class web entities, by giving each element its own URL, has wide and far reaching benefits.</p><p>Take a programmable spreadsheet, for example. You’re managing transports between systems by recording activity in a spreadsheet. You’re mostly handling actual transport numbers, but have also to log onto SAP to pull out information about those transports. You think: “Hmmm, wouldn’t it be useful if I could just specify the address of transport XYZ’s user in this cell here, and then the value would appear automatically?”</p><p>Let’s look at how this is done. My spreadsheet program of choice is the popular <a href="https://web.archive.org/web/20040606141722/http://www.gnome.org/projects/gnumeric/">Gnumeric</a>, available on Linux. If you use another brand, no problem – there’s bound to be similarities enough for you to do the same as what follows. For background reading on extending Gnumeric with Python, you should take a look here.</p><p>With Gnumeric, you can extend the functions available by writing little methods in Python. It’s pretty straightforward. In my home directory, I have a subdirectory structure</p><pre class="language-text"><code class="language-text">.gnumeric/1.2.1-bonobo/plugins/myfuncs/</code></pre><p>where I keep the Python files that hold my personal extended methods.</p><p>In there, in a file called my-funcs.py, I have a little script that defines a method <code>func_get()</code>. This method takes a URL as an argument, and goes to fetch the value of what that URL represents. In other words, it performs an HTTP GET to retrieve the content. If successful, and if the value is appropriate (it’s just an example here, I’m expecting a text/plain result), then it’s returned … and the cell containing the call to that function is populated with the value.</p><p>Here’s the code.</p><pre class="language-python"><code class="language-python"><span class="token comment"># The libs needed for this example</span><br><span class="token keyword">import</span> Gnumeric<br><span class="token keyword">import</span> string<br><span class="token keyword">import</span> urllib<br><span class="token keyword">from</span> re <span class="token keyword">import</span> sub<br><br><span class="token comment"># My version of FancyURLopener to provide basic auth info</span><br><span class="token keyword">class</span> <span class="token class-name">MyURLopener</span><span class="token punctuation">(</span>urllib<span class="token punctuation">.</span>FancyURLopener<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">prompt_user_passwd</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span><br>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">'developer'</span><span class="token punctuation">,</span> <span class="token string">'developer'</span><span class="token punctuation">)</span><br><br><span class="token comment"># The actual extended function definition</span><br><span class="token keyword">def</span> <span class="token function">func_get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    urllib<span class="token punctuation">.</span>_urlopener <span class="token operator">=</span> MyURLopener<span class="token punctuation">(</span><span class="token punctuation">)</span><br>    connection <span class="token operator">=</span> urllib<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span><br>    data <span class="token operator">=</span> connection<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token keyword">if</span> connection<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>gettype<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'text/plain'</span><span class="token punctuation">:</span><br>        <span class="token keyword">return</span> sub<span class="token punctuation">(</span>"<br>$<span class="token string">", "</span>"<span class="token punctuation">,</span> data<span class="token punctuation">)</span><br>    <span class="token keyword">else</span><span class="token punctuation">:</span><br>        <span class="token keyword">return</span> <span class="token string">"#VALUE!"</span><br><br><span class="token comment"># The link between the extended function name and the method name</span><br>example_functions <span class="token operator">=</span> <span class="token punctuation">{</span><br>        <span class="token string">'py_get'</span><span class="token punctuation">:</span> func_get<br><span class="token punctuation">}</span></code></pre><p>It’s pretty straightforward. Let’s just focus on the main part, <code>func_get()</code>. Because the resource in this example is protected with basic authentication (i.e. you have to supply a username and password), we subclass the standard FancyURLopener to be able to supply the username and password tuple, and then assign an instance of that class to the <code>urllib._urlopener</code> variable before actually making the call to GET.</p><p>If we get some ‘text/plain’ content as a result, we brush it off and return it to be populated into the cell, otherwise we return a ‘warning – something went wrong’ value.</p><p>We add the method definition to a hash that Gnumeric reads, and through the assignment, the <code>func_get()</code> is made available as new custom function <code>py_get</code> in the spreadsheet. (There’s also an extra XML file called plugin.xml, not shown here but described in the Gnumeric programming documentation mentioned earlier, that contains the name of the function so that it can be found when the spreadsheet user browses the list of functions.)</p><p>So, what does that give us? It gives us the ability to type something like this into a spreadsheet cell (split for readability):</p><pre class="language-text"><code class="language-text">=py_get('http://shrdlu.local.net:8000/qmacro/transport/NW4K900011/as4user')</code></pre><p>and have the cell automagically populated with the appropriate data from SAP. You can see an example of this in action in the screenshot:</p><p><img src="/images/2004/06/py_get.png" alt="screenshot of py_get in Gnumeric"></p><p>As you can see, being able to address information as first class web resources opens up a universe of possibilities for the use of real web services.</p><p>As a final note, I’ve submitted a SAP TechEd talk proposal. It’s titled:</p><p><strong>“The Internet Communication Framework: Into Context and Into Action!”</strong></p><p>If you’re interested in learning more about the ICF, and want to have some fun building and debugging a simple web service with me, you know where to cast your vote if you haven’t already. Hurry though – there’s only a few hours to go!</p><p>Thanks!</p><p><a href="https://blogs.sap.com/2004/06/24/forget-soap-build-real-web-services-with-the-icf/">Originally published on SAP Community</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/sapcommunity/">#sapcommunity</a> <a href="/tags/soap/">#soap</a> <a href="/tags/rest/">#rest</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2004/06/30/teched-talk-winners-congrats/"><span>←</span> <span>TechEd talk winners - congrats</span> </a><a href="/blog/posts/2004/05/31/nw4-oss1-and-logon-group-selection-for-oss/"><span>NW4, OSS1 and logon group selection for OSS</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.bsky.social" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>