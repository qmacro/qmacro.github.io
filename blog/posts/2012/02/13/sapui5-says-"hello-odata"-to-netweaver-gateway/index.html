<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2012/02/13/sapui5-says-%22hello-odata%22-to-netweaver-gateway/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.c50d7957852a24612d45.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>SAPUI5 says &quot;Hello OData&quot; to NetWeaver Gateway | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="SAPUI5 says &quot;Hello OData&quot; to NetWeaver Gateway"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2012/02/13/sapui5-says-&quot;hello-odata&quot;-to-netweaver-gateway/"><meta name="description" content="SAPUI5 says &amp;quot;Hello OData&amp;quot; to NetWeaver Gateway 13 Feb 2012 | 4 min read So following a very interesting podcast from Rui Nogueira..."><meta property="og:description" content="SAPUI5 says &amp;quot;Hello OData&amp;quot; to NetWeaver Gateway 13 Feb 2012 | 4 min read So following a very interesting podcast from Rui Nogueira..."><meta name="description" content="SAPUI5 says &amp;quot;Hello OData&amp;quot; to NetWeaver Gateway 13 Feb 2012 | 4 min read So following a very interesting podcast from Rui Nogueira..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>SAPUI5 says &quot;Hello OData&quot; to NetWeaver Gateway</h1><div class="post__details"><time datetime="2012-02-13">13 Feb 2012 </time><span>| </span><span>4 min read</span></div></header><main class="post__content"><p>So following a very interesting podcast from Rui Nogueira with SAP's Michael Falk and Tim Back on the HTML5-based UI Toolkit for SAP NetWeaver Gateway (aka &quot;SAPUI5&quot;) earlier this month, a beta version of SAPUI5 was released to the world on SDN, specifically in the &quot;Developer Center for UI Development Toolkit for HTML5&quot; (linked content lost in SAP community migration) section. I downloaded it and unpacked the contents into a directory to have a look at the docu and guidelines, and have an initial poke around.</p><p>Wow, those folks have certainly put together some nice documentation already! Try it for yourself - once downloaded, open the demokit directory and you should be presented with a nice (SAPUI5-powered) overview, developer guide, controls and API reference:</p><p><img src="/images/2012/02/sapui5overview.png" alt="SAPUI5 overview"></p><p>The framework is based upon JQuery / UI and contains a huge number of controls. It also supports data bindings, and one thing that had <a href="https://twitter.com/qmacro/status/167191292919545856">intrigued me</a> from the podcast was that data bindings were possible to arbitrary JSON and XML … and OData resources.</p><p>&quot;Gosh&quot;, I hear you say, &quot;that reminds me of something!&quot; Of course, SAP NetWeaver Gateway's REST-informed data-centric consumption model is based upon OData. So of course I immediately was curious to learn about SAPUI5 with an OData flavour. How could I try out one of the controls to surface information in OData resources exposed by NetWeaver Gateway?</p><p>What I ended up with is SAPUI5's DataTable control filled with travel agency information from my copy of the trial NetWeaver Gateway system, via an OData service all ready to use. You can see what I mean in this short <a href="http://youtu.be/yHVuWHNWK3I">screencast</a>.</p><p>Here's what I did to get the pieces together. I'm assuming you've got the trial Gateway system installed and set up (you know, fully qualified hostname, ICM configured nicely, and so on), and that you're semi-familiar with the SFLIGHT dataset.</p><h2>Step 1. The OData Service</h2><p>Check with transaction /iwfnd/reg_service, for the LOCAL system alias, that the service RMTSAMPLEFLIGHT is available, as shown here.</p><p><img src="/images/2012/02/iwfnd_reg_service1.png" alt="Transaction /iwfnd/reg_service"></p><p>Check you can see the service document by clicking the Call Browser button (you may need to provide a user and password for HTTP basic authentication). You can also check the data by manually navigating to the TravelagencyCollection by following the relative href attribute of the app:collection element as shown here:</p><p><img src="/images/2012/02/travelagencycollection.png" alt="Travelagency connection"></p><p>In other words, navigate from something like this:</p><pre class="language-url"><code class="language-url"><span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">gateway.server</span><span class="token port-segment"><span class="token port-delimiter">:</span></span></span><span class="token path">port<span class="token path-separator">/</span>sap<span class="token path-separator">/</span>opu<span class="token path-separator">/</span>sdata<span class="token path-separator">/</span>IWFND<span class="token path-separator">/</span>RMTSAMPLEFLIGHT<span class="token path-separator">/</span></span><span class="token query"><span class="token query-delimiter">?</span><span class="token pair"><span class="token key">$format</span>=<span class="token value">xml</span></span></span></code></pre><p>to this:</p><pre class="language-url"><code class="language-url"><span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">gateway.server</span><span class="token port-segment"><span class="token port-delimiter">:</span></span></span><span class="token path">port<span class="token path-separator">/</span>sap<span class="token path-separator">/</span>opu<span class="token path-separator">/</span>sdata<span class="token path-separator">/</span>IWFND<span class="token path-separator">/</span>RMTSAMPLEFLIGHT<span class="token path-separator">/</span>TravelagencyCollection</span><span class="token query"><span class="token query-delimiter">?</span><span class="token pair"><span class="token key">$format</span>=<span class="token value">xml</span></span></span></code></pre><p>(The <code>$format=xml</code> is to force the service to return a less exotic Content-Type of application/xml rather than an Atom-flavoured one, so that the browser is more likely to render the data in human-readable form.)</p><p>Following this href should show you some actual travel agency data in the form of entries in an Atom feed (yes, &quot;everything is a collection/feed!&quot;):</p><p><img src="/images/2012/02/atomentry1.png" alt="Atom entry"></p><h2>Step 2. The SAPUI5 Framework</h2><p>Make your SAPUI5 framework accessible. To avoid Same Origin Policy based issues in your browser, get your Gateway's ICM to serve the files for you. Create a 'sapui5' directory in your Gateway's filesystem:</p><pre class="language-text"><code class="language-text">/usr/sap/NPL/DVEBMGS42/sapui5/</code></pre><p>unpack the SAPUI5 framework into here, and add an instance profile configuration parameter to tell the ICM to serve files from this location:</p><pre class="language-text"><code class="language-text">icm/HTTP/file_access_5 = PREFIX=/sapui5/, DOCROOT=$(DIR_INSTANCE)/sapui5/, BROWSEDIR=2</code></pre><p>(here I have 5 previous <code>file_access_xx</code> parameters, hence the '5' suffix in this example)</p><p>and when you restart the ICM it should start serving the framework to you:</p><p><img src="/images/2012/02/sapui5dir.png" alt="SAPUI5 dir"></p><h2>Step 3. The HTML / Javascript Application Skeleton</h2><p>Actually, calling it an application is far too grand. But you know what I mean. Now we have the SAPUI5 framework being served, and the OData service available, it's time to put the two together.</p><p>Here's the general skeleton of the application - we pull in SAPUI5, and have an element in the body where the control will be placed:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>SAP OData in SAPUI5 Data Table Control<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- Load SAPUI5, select theme and control libraries --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sap-ui-bootstrap<span class="token punctuation">"</span></span><br>      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><br>      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://gateway.server:port/sapui5/sapui5-static/resources/sap-ui-core.js<span class="token punctuation">"</span></span><br>      <span class="token attr-name">data-sap-ui-theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sap_platinum<span class="token punctuation">"</span></span><br>      <span class="token attr-name">data-sap-ui-libs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sap.ui.commons,sap.ui.table<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>    <span class="token operator">...</span><br>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>SAP OData in SAPUI5 Data Table Control<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataTable<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>In the final step we'll have a look at what goes in the &quot;…&quot; bit.</p><h2>Step 4. Using the SAPUI5 Framework in the Application</h2><p>So now it's time to flex our Javascript fingers, stand on the shoulders of giants, and write a few lines of code to invoke the SAPUI5 power and glory.</p><p>What we need to do is:</p><ul><li>create a DataTable control</li><li>add columns to it to represent the fields in the OData entries</li><li>create an OData data model</li><li>link the DataTable to this data model</li><li>bind the rows to the TravelagencyCollection</li><li>place the control on the page</li></ul><p>Simples!</p><p>Creating the DataTable control goes like this (but you must remember to add the control library to the <code>data-sap-ui-libs</code> attribute when loading SAPUI5 - see Step 3):</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> oTable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>table<span class="token punctuation">.</span>DataTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Each column is added and described like this:</p><pre class="language-javascript"><code class="language-javascript">oTable<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>table<span class="token punctuation">.</span>Column</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>Label</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"Agency Name"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>TextView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bindProperty</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"NAME"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">sortProperty</span><span class="token operator">:</span> <span class="token string">"NAME"</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>There are three different templates in use, for different fields - the basic TextView, the TextField and the Link.</p><p>The OData data model is created like this, where the URL parameter points to the service document:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> oModel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>model<span class="token punctuation">.</span>odata<span class="token punctuation">.</span>ODataModel</span><span class="token punctuation">(</span><span class="token string">"http://gateway.server:port/sap/opu/sdata/iwfnd/RMTSAMPLEFLIGHT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>It's then linked to the control like this:</p><pre class="language-javascript"><code class="language-javascript">oTable<span class="token punctuation">.</span><span class="token function">setModel</span><span class="token punctuation">(</span>oModel<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The specific OData resource TravelagencyCollection is bound to the control's rows like this:</p><pre class="language-javascript"><code class="language-javascript">oTable<span class="token punctuation">.</span><span class="token function">bindRows</span><span class="token punctuation">(</span><span class="token string">"TravelagencyCollection"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>And then the control is placed on the page like this:</p><pre class="language-javascript"><code class="language-javascript">oTable<span class="token punctuation">.</span><span class="token function">placeAt</span><span class="token punctuation">(</span><span class="token string">"dataTable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>I've put the complete code in a <a href="https://gist.github.com/qmacro/1820544">Github Gist</a> for you to have a look at.</p><h2>Result</h2><p>What you end up with is live data from your SAP Gateway system that is presented to you like this:</p><p><img src="/images/2012/02/result.png" alt="Result"></p><p>Share and enjoy!</p><p><a href="https://blogs.sap.com/2012/02/13/sapui5-says-hello-odata-to-netweaver-gateway/">Originally published on SAP Community</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/sapcommunity/">#sapcommunity</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2012/02/28/review-of-red-rice-ale-from-hitachino-nest/"><span>←</span> <span>Review of Red Rice Ale from Hitachino Nest</span> </a><a href="/blog/posts/2012/01/31/making-odata-from-sap-accessible-with-the-icm&#39;s-help/"><span>Making OData from SAP accessible with the ICM&#39;s help</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>