<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2021/09/07/sap-tech-bytes:-btp-cli-logging-in/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.54fe08380532f159e78f.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>SAP Tech Bytes: btp CLI – logging in | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="SAP Tech Bytes: btp CLI – logging in"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2021/09/07/sap-tech-bytes:-btp-cli-logging-in/"><meta name="description" content="SAP Tech Bytes: btp CLI – logging in 07 Sep 2021 | 4 min read Start exploring with the btp CLI by logging in, then finding and selecting a..."><meta property="og:description" content="SAP Tech Bytes: btp CLI – logging in 07 Sep 2021 | 4 min read Start exploring with the btp CLI by logging in, then finding and selecting a..."><meta name="description" content="SAP Tech Bytes: btp CLI – logging in 07 Sep 2021 | 4 min read Start exploring with the btp CLI by logging in, then finding and selecting a..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>SAP Tech Bytes: btp CLI – logging in</h1><div class="post__details"><time datetime="2021-09-07">07 Sep 2021 </time><span>| </span><span>4 min read</span></div></header><main class="post__content"><p><em>Start exploring with the btp CLI by logging in, then finding and selecting a subaccount for subsequent activities.</em></p><p>This is a follow-on post from the previous one: <a href="/blog/posts/2021/09/01/sap-tech-bytes:-btp-cli-installation/">SAP Tech Bytes - btp CLI installation</a> and assumes you've got it set up according to that post, in an SAP Business Application Studio (App Studio) dev space, with the location of the <code>btp</code> binary (in <code>$HOME/bin/</code>) added to the environment variable <code>$PATH</code> so that you can invoke it simply as <code>btp</code>.</p><p>Previously I made a brief mention of the client-server nature of the btp CLI. The fact that you're running a command line interface to connect to and control remote services more or less pre-supposes that architecture; moreover, it's a great way for the team to provide an abstraction between the btp CLI command structure and the surface area of the services &amp; entities on the platform itself.</p><h2>Invoking btp</h2><p>Invoke <code>btp</code> from a terminal in your App Studio dev space and stare at the output for a moment; it should look something like this:</p><pre class="language-text"><code class="language-text">Welcome to the SAP BTP command line interface (client v2.8.0)<br><br>Usage: btp [OPTIONS] ACTION [GROUP/OBJECT] [PARAMS]<br><br>CLI server URL:                    not set<br>User:                              not set<br>Configuration:                     /home/user/.cache/.btp/config.json<br><br>You are currently not logged in.<br><br>Tips:<br>  To log in to a global account of SAP BTP, use 'btp login'. For help on login, use 'btp --help login'.<br>  To display general help, use 'btp --help'.<br><br>OK</code></pre><p>There's a lot to unpack here. Briefly:</p><ul><li>the version of the client (that we downloaded last time) is confirmed as 2.8.0</li><li>the &quot;Usage&quot; shows that there's a well-defined structure to the command syntax</li><li>we connect to a btp CLI server via a URL</li><li>we're not currently logged in</li><li>configuration is stored locally in a JSON file</li></ul><h2>Logging in</h2><p>Initiate the login process:</p><pre class="language-shell"><code class="language-shell">btp login</code></pre><p>You should see the following prompts, and should respond similar to what's shown here - see below for an explanation of the &quot;Global account subdomain&quot;:</p><pre class="language-text"><code class="language-text">SAP BTP command line interface (client v2.8.0)<br><br>CLI server URL [https://cpcli.cf.eu10.hana.ondemand.com]><br>Connecting to CLI server at https://cpcli.cf.eu10.hana.ondemand.com.<br><br>Global account subdomain>82715b8dtrial-ga<br>User>sapdeveloper@example.com<br>Password>********<br><br>Login successful<br>We stored your configuration file at: /home/user/.cache/.btp/config.json<br><br>Current target:<br>  Global account (subdomain: 82715b8dtrial-ga)<br><br>Tip:<br>  For more information on the targeting mechanism, use 'btp --help target'.<br><br>OK</code></pre><p>In the trial context, which we're in here, the default CLI server that is suggested (<code>https://cpcli.cf.eu10.hana.ondemand.com</code>) is appropriate.</p><p>Additionally, the global account subdomain is just your global account identifier with a <code>-ga</code> suffix. Here's a screenshot of the temporary trial account I set up for this set of examples, where the relationship between the global account identifier and the global account subdomain can be seen:</p><p><img src="/images/2021/09/account-explorer.png" alt=""></p><p>Now you've logged in, run <code>btp</code> again to see the difference. You should now see the version of the server to which you're connected and authenticated, confirmation of your user identification, and also the &quot;current target&quot;, being the global account that you specified (via the subdomain) when you logged in. The output should look something like this:</p><pre class="language-text"><code class="language-text">SAP BTP command line interface (client v2.8.0)<br><br>Usage: btp [OPTIONS] ACTION [GROUP/OBJECT] [PARAMS]<br><br>CLI server URL:                    https://cpcli.cf.eu10.hana.ondemand.com (server v2.8.0)<br>User:                              P0003480944 (sapdeveloper@example.com)<br>Configuration:                     /home/user/.cache/.btp/config.json<br><br>Current target:<br>  Global account (subdomain: 82715b8dtrial-ga)<br><br>Tips:<br>  For information about the targeting mechanism, use 'btp --help target'.<br>  To display general help, use 'btp --help'.<br><br>OK</code></pre><blockquote><p>The btp CLI also offers a way to <a href="https://help.sap.com/products/BTP/65de2977205c403bbc107264b8eccf4b/b2a56a8a222940089fd2704a9c26140d.html">log in through the browser</a>, with the <code>--sso</code> option.</p></blockquote><h2>Understanding targets</h2><p>Let's dwell on the &quot;target&quot; concept for a moment, it's important. The btp CLI has a <a href="https://help.sap.com/products/BTP/65de2977205c403bbc107264b8eccf4b/720645a3ed3945bd8d97a670b948ac07.html">command context</a> for calls. At the outset it's only set at the top level, to the global account that you specified when you logged in. All actions that work at a global account level will by default target this global account.</p><p>You'll discover that many of the actions you want to perform with the btp CLI will be at the subaccount level - at the level of your trial subaccount, effectively. You can specify a target subaccount too. Let's do this now. Given that our subaccount is &quot;trial&quot; (as we can see from the screenshot earlier), let's try:</p><pre class="language-shell"><code class="language-shell">btp target <span class="token parameter variable">--subaccount</span> trial</code></pre><p>We get this:</p><pre class="language-text"><code class="language-text">Subaccount 'trial' does not exist in the current global account. Make sure to provide the ID of a subaccount of the current global account.<br><br>Tip:<br>  To find your subaccount ID, use 'btp list accounts/subaccount'.<br><br>ERROR</code></pre><p>Hmm, ok. Well, let's follow the advice we're given:</p><pre class="language-shell"><code class="language-shell">btp list accounts/subaccount</code></pre><blockquote><p>Pause for a second to consider the <code>ACTION [GROUP/OBJECT]</code> command structure we saw earlier - here we're seeing a nice example of that.</p></blockquote><p>There's our trial account in the list that's produced:</p><pre class="language-text"><code class="language-text">subaccounts in global account 906b8d84-2f2c-429d-8ce4-c1bf166aeb08...<br><br>subaccount id:                         display name:   subdomain:      region:   beta-enabled:   parent id:                             parent type:     state:   state message:<br>b8a33bf9-b155-4736-aadf-582dae8fd65a   trial           82715b8dtrial   eu10      true            906b8d84-2f2c-429d-8ce4-c1bf166aeb08   global account   OK       Updated tenant status to ACTIVE<br><br>OK</code></pre><p>It's the ID that's required:</p><pre class="language-shell"><code class="language-shell">btp target <span class="token parameter variable">--subaccount</span> b8a33bf9-b155-4736-aadf-582dae8fd65a</code></pre><blockquote><p>The ID is what you see when selecting &quot;More Info&quot; from the three-dots menu on the &quot;trial&quot; subaccount card in the screenshot we saw earlier.</p></blockquote><p>The result of specifying the ID in the target command is what we're looking for:</p><pre class="language-text"><code class="language-text">Targeting subaccount 'b8a33bf9-b155-4736-aadf-582dae8fd65a'.<br>Commands that only work on global account level will be executed in the parent global account.<br><br>Current target:<br>  Global account (subdomain: 82715b8dtrial-ga)<br>  └─ Subaccount (ID: b8a33bf9-b155-4736-aadf-582dae8fd65a)<br><br>Tips:<br>  To execute a command in the parent global account, use parameter '-ga' without value.<br>  To execute a command in a different context, specify the subaccount, directory, or global account in the command.<br><br>OK</code></pre><p>This is already more useful for us with our trial accounts on the Business Technology Platform. It's a good setup with which to continue our journey of discovery.</p><p>Let's end this post with a final command, to examine details of our subaccount we're now targetting:</p><pre class="language-shell"><code class="language-shell">btp get accounts/subaccount</code></pre><p>If we hadn't already specified the subaccount as part of the target, we'd have received an error at this point:</p><pre class="language-text"><code class="language-text">Constraint violated - you must provide parameter 'ID'.<br><br>Usage: btp [OPTIONS] get accounts/subaccount ID --global-account SUBDOMAIN<br><br>ERROR</code></pre><p>However, because we've stored the identification of our trial subaccount using the <code>target</code> command, we get what we're looking for:</p><pre class="language-text"><code class="language-text">Showing subaccount details for b8a33bf9-b155-4736-aadf-582dae8fd65a...<br><br>subaccount id:         b8a33bf9-b155-4736-aadf-582dae8fd65a<br>display name:          trial<br>description:<br>subdomain:             82715b8dtrial<br>region:                eu10<br>created by:<br>beta-enabled:          true<br>used for production:   false<br>parent id:             906b8d84-2f2c-429d-8ce4-c1bf166aeb08<br>parent type:           global account<br>state:                 OK<br>state message:         Updated tenant status to ACTIVE<br><br>OK</code></pre><p>Great! In the next post, we take a quick look at managing configuration: <a href="/blog/posts/2021/09/14/sap-tech-bytes:-btp-cli-managing-configuration/">SAP Tech Bytes: btp CLI - managing configuration</a>.</p><hr><p><img src="/images/2021/02/screenshot-2021-02-22-at-11.00.25.png" alt=""></p><p>SAP Tech Bytes is an initiative to bring you bite-sized information on all manner of topics, in <a href="https://www.youtube.com/playlist?list=PL6RpkC85SLQC3HBShmlMaPu_nL--4f20z">video</a> and <a href="https://community.sap.com/t5/tag/sap-tech-bytes/tg-p">written</a> format. Enjoy!</p><hr><p><a href="https://community.sap.com/t5/technology-blogs-by-sap/sap-tech-bytes-btp-cli-logging-in/ba-p/13519378">Originally published on SAP Community</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/sapcommunity/">#sapcommunity</a> <a href="/tags/btp/">#btp</a> <a href="/tags/cli/">#cli</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2021/09/12/improving-shell-fu-with-practice/"><span>←</span> <span>Improving shell fu with practice</span> </a><a href="/blog/posts/2021/09/03/exploring-fff-part-1-main/"><span>Exploring fff part 1 - main</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.org" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>