<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>SAP Tech Bytes: btp CLI - autocompletion</title>
		<meta name="description" content="Reserving the right to be wrong.">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
		<link rel="icon" type="image/x-icon" href="/images/favicon.ico">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #2884d2;
	--text-color-link-active: #15b0ed;
	--text-color-link-visited: #9f4199;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden:not(:focus):not(:active) {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
/* main :first-child { */
/* 	margin-top: 0; */
/* } */

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

#skip-link {
	text-decoration: none;
	background: var(--background-color);
	color: var(--text-color);
	padding: 0.5rem 1rem;
	border: 1px solid var(--color-gray-90);
	border-radius: 2px;
}

/* Prevent visually-hidden skip link fom pushing content around when focused */
#skip-link.visually-hidden:focus {
	position: absolute;
	top: 1rem;
	left: 1rem;
	/* Ensure it is positioned on top of everything else when it is shown */
	z-index: 999;
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
	color: seagreen;
}

pre,code[class*="language-"] {
	line-height: 1.2em !important;
	font-size: 0.93em !important;
}

pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	counter-reset: start-from var(--postlist-index);
	list-style: none;
	padding: 0;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-style: italic;
}

/* may want to make the description text smaller at some stage */
.post-description-list {
	font-size: 1.0em;
}

.post-description-main {
	font-style: italic;
}

.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

blockquote {
	margin-top: 0px;
	margin-left: 0px;
	margin-bottom: 15px;
	padding-left: 15px;
	border-left: 5px solid lightgray;
}
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
.utterances {
  margin-left: inherit !important;
}</style>
		

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script>
    

	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">DJ Adams</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
					<li class="nav-item"><a href="/blog/">Blog</a></li>
					<li class="nav-item"><a href="/feed/feed.xml">Feed</a></li>
				</ul>
			</nav>
		</header>

		<main id="main">
			<heading-anchors>
				


<h1 id="sap-tech-bytes-btp-cli-autocompletion">SAP Tech Bytes: btp CLI - autocompletion</h1>

<ul class="post-metadata">
	<li><time datetime="2021-09-21">21 September 2021</time></li>
	<li><a href="/tags/sapcommunity/" class="post-tag">sapcommunity</a>, </li>
	<li><a href="/tags/btp/" class="post-tag">btp</a>, </li>
	<li><a href="/tags/cli/" class="post-tag">cli</a></li>
</ul>

<p class="post-description-main"></p>

<p><em>Get the btp CLI to help you with command autocompletion.</em></p>
<p>This is a follow-on post from the previous one: <a href="/blog/posts/2021/09/14/sap-tech-bytes:-btp-cli-managing-configuration/">SAP Tech Bytes: btp
CLI - managing
configuration</a>
and starts where we left off there, with you logged in.</p>
<h2 id="actions-groups-objects-and-the-command-structure">Actions, groups, objects and the command structure</h2>
<p>There are many different types of resources that you might want to
manage on the SAP Business Technology Platform (BTP). Moreover, there
are different actions that you might want to take on each. This is why
the command structure that the btp CLI supports is how it is:</p>
<pre class="language-text" tabindex="0"><code class="language-text">Usage: btp [OPTIONS] ACTION [GROUP/OBJECT] [PARAMS]</code></pre>
<p>The BTP resources are the OBJECTs and these are organised into different
GROUPs. You perform ACTIONs on these, possibly supplying relevant
information via PARAMS. There are also general
<a href="https://help.sap.com/viewer/DRAFT/65de2977205c403bbc107264b8eccf4b/Cloud/en-US/11d9f67d2c68485ca2f435b955d3b85b.html">OPTIONS</a>
that are not ACTION or GROUP/OBJECT specific.</p>
<p>Here's a shortened excerpt from the output shown when invoking the
<code>--help</code> option, i.e. <code>btp --help</code>:</p>
<pre class="language-text" tabindex="0"><code class="language-text">Actions for accounts/available-environment
  list                  Get all available environments for a subaccount
  get                   Get details about an available environment for a subaccount

Actions for accounts/directory
  get                   Get details about a directory and its contents
  create                Create a directory
  update                Update a directory
  delete                Delete a directory
  enable                Change the set of enabled features for a directory

Actions for accounts/subaccount
  list                  List all subaccounts in a global account
  get                   Get details about a subaccount
  create                Create a subaccount
  update                Update a subaccount
  delete                Delete a subaccount
  move                  Move a subaccount
  subscribe             Subscribe to an application from a subaccount
  unsubscribe           Unsubscribe an application from a subaccount

Actions for security/app
  list                  List all apps
  get                   Get details about a specific app

...</code></pre>
<p>The relationship between ACTION (<code>get</code>, <code>list</code>, <code>update</code>, etc) and
GROUP/OBJECT (<code>accounts/directory</code>, <code>security/app</code>, etc) can be seen
quite nicely here.</p>
<h2 id="enabling-autocomplete">Enabling autocomplete</h2>
<p>With the btp CLI you can perform different actions on a wide range of
objects, so much so that it can be a little overwhelming at first. This
is where autocompletion comes in. You can use the Tab key to ask <code>btp</code>
to make suggestions, based on what you've typed in so far (which could
be nothing at all).</p>
<p>As well as the main actions, there are some general actions too -
you've used a couple already: <code>login</code> and <code>target</code>. <a href="https://help.sap.com/viewer/DRAFT/65de2977205c403bbc107264b8eccf4b/Cloud/en-US/46355fab22814944bedf449a6c953369.html">Turning on
autocompletion</a>
is achieved with another of these general actions.</p>
<p>Do it now:</p>
<pre class="language-shell" tabindex="0"><code class="language-shell">btp <span class="token builtin class-name">enable</span> autocomplete <span class="token function">bash</span></code></pre>
<blockquote>
<p>The btp CLI supports autocompletion for different shells: Bash, Zsh
and PowerShell. The shell you're running in your SAP Business
Application Studio dev space is Bash; this is why you need to specify
<code>bash</code> as a parameter.</p>
</blockquote>
<p>Here's what happens:</p>
<pre class="language-text" tabindex="0"><code class="language-text">This will install the autocomplete plugin script for bash
to /home/user/.config/btp/autocomplete/scripts.
Do you want to continue? [no]>yes
Which RCFile should be used for the installation?
1: /home/user/.bash_profile
2: /home/user/.bashrc
3: /home/user/.profile
4: Custom
Enter option>2
Autocomplete script for bash has been installed
to /home/user/.config/btp/autocomplete/scripts.
You must start a new terminal session to activate the installed script.

Tips:
  Use the TAB key to complete commands and provide valid command actions, options, and parameters.
  Use the TAB key to cycle through the suggestion lists and the ENTER key to select.

OK</code></pre>
<p>There are a few things worthy of note here:</p>
<ul>
<li>the autocomplete mechanism is installed into a subdirectory <code>autocomplete/</code> within the configuration directory we specified for the btp CLI; this keeps everything nicely together</li>
<li>I chose option 2, i.e. <code>/home/user/.bashrc</code> as that is the file we've been using to maintain and customise our shell environment There are useful tips at the end of the output on how to use the autocomplete feature</li>
</ul>
<blockquote>
<p>Have you ever wondered why the <code>.bashrc</code> file name ends in <code>rc</code> and
what it means? Did you spot the reference to <code>RCFile</code> in the output?
Let me know in the comments.</p>
</blockquote>
<p>The installed autocomplete mechanism in <code>.config/btp/autocomplete/</code>
needs to be activated when the shell session starts; if you look into
your <code>.bashrc</code> file now, you'll see a new line has been appended, right
after the two we recently added. The line looks like this (with some
whitespace added for readability):</p>
<pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token assign-left variable">SAP_BTP_CLI_AUTOCOMPLETE</span><span class="token operator">=</span><span class="token string">"/home/user/.config/btp/autocomplete/scripts/sapbtpcli-autocomplete.plugin.sh"</span>
  <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">source</span> <span class="token variable">$SAP_BTP_CLI_AUTOCOMPLETE</span>
  <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">bind</span> <span class="token string">'set show-all-if-ambiguous on'</span>
  <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">bind</span> <span class="token string">'set show-mode-in-prompt on'</span></code></pre>
<p>This just sets another btp CLI related environment variable pointing to
the autocomplete script, runs that script, and sets a couple of
<a href="https://www.gnu.org/software/bash/manual/html_node/Readline-Init-File-Syntax.html"><code>readline</code>
options</a>:</p>
<ul>
<li><code>show-all-if-ambiguous</code> will list possible matches immediately</li>
<li><code>show-mode-in-prompt</code> adds a little indicator to the prompt to show the editing mode (we'll see this shortly)</li>
</ul>
<blockquote>
<p><code>readline</code> is Bash's command-line editing interface.</p>
</blockquote>
<p>As instructed, start a new terminal session to have the <code>.bashrc</code>
re-sourced, and you're ready. Note that the shell prompt now has an @
symbol at the front:</p>
<pre class="language-text" tabindex="0"><code class="language-text">@user: user $</code></pre>
<p>This is the result of turning on <code>show-mode-in-prompt</code>; personally, I
don't like this so I remove that last <code>bind</code> statement from my
<code>.bashrc</code>. You can do the same, or leave it as it is.</p>
<h2 id="enjoying-the-comfort-of-autocomplete">Enjoying the comfort of autocomplete</h2>
<p>Now you're ready to try the autocomplete features out. First, enter
<code>btp</code> (including a space, so that the shell won't try to autocomplete
the &quot;btp&quot; command itself), and then hit the Tab key; you should see
something like this:</p>
<pre class="language-text" tabindex="0"><code class="language-text">@user: user $ btp <tab>
add          enable       register     unassign     update
assign       get          remove       unregister
create       list         share        unshare
delete       move         subscribe    unsubscribe</tab></code></pre>
<p>You'll recognise these as all of the possible actions that <code>btp</code>
understands.</p>
<p>Next, continue with <code>l &lt;tab&gt;</code>:</p>
<pre class="language-text" tabindex="0"><code class="language-text">@user: user $ btp l<tab></tab></code></pre>
<p>which should then autocomplete to <code>list</code> and hit <code>&lt;tab&gt;</code> once more, and
you should see the objects, by group, which can be listed:</p>
<pre class="language-text" tabindex="0"><code class="language-text">@user: user $ btp list
accounts/assigned-entitlements  security/role
accounts/available-environment  security/role-collection
accounts/available-region       security/user
accounts/custom-property        services/binding
accounts/entitlement            services/broker
accounts/environment-instance   services/instance
accounts/resource-provider      services/offering
accounts/subaccount             services/plan
accounts/subscription           services/platform
security/app</code></pre>
<blockquote>
<p>Note that you haven't pressed Enter yet, at all.</p>
</blockquote>
<p>Nice! Let's say we want to list the entitlements for our trial
subaccount (remember, this is already pre-selected via our use of
<code>target</code> in <a href="/blog/posts/2021/09/07/sap-tech-bytes:-btp-cli-logging-in/">SAP Tech Bytes: btp CLI - logging
in</a>).
So continue on the same line with <code>a&lt;tab&gt;e&lt;tab&gt;</code> which will narrow
things down to the <code>accounts</code> group and the objects beginning with <code>e</code>:</p>
<pre class="language-text" tabindex="0"><code class="language-text">@user: user $ btp list
accounts/entitlement           accounts/environment-instance</code></pre>
<p>Close in on your target by adding a final <code>t</code> (note that the
autocomplete has autocompleted as far as it can by adding an <code>n</code>) to
disambiguate <code>entitlement</code> from <code>environment-instance</code>, and then hit
<code>&lt;tab&gt;</code> one more time to autocomplete to what we're looking for:</p>
<pre class="language-shell" tabindex="0"><code class="language-shell">@user: user $ btp list accounts/entitlement

Showing entitlements <span class="token keyword">for</span> subaccount b8a33bf9-b155-4736-aadf-582dae8fd65a:

<span class="token function">service</span> name                         <span class="token function">service</span> plan       <span class="token function">quota</span>
customer-order-sourcing-app-trial    dev                <span class="token number">1</span>
saas-registry                        application        <span class="token number">1</span>
APPLICATION_RUNTIME                  MEMORY             <span class="token number">4</span>
alm-ts                               lite               <span class="token number">1</span>
sapappstudiotrial                    trial              <span class="token number">1</span>
business-rules                       lite               <span class="token number">1</span>
transport                            standard           <span class="token number">1</span>
personal-data-manager-service        standard           <span class="token number">1</span>
portal                               standard           <span class="token number">100</span>
<span class="token punctuation">..</span>.</code></pre>
<p>Now that's what I call working in comfort! Here it is in action:</p>
<p><img src="/images/2021/09/autocomplete.gif" alt=""></p>
<p>The best thing to do here is to simply try the autocomplete feature out
for yourself - it's easiest to learn about it by doing. And that's it
for this post!</p>
<p>In the next post, we take a look at output, and alternative formats.</p>
<hr>
<p><img src="/images/2021/02/screenshot-2021-02-22-at-11.00.25.png" alt=""></p>
<p>SAP Tech Bytes is an initiative to bring you bite-sized information on
all manner of topics, in
<a href="https://www.youtube.com/playlist?list=PL6RpkC85SLQC3HBShmlMaPu_nL--4f20z">video</a>
and <a href="https://community.sap.com/t5/tag/sap-tech-bytes/tg-p">written</a> format. Enjoy!</p>
<hr>
<p><a href="https://community.sap.com/t5/technology-blogs-by-sap/sap-tech-bytes-btp-cli-autocompletion/ba-p/13503134">Originally published on SAP Community</a></p>



<script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async=""></script>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/blog/posts/2021/09/15/using-functions-more/">Using functions more</a></li><li class="links-nextprev-next">Next →<br><a href="/blog/posts/2021/10/14/sourcing-vs-executing-in-bash/">Sourcing vs executing in Bash</a></li>
</ul>

			</heading-anchors>
		</main>

		<!-- This page `/blog/posts/2021/09/21/sap-tech-bytes-btp-cli-autocompletion/` was built on 2025-10-10T07:26:34.756Z -->
		<script type="module" src="/dist/R1izrEYWYW.js"></script>
	</body>
</html>
