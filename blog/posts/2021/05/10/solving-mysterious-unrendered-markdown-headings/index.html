<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Solving mysterious unrendered markdown headings</title>
		<meta name="description" content="Reserving the right to be wrong.">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
		<link rel="icon" type="image/x-icon" href="/images/favicon.ico">

      <meta property="og:title" content="Solving mysterious unrendered markdown headings">
        <meta property="og:site_name" content="DJ Adams">
          <meta property="og:image" content="/images/site-image.png">
        <meta property="og:description" content="Reserving the right to be wrong.">
        <meta property="og:url" content="https://qmacro.org/blog/posts/2021/05/10/solving-mysterious-unrendered-markdown-headings/">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #2884d2;
	--text-color-link-active: #15b0ed;
	--text-color-link-visited: #9f4199;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden:not(:focus):not(:active) {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
/* main :first-child { */
/* 	margin-top: 0; */
/* } */

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

#skip-link {
	text-decoration: none;
	background: var(--background-color);
	color: var(--text-color);
	padding: 0.5rem 1rem;
	border: 1px solid var(--color-gray-90);
	border-radius: 2px;
}

/* Prevent visually-hidden skip link fom pushing content around when focused */
#skip-link.visually-hidden:focus {
	position: absolute;
	top: 1rem;
	left: 1rem;
	/* Ensure it is positioned on top of everything else when it is shown */
	z-index: 999;
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
	color: seagreen;
}

pre,code[class*="language-"] {
	line-height: 1.2em !important;
	font-size: 0.93em !important;
}

pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	counter-reset: start-from var(--postlist-index);
	list-style: none;
	padding: 0;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-style: italic;
}

/* may want to make the description text smaller at some stage */
.post-description-list {
	font-size: 1.0em;
}

.post-description-main {
	font-style: italic;
}

.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

blockquote {
	margin-top: 0px;
	margin-left: 0px;
	margin-bottom: 15px;
	padding-left: 15px;
	border-left: 5px solid lightgray;
}
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
.utterances {
  margin-left: inherit !important;
}</style>
		

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script>
    

	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">DJ Adams</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
					<li class="nav-item"><a href="/blog/">Blog</a></li>
					<li class="nav-item"><a href="/feed/feed.xml">Feed</a></li>
				</ul>
			</nav>
		</header>

		<main id="main">
			<heading-anchors>
				


<h1 id="solving-mysterious-unrendered-markdown-headings">Solving mysterious unrendered markdown headings</h1>

<ul class="post-metadata">
	<li><time datetime="2021-05-10">10 May 2021</time></li>
	<li><a href="/tags/markdown/" class="post-tag">markdown</a></li>
</ul>

<p class="post-description-main"></p>

<p><em>I finally spent some time getting to the bottom of why some headings in my markdown content weren't getting rendered properly.</em></p>
<p>I've noticed over the years that occasionally the rendered version of my markdown content, in particular on GitHub (which is where most of my markdown content ends up), sometimes contains unrendered headings. Here's <a href="https://github.com/qmacro-org/test/blob/d6f348858dd5014d8b96060e4b8dd75999af431b/README.md">an example</a>:</p>
<p><img src="/images/2021/05/unrendered-heading-github.png" alt="Rendered markdown showing an unrendered heading - on GitHub"></p>
<p>The second level 2 heading &quot;Another heading level 2&quot; remains unrendered, even though everything looks fine. Why? This has bugged me for a while, but not so much as to make me stop and work out why it was happening. When it happened, I'd just go into the markdown source, rewrite the heading line, and all was fine.</p>
<p>Today I finally stopped to spend a bit of time to look into it. Turns out it's quite simple and obvious now I know what was causing it.</p>
<p>The <a href="https://www.markdownguide.org/basic-syntax/">basic syntax</a> for headings involves one or more hashes (depending on the heading level needed) followed by the heading text. There's a space that should separate the hashes and the heading text. Here's an example:</p>
<pre class="language-markdown" tabindex="0"><code class="language-markdown"><span class="token title important"><span class="token punctuation">##</span> Heading level 2</span></code></pre>
<p>What's causing that heading above not to be rendered properly? Well, it's the space. To you and me there is indeed a space between <code>##</code> and <code>Another heading level 2</code>.</p>
<p>But it's <a href="https://en.wikipedia.org/wiki/The_wrong_type_of_snow">the wrong type of space</a>.</p>
<p>Checking first that it's not something weird going on with the markdown renderer on GitHub, let's try a different rendering, in the terminal, with the excellent <a href="https://github.com/charmbracelet/glow">glow</a> tool:</p>
<p><img src="/images/2021/05/unrendered-heading-glow.png" alt="Rendered markdown showing an unrendered heading - using glow"></p>
<p>Same issue.</p>
<p>So let's dig in a little deeper, and look at the source.</p>
<p>First, let's look at the first level 2 heading, which has been rendered correctly:</p>
<pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># ~/Projects/gh/github.com/qmacro-org/test (main=)</span>
<span class="token punctuation">;</span> <span class="token function">grep</span> <span class="token string">'Heading level 2'</span> README.md <span class="token operator">|</span> od <span class="token parameter variable">-t</span> x1 <span class="token parameter variable">-c</span>
0000000    <span class="token number">23</span>  <span class="token number">23</span>  <span class="token number">20</span>  <span class="token number">48</span>  <span class="token number">65</span>  <span class="token number">61</span>  <span class="token number">64</span>  <span class="token number">69</span>  6e  <span class="token number">67</span>  <span class="token number">20</span>  6c  <span class="token number">65</span>  <span class="token number">76</span>  <span class="token number">65</span>  6c
           <span class="token comment">#   #       H   e   a   d   i   n   g       l   e   v   e   l</span>
0000020    <span class="token number">20</span>  <span class="token number">32</span>  0a
               <span class="token number">2</span>  <span class="token punctuation">\</span>n
0000023
<span class="token comment"># ~/Projects/gh/github.com/qmacro-org/test (main=)</span>
<span class="token punctuation">;</span></code></pre>
<p>Seems OK, and yes, there's the space, hex value <code>20</code>, following the two hashes (hex values <code>23</code>).</p>
<p>Now let's look at the second level 2 heading, which has not been correctly rendered;</p>
<pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token comment"># ~/Projects/gh/github.com/qmacro-org/test (main=)</span>
<span class="token punctuation">;</span> <span class="token function">grep</span> <span class="token string">'Another heading level 2'</span> README.md <span class="token operator">|</span> od <span class="token parameter variable">-t</span> x1 <span class="token parameter variable">-c</span>
0000000    <span class="token number">23</span>  <span class="token number">23</span>  c2  a0  <span class="token number">41</span>  6e  6f  <span class="token number">74</span>  <span class="token number">68</span>  <span class="token number">65</span>  <span class="token number">72</span>  <span class="token number">20</span>  <span class="token number">68</span>  <span class="token number">65</span>  <span class="token number">61</span>  <span class="token number">64</span>
           <span class="token comment">#   # 302 240   A   n   o   t   h   e   r       h   e   a   d</span>
0000020    <span class="token number">69</span>  6e  <span class="token number">67</span>  <span class="token number">20</span>  6c  <span class="token number">65</span>  <span class="token number">76</span>  <span class="token number">65</span>  6c  <span class="token number">20</span>  <span class="token number">32</span>  0a
           i   n   g       l   e   <span class="token function">v</span>   e   l       <span class="token number">2</span>  <span class="token punctuation">\</span>n
0000034
<span class="token comment"># ~/Projects/gh/github.com/qmacro-org/test (main=)</span>
<span class="token punctuation">;</span></code></pre>
<p>What the heck is that following the two hex <code>23</code> hash characters?</p>
<pre class="language-shell" tabindex="0"><code class="language-shell">0000000    <span class="token number">23</span>  <span class="token number">23</span>  c2  a0
           <span class="token comment">#   # 302 240</span></code></pre>
<p>Turns out it's a <a href="https://en.wikipedia.org/wiki/Non-breaking_space">non-breaking space</a> character. And its UTF-8 <a href="https://en.wikipedia.org/wiki/Non-breaking_space#Encodings">encoding</a>, which is what the markdown file has, is <code>c2 a0</code>.</p>
<p>So this second level 2 heading cannot be rendered as such, as the markdown cannot be recognised. Makes sense!</p>
<p>But where are these non-breaking space coming from? How do they get there?</p>
<p>Well, my daily driver during the working week is a macOS device, where it's notoriously more difficult that it should be to type a <code>#</code> character. One has to use <code>Option-3</code> (or <code>Alt-3</code>) to get it. And it turns out that after holding down <code>Option</code> to hit <code>3</code> a couple of times to introduce the <code>##</code> for a level 2 heading, my thumb is sometimes still on the <code>Option</code> key when I hit <code>space</code>.</p>
<p>And guess what - <code>Option-space</code> is how you type a non-breaking space on macOS!</p>
<p>So basically it's <strong>me</strong> that's been causing this issue - by inadvertently inserting not a space but a non-breaking space after the <code>#</code> characters introducing markdown headings.</p>



<script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async=""></script>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/blog/posts/2021/04/28/unpacking-bash-shell-tips-from-a-github-actions-workflow/">Unpacking Bash shell tips from a GitHub Actions workflow</a></li><li class="links-nextprev-next">Next →<br><a href="/blog/posts/2021/05/13/notes-on-markdown-linting-part-1/">Notes on Markdown linting - part 1</a></li>
</ul>

			</heading-anchors>
		</main>

		<!-- This page `/blog/posts/2021/05/10/solving-mysterious-unrendered-markdown-headings/` was built on 2025-12-08T20:43:24.228Z -->
		<script type="module" src="/dist/t-8sxMV3B9.js"></script>
	</body>
</html>
