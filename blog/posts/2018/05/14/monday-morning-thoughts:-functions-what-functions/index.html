<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2018/05/14/monday-morning-thoughts:-functions-what-functions/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.54fe08380532f159e78f.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Monday morning thoughts: functions - what functions? | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Monday morning thoughts: functions - what functions?"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2018/05/14/monday-morning-thoughts:-functions-what-functions/"><meta name="description" content="Monday morning thoughts: functions - what functions? 14 May 2018 | 5 min read In this post, I think about the concept of..."><meta property="og:description" content="Monday morning thoughts: functions - what functions? 14 May 2018 | 5 min read In this post, I think about the concept of..."><meta name="description" content="Monday morning thoughts: functions - what functions? 14 May 2018 | 5 min read In this post, I think about the concept of..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Monday morning thoughts: functions - what functions?</h1><div class="post__details"><time datetime="2018-05-14">14 May 2018 </time><span>| </span><span>5 min read</span></div></header><main class="post__content"><p><em>In this post, I think about the concept of functions-as-a-service, what it means, and what it's good for.</em></p><p>Serverless, cloud functions, functions-as-a-service. Three terms that we're hearing more and more about these days, particularly in the context of cloud native. One could almost think that they're a product of the cloud: the concept would probably not have come about without the cloud as an enabling platform.</p><p>While cloud functions and functions-as-a-service are pretty much interchangeable as terms (and I'll use functions-as-a-service, or FaaS, from now on), some folks like to maintain a subtle distinction between serverless and FaaS. That's fine, and they have valid reasons. With serverless, it's not that there aren't any servers - of course there are - it's that we don't have to care about them. It's similar to the concepts lower down the stack; with infrastructure-as-a-service, we don't have to care about the physical hardware upon which our virtual machines (VMs) run.</p><h2>Cloud layer granularities</h2><p>The difference with FaaS is that the granularity is finer. As you move up the stack, from infrastructure, to platform, to software, to backend, and ultimately to functions, any idea of servers at all, physically or logically, disappears. We move up from VMs that we remain responsible for (infrastructure-as-a-service), through runtimes that we have to be mindful of (platform-as-a-service), through a necessarily complex and stateful platform the intricacies of which we must understand (software-as-a-service) to what is perhaps the ultimate - the platform that we thus far have had to think about has faded away, almost in a Matrix kind of way: &quot;<a href="https://www.youtube.com/watch?v=uAXtO5dMqEI">there is no platform</a>&quot;.</p><p><img src="/images/2018/05/spoon-161122_960_720.png" alt=""></p><p>What we must think about at the FaaS level are the things that matter: what the function interface looks like, what the function does, and that the function itself is stateless. How the function is provisioned, how it runs, how it's removed, how it's scaled - well, we don't care about that.</p><p>And the most interesting part? When the functions we write aren't being invoked, it's like they don't exist. From a financial perspective, this is the underlying truth for the idea of serverless - it's a term that relates to the business model. If a function doesn't exist, what possibly could you be paying for?</p><p>Therein lies the beauty of FaaS. At least to me, it's the ultimate in compute agility. I write a relatively short function <a href="/blog/posts/2018/03/26/monday-morning-thoughts:-cloud-native/">in a simple editor</a>, test and deploy it, wire it into the event fabric, and then sit back. My account won't be charged until the function is actually invoked. I don't have to have anything running to form sockets for incoming connections, or to keep the runtime environment warm. All I must do is think in terms of functions.</p><h2>The event fabric</h2><p>What is this event fabric? Well, either by fate or by accident, or, as I like to think, by the sheer success of the protocol that powers the world's biggest and most scalable web service (the web itself), HTTP has become the universal coupling. The model of HTTP's request/response mechanism is well understood, has a beautiful and <a href="https://web.archive.org/web/20180818053638/https://progrium.com/blog/2012/11/19/from-webhooks-to-the-evented-web/">common simplicity</a> when you need simplicity, and a depth to handle complex scenarios when that's required too.</p><p>So one of the yarn types* in the event fabric is HTTP. One can think of this type having two function invocation styles. A direct invocation style, where one piece of software calls another directly. There's also an indirect invocation style, where one piece of software registers an HTTP endpoint, a callback, to be invoked at a later stage, on an event or the successful (or unsuccessful) completion of some computation. This style has a name which you may have come across - webhooks. It's a concept that was <a href="https://web.archive.org/web/20180818053638/https://progrium.com/blog/2012/11/19/from-webhooks-to-the-evented-web/">popularised by Jeff Lindsay</a>, from whom I've learned a lot.</p><p><img src="/images/2018/05/maple.jpg" alt=""></p><p>Maple Mill, Oldham</p><p>*Yes, I'm mindful of the fact that this weaving metaphor is in my DNA, growing up surrounded by a legacy of <a href="https://en.wikipedia.org/wiki/Cotton_mill">cotton mills</a> in the heart of the industrial revolution here in the north west of England, a revolution that bootstrapped world industry.</p><p>There are other types of event in the fabric beyond the straightfoward webhook. These might be platform or provider specific; an oft-quoted example is from the Lambda offering from Amazon Web Services, where a cloud function can be triggered from an activity relating to an S3 storage bucket (in the example, the function creates and stores a thumbnail image of a picture that's just arrived in a bucket). Of course, you can imagine other cloud providers having their own technical or business events. Think of all the business events that exist, and that we could hook into, that take place inside an SAP S/4HANA system.</p><p>Of course, there are also the more mundane but equally important event types based on timers. <a href="https://en.wikipedia.org/wiki/Cron">Cron</a> and other scheduling systems are alive and well. Even in Google's App Script environment you can find a timer event based scheduling system to invoke your code at certain intervals.</p><p>Beware: with timer-based events, there will come a pivot point where the cost consideration for having functions run at very frequent intervals means that perhaps you want to move back down the stack to a larger granularity of, say, a more permanent container or even small VM.</p><h2>Distributed and asynchronous</h2><p>So we have a runtime that we only pay for when in use, a set of functions that - for all practical purposes - don't exist except when they need to be invoked - and well-known standards that describe the contract against which we must design our computing logic. That's a pretty nice state of affairs. But what's it good for?</p><p>Well, consider the nature of our business computing today. We're operating in a hybrid world, with systems on-premise and in the cloud. Business processes exist across system boundaries, and across those different granular layers we considered earlier:</p><ul><li>at the IaaS level, we have traditional ABAP stack runtime VMs (lower than that if they're on premise on actual physical hosts, of course)</li><li>at the PaaS level, we have services on the SAP Cloud Platform (Workflow, Predictive, Business Rules, etc)</li><li>at the SaaS level we have Concur, SuccessFactors, Ariba and many other cloud software offerings</li></ul><p>To be able to define discrete pieces of execution, that then lie dormant until they're required, is a facility that we'll find increasingly useful in this world, where processes are distributed, and naturally asynchronous. The concept of publish-subscribe, or &quot;pubsub&quot; for short, has been around for a good while. Even I got in on the act, co-authoring a <a href="https://xmpp.org/extensions/xep-0024.html">Jabber Enhancement Proposal for pubsub in Jabber (XMPP)</a>, and building an HTTP implementation of pubsub called &quot;<a href="https://www.youtube.com/watch?v=1E_1B8TD6Kw&amp;list=PLfctWmgNyOIcbRYRdPrbjN_ZM56Kc5YTL">Coffeeshop</a>&quot; (which in a round about way caused me to write the <a href="/blog/posts/2009/09/21/a-new-rest-handler-dispatcher-for-the-icf/">Alternative Dispatcher Layer</a> - that's a story for another time).</p><p><img src="/images/2018/05/Screen-Shot-2018-05-14-at-14.07.10.png" alt=""></p><p>The ability to have relatively small pieces of code that do one thing and do it well takes from a <a href="https://en.wikipedia.org/wiki/Unix_philosophy#Do_One_Thing_and_Do_It_Well">philosophy</a> that has been proven to be solid and pretty much ubiquitous - most of the Internet runs on Linux, a flavour of Unix, these days.</p><p>I have already found uses for cloud functions, in a FaaS context, in various projects over the past year. Instead of setting up some sort of Common Gateway Interface (CGI) contraption on the back of an existing web server somewhere, I just write the code that does what I need it to do and inject it into the cloud. I don't have to own a VM, have access to a web server, and - best of all - don't have to worry about having to add configuration to that existing web server <a href="/blog/posts/2018/05/07/monday-morning-thoughts:-containers-and-silence/">without breaking anything</a>, just to get a callback to be, well, callable. Moreover, I used FaaS in the form of Google Cloud Functions in my <a href="/blog/posts/2018/01/16/discovering-scp-workflow/">Discovering SCP Workflow</a> series, writing a <a href="https://blogs.sap.com/2018/01/17/discovering-scp-workflow-service-proxy/">service proxy</a> as a cloud function.</p><p>With the natural environment for computing in our SAP ecosystem becoming more distributed and event-driven (or message-driven, gosh, that's yet another subject for another time), it makes sense that we have the right tools to control or just hook in to the flow, add enhancements and extensions, and even just write &quot;glue code&quot;, perhaps in a microservice sense, to provide the end-to-end solution.</p><p>If nothing else, the combination of a well-defined interface that's required for writing functions for an FaaS runtime, with the natural stateless nature of that runtime, will focus our minds and hopefully help us improve how we write and deliver stable and reliable software.</p><p>One function at a time.</p><hr><p>This post was brought to you by <a href="https://www.pactcoffee.com/coffees/la-secreta">Pact Coffee's La Secreta</a>, and the birdsong of an early and peaceful Monday morning.</p><hr><p>Read more posts in this series here: <a href="/tags/mondaymorningthoughts/">Monday morning thoughts</a>.</p><hr><p><a href="https://community.sap.com/t5/technology-blogs-by-sap/monday-morning-thoughts-functions-what-functions/ba-p/13365087">Originally published on SAP Community</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/sapcommunity/">#sapcommunity</a> <a href="/tags/mondaymorningthoughts/">#mondaymorningthoughts</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2018/05/21/monday-morning-thoughts:-milestones/"><span>←</span> <span>Monday morning thoughts: milestones</span> </a><a href="/blog/posts/2018/05/13/balancing-features-with-simplicity/"><span>Balancing features with simplicity</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.org" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>