<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Transferring my Amazon wishlist to AllConsuming.net</title>
		<meta name="description" content="Scripting to the rescue, as always.">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
		<link rel="icon" type="image/x-icon" href="/images/favicon.ico">

      <meta property="og:title" content="Transferring my Amazon wishlist to AllConsuming.net">
        <meta property="og:site_name" content="DJ Adams">
          <meta property="og:image" content="/images/site-image.png">
        <meta property="og:description" content="Scripting to the rescue, as always.">
        <meta property="og:url" content="https://qmacro.org/blog/posts/2003/01/25/transferring-my-amazon-wishlist-to-allconsuming-net/">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #2884d2;
	--text-color-link-active: #15b0ed;
	--text-color-link-visited: #9f4199;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden:not(:focus):not(:active) {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
/* main :first-child { */
/* 	margin-top: 0; */
/* } */

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

#skip-link {
	text-decoration: none;
	background: var(--background-color);
	color: var(--text-color);
	padding: 0.5rem 1rem;
	border: 1px solid var(--color-gray-90);
	border-radius: 2px;
}

/* Prevent visually-hidden skip link fom pushing content around when focused */
#skip-link.visually-hidden:focus {
	position: absolute;
	top: 1rem;
	left: 1rem;
	/* Ensure it is positioned on top of everything else when it is shown */
	z-index: 999;
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
	color: seagreen;
}

pre,code[class*="language-"] {
	line-height: 1.2em !important;
	font-size: 0.93em !important;
}

pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-word;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	counter-reset: start-from var(--postlist-index);
	list-style: none;
	padding: 0;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-style: italic;
}

/* may want to make the description text smaller at some stage */
.post-description-list {
	font-size: 1.0em;
}

.post-description-main {
	font-style: italic;
}

.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

blockquote {
	margin-top: 0px;
	margin-left: 0px;
	margin-bottom: 15px;
	padding-left: 15px;
	border-left: 5px solid lightgray;
}
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
.utterances {
  margin-left: inherit !important;
}</style>
		

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script>
    

	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">DJ Adams</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
					<li class="nav-item"><a href="/blog/">Blog</a></li>
					<li class="nav-item"><a href="/feed/feed.xml">Feed</a></li>
				</ul>
			</nav>
		</header>

		<main id="main">
			<heading-anchors>
				


<h1 id="transferring-my-amazon-wishlist-to-allconsuming-net">Transferring my Amazon wishlist to AllConsuming.net</h1>

<ul class="post-metadata">
	<li><time datetime="2003-01-25">25 January 2003</time></li>
</ul>

<p class="post-description-main">Scripting to the rescue, as always.</p>

<p>Now that I can <a href="/undefined/">monitor comments about books I have in my AllConsuming collection</a>, I thought it would be nice to add those books in my <a href="http://www.amazon.co.uk/exec/obidos/wishlist/3G7VX6N7NMGWM/">Amazon wishlist</a> to that AllConsuming collection so that I could see what people were saying about the books I wanted to buy.</p>
<p>So I hacked up a few scripts, and here are the results.</p>
<h2 id="getting-my-wishlist">Getting my wishlist</h2>
<p>Using <a href="http://www.twoshortplanks.com/simon/">Simon Wistow</a>‘s very useful <a href="http://search.cpan.org/author/SIMONW/WWW-Amazon-Wishlist-0.85/">WWW::Amazon::Wishlist</a>, it was a cinch to grab details of the books on my <a href="http://www.amazon.co.uk/exec/obidos/wishlist/3G7VX6N7NMGWM/">wishlist</a>. (I had to <a href="/~dj/2003/01/Wishlist.pm.diff.txt">patch</a> the module very slightly because of a problem with the user agent string not being set).</p>
<p>The script I wrote, <a href="/~dj/2003/01/wishlist">wishlist</a>, simply outputs a list of ISBN/ASINs and title/author details, like this:</p>
<pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token punctuation">[</span>dj@cicero scraps<span class="token punctuation">]</span>$ ./wishlist
0751327824 The Forgotten Arts and Crafts by John Seymour
090498205X With Ammon Wrigley <span class="token keyword">in</span> Saddleworth by Sam Seville
0672322404 Mod_perl Developer's Cookbook by Geoffrey Young, et al
0465024750 Fluid Concepts and Creative Analogies: Computer Models of <span class="token punctuation">..</span>.
0765304368 Down and Out <span class="token keyword">in</span> the Magic Kingdom by Cory Doctorow <span class="token punctuation">..</span>.</code></pre>
<h2 id="interacting-with-allconsuming">Interacting with AllConsuming</h2>
<p>While I’m sure the <a href="http://allconsuming.net/">allconsuming.net</a> site and services are going to morph as services are added and changed, I nevertheless couldn’t reist writing a very simple Perl class, <a href="/~dj/2003/01/Agent.pm">Allconsuming::Agent</a> that allows you to log in (<em>logIn()</em>) and add books to your collection (<em>addToFavouriteBooks()</em>, <em>addToCurrentlyReading()</em>). It’s very basic but does the job for now. It tries to play nice by logging you out (<em>logOut()</em>) of the site automatically when you’ve finished. It can also tell if the site knows about a certain book (<em>knowsBook()</em>) – I think AllConsuming uses <a href="http://www.amazon.com/">amazon.com</a> to look books up and so the discrepancies between that and <a href="http://www.amazon.co.uk/">www.amazon.co.uk</a>, for example, show themselves as AllConsuming’s innocent blankness with certain ISBNs.</p>
<p>Anyway, I’m prepared for the eventuality that things will change at <a href="http://allconsuming.net/">allconsuming.net</a> sooner or later, so this class won’t work forever…but it’s fine for now.</p>
<h2 id="adding-my-wishlisted-books">Adding my wishlisted books</h2>
<p>So putting this all together, I wrote a driver script, <a href="/~dj/2003/01/acadd">acadd</a>, which grabs my current reading list data from AllConsuming, and reads in a list of ISBN/ASINs that would be typically produced from a script like <a href="/~dj/2003/01/wishlist">wishlist</a>.</p>
<p>Reading through the wishlist book data, <a href="/~dj/2003/01/acadd">acadd</a> does this:</p>
<ul>
<li>checks to make sure the book isn’t in my AllConsuming collection already</li>
<li>checks that AllConsuming knows about the book</li>
<li>adds the book to my collection at AllConsuming</li>
</ul>
<p>Here’s a snippet of what actually happened when I piped the output of the one script into the other:</p>
<pre class="language-shell" tabindex="0"><code class="language-shell"><span class="token punctuation">[</span>dj@cicero scraps<span class="token punctuation">]</span>$ ./wishlist <span class="token operator">|</span> ./acadd
0751327824 The Forgotten Arts and Crafts by John Se<span class="token punctuation">..</span>. <span class="token punctuation">[</span>UNKNOWN<span class="token punctuation">]</span>
090498205X With Ammon Wrigley <span class="token keyword">in</span> Saddleworth by Sam<span class="token punctuation">..</span>. <span class="token punctuation">[</span>UNKNOWN<span class="token punctuation">]</span>
0672322404 Mod_perl Developer's Cookbook by Geoffre<span class="token punctuation">..</span>. <span class="token punctuation">[</span>HAVE<span class="token punctuation">]</span>
0465024750 Fluid Concepts and Creative Analogies: C<span class="token punctuation">..</span>. <span class="token punctuation">[</span>HAVE<span class="token punctuation">]</span>
0765304368 Down and Out <span class="token keyword">in</span> the Magic Kingdom by Cor<span class="token punctuation">..</span>. <span class="token punctuation">[</span>ADDED OK<span class="token punctuation">]</span> <span class="token punctuation">..</span>.</code></pre>
<p>Woo! <a href="http://allconsuming.net/item.cgi?isbn=0765304368">Cory’s new book</a>, appearing on my <a href="http://www.amazon.co.uk/exec/obidos/wishlist/3G7VX6N7NMGWM/">Amazon wishlist</a>, was added to my <a href="http://allconsuming.net/">allconsuming.net</a> collection. (In case you’re wondering, I am only adding books like this to ‘Currently Reading’, rather than any other collection category, temporarily, as right now only the books in this category along with the ‘Favourites’ category can be retrieved with the <a href="http://allconsuming.net/news/000012.html">SOAP API</a> – and it’s upon this API that <a href="/~dj/2003/01/booktalk">booktalk</a> relies.)</p>
<p>Anyway, it’s late, time for bed, driving to Brussels early tomorrow morning. Mmmm. Belgian beer beckons!</p>



<script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async=""></script>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/blog/posts/2003/01/22/presentations-wikis-and-site-navigation/">Presentations, Wikis, and Site Navigation</a></li><li class="links-nextprev-next">Next →<br><a href="/blog/posts/2003/01/26/the-fragility-of-retro-engineering/">The fragility of retro-engineering</a></li>
</ul>

			</heading-anchors>
		</main>

		<!-- This page `/blog/posts/2003/01/25/transferring-my-amazon-wishlist-to-allconsuming-net/` was built on 2026-01-13T13:33:33.930Z -->
		<script type="module" src="/dist/t-8sxMV3B9.js"></script>
	</body>
</html>
