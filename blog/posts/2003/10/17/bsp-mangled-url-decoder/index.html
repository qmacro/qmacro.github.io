<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2003/10/17/bsp-mangled-url-decoder/"><link rel="alternate" type="application/rss+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.4654d4542dcb045c9ba3.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>BSP - Mangled URL Decoder | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="BSP - Mangled URL Decoder"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2003/10/17/bsp-mangled-url-decoder/"><meta name="description" content="BSP - Mangled URL Decoder 17 Oct 2003 | 1 min read The BSP mangles URLs. Deep down. In BSP In-Depth: URL Mangling, Brian McKellar did a..."><meta property="og:description" content="BSP - Mangled URL Decoder 17 Oct 2003 | 1 min read The BSP mangles URLs. Deep down. In BSP In-Depth: URL Mangling, Brian McKellar did a..."><meta name="description" content="BSP - Mangled URL Decoder 17 Oct 2003 | 1 min read The BSP mangles URLs. Deep down. In BSP In-Depth: URL Mangling, Brian McKellar did a..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/talks">Talks</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>BSP - Mangled URL Decoder</h1><div class="post__details"><time datetime="2003-10-17">17 Oct 2003 </time><span>| </span><span>1 min read</span></div></header><main class="post__content"><p>The BSP mangles URLs. Deep down. In <a href="https://blogs.sap.com/2003/09/30/bsp-in-depth-url-mangling/">BSP In-Depth: URL Mangling</a>, Brian McKellar did a splendid job of both feeding hunger for information and increasing one’s appetite. He mentioned the BSP application <code>decode_url</code> which shows you what the gunk in the rewritten (mangled) URL actually is. Unfortunately, my free trial WAS system is at release 6.10 and doesn’t contain <code>decode_url</code>.</p><p>“Shame”, I thought, first of all. Then: “Great!”. A perfect excuse to have a rummage around in the BSP’s guts. I was curious as to how this particular thing worked, and spent a pleasant hour or so in my favourite tool, the trusty ABAP debugger (kudos to the debugger team at SAP time and time again!). My aim was to write my own version of <code>decode_url</code>.</p><p>I found a clue in <code>CL_BSP_RUNTIME</code> – I knew it had to be somewhere in the BSP classes, and noticed that <code>ON_CHECK_REWRITE</code> called the suspiciously named <code>CL_HTTP_UTILITY=&gt;FIELDS_TO_STRING</code>. Following the trail, I eventually landed on <code>CL_HTTP_UTILITY=&gt;STRING_TO_FIELDS</code> (well, it <em>had</em> to exist, hadn’t it ;-).</p><p>After that it was all downhill.</p><p>I created a very simple BSP page <code>decode_url.htm</code> which does the job. Not as pretty as the BSP team’s original <code>decode_url</code> I’m sure, but hey, it’s only for me.</p><p>This is what it looks like in action:</p><p><img src="/images/2003/10/decode_url.png" alt="screenshot of decode_url in a browser"></p><p>Thanks to Brian, I took a small stroll through some of the BSP’s guts, and learnt stuff on the way. I’ve always said the best way to broaden your R/3 and Basis skills is to spend an hour debugging an area that interests you, and this time was no exception. So get out your tools and off you go!</p><p><a href="https://blogs.sap.com/2003/10/17/bsp-mangled-url-decoder/">Originally published on SAP Community</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/sapcommunity/">#sapcommunity</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2003/11/02/powergen-fails-to-&#39;get&#39;-the-interweb/"><span>←</span> <span>Powergen fails to &#39;get&#39; the Interweb</span> </a><a href="/blog/posts/2003/09/29/sap-teched-collaborative-notes/"><span>SAP TechEd - Collaborative notes</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>