<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Some ramblings on simple CDS modelling with CDL</title>
		<meta name="description" content="A brief note-to-self after digging in to some simple constructs in CDS modelling.">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
		<link rel="icon" type="image/x-icon" href="/images/favicon.ico">

      <meta property="og:title" content="Some ramblings on simple CDS modelling with CDL">
        <meta property="og:site_name" content="DJ Adams">
          <meta property="og:image" content="/images/site-image.png">
        <meta property="og:description" content="A brief note-to-self after digging in to some simple constructs in CDS modelling.">
        <meta property="og:url" content="https://qmacro.org/blog/posts/2025/11/12/some-ramblings-on-simple-cds-modelling-with-cdl/">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #2884d2;
	--text-color-link-active: #15b0ed;
	--text-color-link-visited: #9f4199;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden:not(:focus):not(:active) {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
/* main :first-child { */
/* 	margin-top: 0; */
/* } */

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

#skip-link {
	text-decoration: none;
	background: var(--background-color);
	color: var(--text-color);
	padding: 0.5rem 1rem;
	border: 1px solid var(--color-gray-90);
	border-radius: 2px;
}

/* Prevent visually-hidden skip link fom pushing content around when focused */
#skip-link.visually-hidden:focus {
	position: absolute;
	top: 1rem;
	left: 1rem;
	/* Ensure it is positioned on top of everything else when it is shown */
	z-index: 999;
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
	color: seagreen;
}

pre,code[class*="language-"] {
	line-height: 1.2em !important;
	font-size: 0.93em !important;
}

pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-word;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	counter-reset: start-from var(--postlist-index);
	list-style: none;
	padding: 0;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-style: italic;
}

/* may want to make the description text smaller at some stage */
.post-description-list {
	font-size: 1.0em;
}

.post-description-main {
	font-style: italic;
}

.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

blockquote {
	margin-top: 0px;
	margin-left: 0px;
	margin-bottom: 15px;
	padding-left: 15px;
	border-left: 5px solid lightgray;
}
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
.utterances {
  margin-left: inherit !important;
}</style>
		

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script>
    

	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">DJ Adams</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
					<li class="nav-item"><a href="/blog/">Blog</a></li>
					<li class="nav-item"><a href="/feed/feed.xml">Feed</a></li>
				</ul>
			</nav>
		</header>

		<main id="main">
			<heading-anchors>
				


<h1 id="some-ramblings-on-simple-cds-modelling-with-cdl">Some ramblings on simple CDS modelling with CDL</h1>

<ul class="post-metadata">
	<li><time datetime="2025-11-12">12 November 2025</time></li>
	<li><a href="/tags/cds/" class="post-tag">cds</a>, </li>
	<li><a href="/tags/cdl/" class="post-tag">cdl</a>, </li>
	<li><a href="/tags/cap/" class="post-tag">cap</a>, </li>
	<li><a href="/tags/mixins/" class="post-tag">mixins</a></li>
</ul>

<p class="post-description-main">A brief note-to-self after digging in to some simple constructs in CDS modelling.</p>

<p>I'm taking some time to peruse the <a href="https://cap.cloud.sap/docs/cds/cdl">Conceptual Definition Language (CDL)</a> topic of the CAP documentation, and stopped at the first example in the <a href="https://cap.cloud.sap/docs/cds/cdl#keywords-identifiers">Keywords &amp; Identifiers</a> section, which piqued my interest. Let's put this in a file called <code>db/keywords-and-identifiers.cds</code>:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token keyword">namespace</span> capire.bookshop;
<span class="token using keyword">using</span> { managed, cuid } <span class="token from keyword">from</span> '@sap/cds/common';
<span class="token keyword">aspect</span> primary : managed, cuid {}

<span class="token keyword">entity</span> Books : primary {
  title  : <span class="token type builtin">String</span>;
  author : <span class="token association-composition keyword">Association to Authors</span>;
}

<span class="token keyword">entity</span> Authors : primary {
  name   : <span class="token type builtin">String</span>;
}</code></pre>
<blockquote>
<p>I have <a href="https://github.com/capire/docs/commit/2c42b724a9d6c1efadecfe400c478bbe739365d2">been involved in tweaking</a> this section, just so you know.</p>
</blockquote>
<h2 id="two-level-mixin">Two-level mixin</h2>
<p>The two-level mixin here made me pause for <a href="/blog/posts/2017/02/19/the-beauty-of-recursion-and-list-machinery/#initial-recognition">a stare</a>, and also made me think what this definition looks like once compiled into <a href="https://cap.cloud.sap/docs/cds/csn">Core Schema Notation (CSN)</a>. Let me simplify the above example as much as possible, to reduce any unnecessary noise:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token using keyword">using</span> cuid <span class="token from keyword">from</span> '@sap/cds/common';
<span class="token keyword">aspect</span> primary : cuid {}

<span class="token keyword">entity</span> Authors : primary {
  name   : <span class="token type builtin">String</span>;
}</code></pre>
<p>What do we have here?</p>
<ul>
<li>the import of <code>cuid</code> on its own (removing the need for the <code>{ ... }</code> brace construct, by the way); <code>cuid</code> is an aspect, defined (in <code>@sap/cds/common</code>) like this: <code>aspect cuid { key ID : UUID; }</code></li>
<li>the definition of another (empty) aspect <code>primary</code>, which, via the <code>:</code> <a href="https://cap.cloud.sap/docs/cds/cdl#includes">shortcut syntax</a>, is extended with the <code>cuid</code> aspect</li>
<li>the definition of an entity with a single non-key element (<code>name</code>); this entity is extended with the <code>primary</code> aspect</li>
</ul>
<h2 id="surfacing-the-common-aspect">Surfacing the common aspect</h2>
<p>In order to reduce the noise further (especially when we start to look at what this CDS model compiles to), let's surface the <code>cuid</code> aspect from <code>@sap/cds/common</code> so we won't be inundated with the rest of <code>@sap/cds/common</code> in what the compiler produces:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token keyword">aspect</span> cuid {
  <span class="token cqlkeywords keyword">key</span> ID : <span class="token type builtin">UUID</span>;
}

<span class="token keyword">aspect</span> primary : cuid {}

<span class="token keyword">entity</span> Authors : primary {
  name   : <span class="token type builtin">String</span>;
}</code></pre>
<p>Through the &quot;two generation mixin ancestry&quot;:</p>
<pre class="language-text" tabindex="0"><code class="language-text">cuid
  |
  V
primary
  |
  V
Authors</code></pre>
<p>the <code>Authors</code> entity has a primary key <code>ID</code> as well as the <code>name</code> element.</p>
<h2 id="examining-the-csn">Examining the CSN</h2>
<p>What does this look like when compiled to CSN? We'll take the YAML representation as that is a little less verbose and (arguably) easier to read than the JSON equivalent. Using:</p>
<pre class="language-bash" tabindex="0"><code class="language-bash">cds compile <span class="token parameter variable">--to</span> yaml db/keywords-and-identifiers.cds</code></pre>
<p>we get:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">definitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">cuid</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">kind</span><span class="token punctuation">:</span> aspect<span class="token punctuation">,</span> <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">primary</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">kind</span><span class="token punctuation">:</span> aspect<span class="token punctuation">,</span> <span class="token key atrule">includes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>cuid<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">Authors</span><span class="token punctuation">:</span>
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> entity
    <span class="token key atrule">includes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>primary<span class="token punctuation">]</span>
    <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token key atrule">meta</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">creator</span><span class="token punctuation">:</span> CDS Compiler v6.4.6<span class="token punctuation">,</span> <span class="token key atrule">flavor</span><span class="token punctuation">:</span> inferred<span class="token punctuation">}</span>
<span class="token key atrule">$version</span><span class="token punctuation">:</span> <span class="token number">2.0</span></code></pre>
<h2 id="imperative-vs-declarative">Imperative vs declarative</h2>
<p>CDS modelling is predominantly achieved in a declarative fashion, with one of the Domain Specific Languages (DSLs) <a href="https://cap.cloud.sap/docs/cds/">available to us</a>: CDL. But within CDL there are a small number of keywords that are, philosophically, more imperative than declarative - <code>extend</code> being one of them (<code>annotate</code><a href="#footnotes"><sup>1</sup></a> and <code>define</code> are imperative too).</p>
<p>Adding the <code>ID</code> key field to the <code>Authors</code> entity via these aspects has been done declaratively, using the <a href="https://cap.cloud.sap/docs/cds/cdl#includes">shortcut syntax</a> we examined earlier, i.e. with the <code>:</code> symbol:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token keyword">aspect</span> primary : cuid {}
<span class="token keyword">entity</span> Authors : primary { ... }</code></pre>
<p>But in fact we can achieve the same outcome using this more imperative form of extension syntax, with the <code>extend</code> keyword:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token keyword">aspect</span> primary {}

<span class="token keyword">entity</span> Authors {
  name : <span class="token type builtin">String</span>;
}

<span class="token keyword">extend</span> <span class="token keyword">aspect</span> primary with cuid;
<span class="token keyword">extend</span> <span class="token keyword">entity</span> Authors with primary;</code></pre>
<p>This results in the same logical <code>Authors</code> entity; I say &quot;logical&quot; as the compiler produces the definition with the elements in the order directly reflected in the top-to-bottom flow of the CDL, in other words, <code>name</code> followed by <code>ID</code>:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">Authors</span><span class="token punctuation">:</span>
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> entity
  <span class="token key atrule">includes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>primary<span class="token punctuation">]</span>
  <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>
<h2 id="aspects-and-types">Aspects and types</h2>
<p>So far in this simple model there are aspects and an entity. The aspects we've seen here are <a href="https://cap.cloud.sap/docs/cds/cdl#named-aspects">named</a>, which allows us to think of them as first class citizens in our model, define them ahead of time, and use them to extend multiple targets. This section is in that context of &quot;named aspects&quot;, rather than anonymous ones, which is perhaps a topic for another time.</p>
<p>Both aspects and entities represent structures (of elements), but entities differ from aspects in that they are normally manifested at the persistence layer, whereas aspects are not.</p>
<p>There is another construct available to us in CDL, and that is the <a href="https://cap.cloud.sap/docs/cds/cdl#type-definitions">type definition</a>. While aspects are possibly less familiar to developers who have not been enlightened by <a href="https://en.wikipedia.org/wiki/Aspect-oriented_programming">Aspect-oriented programming</a>, types are what you expect them to be: custom, sometimes composite, definitions of element/type pairs.</p>
<p>The example in Capire's <a href="https://cap.cloud.sap/docs/cds/cdl#type-definitions">Type Definitions</a> section has some nice examples:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token keyword">define</span> <span class="token cqlkeywords keyword">type</span> User : <span class="token type builtin">String(111)</span>;
<span class="token keyword">define</span> <span class="token cqlkeywords keyword">type</span> Amount {
  value : <span class="token type builtin">Decimal(10,3)</span>;
  currency : Currency;
}
<span class="token keyword">define</span> <span class="token cqlkeywords keyword">type</span> Currency : <span class="token association-composition keyword">Association to Currencies</span>;</code></pre>
<p>Given that types can be structures, just like aspects, can they be used to extend? The answer is a qualified &quot;yes&quot;.</p>
<p>Let's say we wanted to add some origin info to our authors. How about the use of a new <code>origin</code> aspect:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token keyword">aspect</span> cuid {
  <span class="token cqlkeywords keyword">key</span> ID : <span class="token type builtin">UUID
</span>};

<span class="token keyword">aspect</span> origin {
  countryOfBirth : <span class="token type builtin">String</span>;
}

<span class="token keyword">aspect</span> primary : cuid, origin {}

<span class="token keyword">entity</span> Authors : primary {
  name : <span class="token type builtin">String</span>;
}</code></pre>
<p>This conveys the new <code>countryOfBirth</code> element to the <code>Authors</code> entity, via the two-level mixin, as expected:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">definitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">cuid</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">kind</span><span class="token punctuation">:</span> aspect<span class="token punctuation">,</span> <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">origin</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">kind</span><span class="token punctuation">:</span> aspect<span class="token punctuation">,</span> <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">countryOfBirth</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">primary</span><span class="token punctuation">:</span>
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> aspect
    <span class="token key atrule">includes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>cuid<span class="token punctuation">,</span> origin<span class="token punctuation">]</span>
    <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token key atrule">countryOfBirth</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">Authors</span><span class="token punctuation">:</span>
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> entity
    <span class="token key atrule">includes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>primary<span class="token punctuation">]</span>
    <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token key atrule">countryOfBirth</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token key atrule">meta</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">creator</span><span class="token punctuation">:</span> CDS Compiler v6.4.6<span class="token punctuation">,</span> <span class="token key atrule">flavor</span><span class="token punctuation">:</span> inferred<span class="token punctuation">}</span>
<span class="token key atrule">$version</span><span class="token punctuation">:</span> <span class="token number">2.0</span></code></pre>
<p>What if we were to re-specify <code>origin</code> as a type?</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token keyword">aspect</span> cuid {
  <span class="token cqlkeywords keyword">key</span> ID : <span class="token type builtin">UUID
</span>};

<span class="token cqlkeywords keyword">type</span> origin {
  countryOfBirth : <span class="token type builtin">String</span>;
}

<span class="token keyword">aspect</span> primary : cuid, origin {}

<span class="token keyword">entity</span> Authors : primary {
  name : <span class="token type builtin">String</span>;
}</code></pre>
<p>While the intermediate definitions do reflect the <code>origin</code>'s &quot;kind&quot;, the end result in the entity is the same:</p>
<pre class="language-yaml" tabindex="0"><code class="language-yaml"><span class="token key atrule">definitions</span><span class="token punctuation">:</span>
  <span class="token key atrule">cuid</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">kind</span><span class="token punctuation">:</span> aspect<span class="token punctuation">,</span> <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">origin</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">kind</span><span class="token punctuation">:</span> type<span class="token punctuation">,</span> <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">countryOfBirth</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">primary</span><span class="token punctuation">:</span>
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> aspect
    <span class="token key atrule">includes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>cuid<span class="token punctuation">,</span> origin<span class="token punctuation">]</span>
    <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token key atrule">countryOfBirth</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">Authors</span><span class="token punctuation">:</span>
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> entity
    <span class="token key atrule">includes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>primary<span class="token punctuation">]</span>
    <span class="token key atrule">elements</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">ID</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> cds.UUID<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token key atrule">countryOfBirth</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">type</span><span class="token punctuation">:</span> cds.String<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token key atrule">meta</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">creator</span><span class="token punctuation">:</span> CDS Compiler v6.4.6<span class="token punctuation">,</span> <span class="token key atrule">flavor</span><span class="token punctuation">:</span> inferred<span class="token punctuation">}</span>
<span class="token key atrule">$version</span><span class="token punctuation">:</span> <span class="token number">2.0</span></code></pre>
<p>This surprised me at first, but after all, CDL is an eminently flexible language with beauty in its simplicity and flexibility.</p>
<h2 id="no-keys-in-types">No keys in types</h2>
<p>One interesting difference between types and aspects in this regard is the conveyance of key elements. If we were to decide (for the sake of illustration) that <code>countryOfBirth</code> were to be a key element, in the aspect variation:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token keyword">aspect</span> origin {
  <span class="token cqlkeywords keyword">key</span> countryOfBirth : <span class="token type builtin">String</span>;
}</code></pre>
<p>that would be fine and all would be well.</p>
<p>If we tried this in the type variation:</p>
<pre class="language-cds" tabindex="0"><code class="language-cds"><span class="token cqlkeywords keyword">type</span> origin {
  <span class="token cqlkeywords keyword">key</span> countryOfBirth : <span class="token type builtin">String</span>;
}</code></pre>
<p>then we'd get a compiler warning<a href="#footnotes"><sup>2</sup></a>:</p>
<pre class="language-log" tabindex="0"><code class="language-log"><span class="token punctuation">[</span><span class="token level warning important">WARNING</span><span class="token punctuation">]</span> db<span class="token operator">/</span>keywords<span class="token operator">-</span>and<span class="token operator">-</span>identifiers<span class="token punctuation">.</span>cds<span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">6</span><span class="token operator">:</span>
  ‘key’ is only supported for elements in an entity or an aspect
  <span class="token operator">(</span>in type<span class="token operator">:</span>“humanID”<span class="token operator">/</span>element<span class="token operator">:</span>“employeeNr”<span class="token operator">)</span></code></pre>
<p>This warning message ID is <code>def-unsupported-key</code>; you may wish to peruse the <a href="https://cap.cloud.sap/docs/cds/compiler/messages">Compiler Messages</a> topic of Capire for more fascinating insights (this particular warning is not yet listed).</p>
<p>This is only a warning, and the compiler will still (currently) honour the key element in the entity, but it doesn't feel right to use a type like this, hence the &quot;qualified yes&quot;.</p>
<p>Stopping to think about this a little, I am minded to reflect that the flexibility and simplicity of CDL is augmented by the intent conveyed by the semantics of the keywords themselves. I could imagine a version of CDL where both the <code>aspect</code> and <code>type</code> keywords were absent, replaced with a single <code>struct</code> keyword<a href="#footnotes"><sup>3</sup></a>.
But that would, for me at least, make the language less approachable, less rich in expressiveness and the ability to show intent.</p>
<p>And while one ultimate target of CDL is the machine readable equivalent (CSN), another ultimate target ... is us humans, in our endeavour to model business domains together.</p>
<h2 id="footnotes">Footnotes</h2>
<ol>
<li>It may interest you to know that <code>annotate</code> <a href="https://cap.cloud.sap/docs/cds/cdl#the-annotate-directive">is a shortcut for</a> <code>extend</code>.</li>
<li>I also get a warning in my editor thanks to CAP's language server for CDS.</li>
<li>On that note, it may interest you to read the <a href="https://cap.cloud.sap/docs/cds/csn#structured-types">Structured Types</a> section of Capire's CSN topic, where it says that &quot;<em>structured types are signified by the presence of an <code>elements</code> property</em>&quot;. Did you notice that each definition in the final YAML representation of the compiled model -- whether entity, aspect or type -- has an <code>elements</code> property?</li>
</ol>



<script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async=""></script>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/blog/posts/2025/11/11/hands-on-domain-modelling-with-caps-cds-at-ukisug-connect/">Hands-on domain modelling with CAP&#39;s CDS at UKISUG Connect</a></li><li class="links-nextprev-next">Next →<br><a href="/blog/posts/2025/12/08/a-simple-exploration-of-status-transition-flows-in-cap/">A simple exploration of status transition flows in CAP</a></li>
</ul>

			</heading-anchors>
		</main>

		<!-- This page `/blog/posts/2025/11/12/some-ramblings-on-simple-cds-modelling-with-cdl/` was built on 2026-02-02T18:08:56.579Z -->
		<script type="module" src="/dist/t-8sxMV3B9.js"></script>
	</body>
</html>
