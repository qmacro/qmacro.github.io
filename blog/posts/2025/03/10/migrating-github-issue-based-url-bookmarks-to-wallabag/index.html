<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2025/03/10/migrating-github-issue-based-url-bookmarks-to-wallabag/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.7884d8f8e9dd86c3b137.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Migrating GitHub issue based URL bookmarks to wallabag | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Migrating GitHub issue based URL bookmarks to wallabag"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2025/03/10/migrating-github-issue-based-url-bookmarks-to-wallabag/"><meta name="description" content="Migrating GitHub issue based URL bookmarks to wallabag 10 Mar 2025 | 5 min read In this post I outline how I migrated my collection of..."><meta property="og:description" content="Migrating GitHub issue based URL bookmarks to wallabag 10 Mar 2025 | 5 min read In this post I outline how I migrated my collection of..."><meta name="description" content="Migrating GitHub issue based URL bookmarks to wallabag 10 Mar 2025 | 5 min read In this post I outline how I migrated my collection of..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Migrating GitHub issue based URL bookmarks to wallabag</h1><div class="post__details"><time datetime="2025-03-10">10 Mar 2025 </time><span>| </span><span>5 min read</span></div></header><main class="post__content"><p><em>In this post I outline how I migrated my collection of reading list bookmarks, stored as issues in a GitHub repo, to wallabag which I'm now self-hosting.</em></p><p><a name="background"></a></p><h2>Background</h2><p>I use <a href="https://miniflux.app/">Miniflux</a> for managing and reading posts from blogs to which I've subscribed, and it works very well. For the ad hoc articles and posts that I come across more generally and that I've wanted to bookmark for later reading, I've been using a GitHub repo <a href="https://github.com/qmacro-org/url-notes">url-notes</a>, with a bookmarklet that I used to save an article as an issue:</p><pre class="language-javascript"><code class="language-javascript"><span class="token literal-property property">javascript</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span> 'https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>qmacro<span class="token operator">-</span>org<span class="token operator">/</span>url<span class="token operator">-</span>notes<span class="token operator">/</span>issues<span class="token operator">/</span><span class="token keyword">new</span><span class="token operator">?</span>body<span class="token operator">=</span><span class="token operator">%</span><span class="token number">27</span><span class="token operator">+</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token operator">+</span><span class="token operator">%</span><span class="token number">27</span><span class="token operator">&amp;</span>title<span class="token operator">=</span><span class="token operator">%</span><span class="token number">27</span><span class="token operator">+</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>This sets the issue title to the article's title, and sets the article's URL as the (only) content in the body of the issue.</p><p>In this solution there's also an <a href="https://github.com/qmacro-org/url-notes/blob/main/.github/workflows/toot-url-note.yml">automated mechanism</a> for tooting any notes I make on a post once I've read it and closed the issue. Here's <a href="https://hachyderm.io/deck/@qmacro/113867500376198345">an example toot</a> for the URL bookmark and notes in <a href="https://github.com/qmacro-org/url-notes/issues/552">issue 552</a>. This was a bonus feature that I wasn't going to try to reproduce in the new wallabag based solution.</p><p><a name="self-hosting"></a></p><h2>Self hosting</h2><p>I am trying to reduce my reliance on third party services and also improve my actual consumption of bookmarked articles, and after a brief search for a self-hosted bookmarking service I came across the &quot;read it later&quot; app <a href="https://doc.wallabag.org/">wallabag</a> which seemed ideal, especially as I could host it <a href="https://doc.wallabag.org/admin/installation/installation/#installation-with-docker">as a Docker container</a>.</p><p>I went for the SQLite option to keep things simple, using a Docker volume for persistency. Here's my compose file:</p><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">services</span><span class="token punctuation">:</span><br>  <span class="token key atrule">wallabag</span><span class="token punctuation">:</span><br>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> wallabag<br>    <span class="token key atrule">labels</span><span class="token punctuation">:</span><br>      <span class="token key atrule">tsdproxy.enable</span><span class="token punctuation">:</span> <span class="token string">"true"</span><br>    <span class="token key atrule">image</span><span class="token punctuation">:</span> wallabag/wallabag<br>    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped<br>    <span class="token key atrule">environment</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> SYMFONY__ENV__DOMAIN_NAME=https<span class="token punctuation">:</span>//wallabag.secret.ts.net<br>      <span class="token punctuation">-</span> SYMFONY__ENV__FOSUSER_REGISTRATION=true<br>      <span class="token punctuation">-</span> SYMFONY__ENV__FOSUSER_CONFIRMATION=false<br>      <span class="token punctuation">-</span> SYMFONY__ENV__SERVER_NAME="wallabag"<br>    <span class="token key atrule">ports</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> <span class="token string">"8060:80"</span><br>    <span class="token key atrule">volumes</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> data<span class="token punctuation">:</span>/var/www/wallabag/data<br>      <span class="token punctuation">-</span> images<span class="token punctuation">:</span>/var/www/wallabag/web/assets/images<br>    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span><br>      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD"</span><span class="token punctuation">,</span> <span class="token string">"wget"</span> <span class="token punctuation">,</span><span class="token string">"--no-verbose"</span><span class="token punctuation">,</span> <span class="token string">"--tries=1"</span><span class="token punctuation">,</span> <span class="token string">"--spider"</span><span class="token punctuation">,</span> <span class="token string">"http://localhost/api/info"</span><span class="token punctuation">]</span><br>      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 1m<br>      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 3s<br><span class="token key atrule">volumes</span><span class="token punctuation">:</span><br>  <span class="token key atrule">data</span><span class="token punctuation">:</span><br>  <span class="token key atrule">images</span><span class="token punctuation">:</span></code></pre><blockquote><p>I'm using Tailscale (it's one of two key services I install automatically on every device I set up, the other being Docker) and use the excellent <a href="https://almeidapaulopt.github.io/tsdproxy/">TSDProxy</a> to have my containers available on my tailnet and served via TLS certificates (i.e. via HTTPS).</p></blockquote><p>Some notes on the compose file:</p><ul><li>To have this container appear via HTTPS on my tailnet, I am uing the label <code>tsdproxy.enable</code></li><li>While I'm mapping wallabag's natural port 80 to 8060, TSDProxy will automatically make that 443 (i.e. the default for HTTPS) so that I don't need to specify a port in the URL when using it in the browser</li><li>The <code>DOMAIN_NAME</code> env var value needs to be the &quot;base&quot; URL for what you're going to use as it is used to construct URLs for CSS and other assets (see <a href="https://github.com/wallabag/wallabag/issues/7953#issuecomment-2708991178">my comments on this issue</a> for more info)</li><li>There's a default user <code>wallabag</code> with a default password but I wanted to use my own username; the option in the UI to register a new user is not shown by default, hence the <code>FOSUSER_REGISTRATION</code> env var here set to to <code>true</code> explicitly (I also changed the password of the default user for security reasons, via the UI, once I'd logged in)</li><li>To avoid any messing about with email server configuration, I turned off the email based new user confirmation flow with <code>FOSUSER_CONFIGURATION</code> set to <code>false</code></li><li>The <code>secret</code> part of my tailnet domain name masks the real value for security reasons</li></ul><p>After adding a few test articles, this is what my wallabag UI looked like:</p><p><img src="/images/2025/03/wallabag-screenshot.png" alt="screenshot of my wallabag UI"></p><p><a name="normal-operation"></a></p><h2>Normal operation</h2><p>Before I get to the migration notes, just a quick note on what I intend to do in in normal circumstances as I come across articles and posts I want to bookmark.</p><p>I installed the <a href="https://chromewebstore.google.com/detail/wallabagger/gbmgphmejlcoihgedabhgjdkcahacjlj?hl=en">wallabagger Chrome extension</a> and the Android app <a href="https://play.google.com/store/apps/details?id=fr.gaulupeau.apps.InThePoche">wallabag</a>, aka &quot;In The Poche&quot;. Both seem to work very well and allow me to easily save URLs to wallabag.</p><p>For both the Chrome extension and the Android app I had to create OAuth credentials as they're effectively API clients. wallabag has a very well thought out <a href="https://app.wallabag.it/api/doc/">API</a>, which is <a href="https://doc.wallabag.org/developer/api/oauth/">protected via OAuth</a>.</p><p>Here they are listed in the API clients management section of the configuration part of the UI (you can also see a third client &quot;Command line&quot; which I created for the migration work which is described next):</p><p><img src="/images/2025/03/wallabag-api-ui.png" alt="the API clients management section of the config part of the UI"></p><p><a name="migrating-existing-bookmarks"></a></p><h2>Migrating existing bookmarks</h2><p>In fact, it was the API that made it easy for me to bring across all the URLs I'd bookmarked in my existing &quot;url-notes&quot; repo based solution, specifically using the <code>POST</code> method on the <code>/api/entries</code> <a href="https://app.wallabag.it/api/doc/#post--api-entries.%7b_format%7d">API endpoint</a>.</p><p>This endpoint offers a number of parameters, the main one being <code>url</code> to specify the article's URL, but I used another two to store some context (that the entry was originally in this &quot;url-notes&quot; system):</p><ul><li><code>origin_url</code> - where I specified the &quot;url-notes&quot; repo issue URL (which contains the issue number which is what I wanted)</li><li><code>tags</code> - where I specified the tag <code>url-notes</code> to indicate where the bookmark came from</li></ul><blockquote><p>I didn't want hundreds of unique issue number tags, hence the split between these two parameters.</p></blockquote><p>You can actually see the <code>url-notes</code> tag on the first three of the items in the wallabag UI screenshot earlier, from some initial manual API call testing.</p><p>As this was going to be a one-off exercise, I didn't bother to write a permanent script, opting instead to just perform the steps on the command line using the power of the shell, trying to channel the style of the great Brian Kernighan in the awesome <a href="https://youtu.be/tc4ROCJYbm0?si=Y9qWLKN8UqXORAIm&amp;t=260">AT&amp;T Archives: The UNIX Operating System</a> video, with my legs resting on the desk and the keyboard on my lap:</p><p><img src="/images/2025/03/brian-kernighan-keyboard-on-lap.png" alt="The great Brian Kernighan"></p><p><a name="retrieving-the-url-notes-issue-based-bookmarks"></a></p><h3>Retrieving the &quot;url-notes&quot; issue based bookmarks</h3><p>I used the excellent GitHub CLI tool <a href="https://github.com/cli/cli">gh</a> to retrieve the details of the open issues, saved them and peeked at the first few to check everything was in order:</p><pre class="language-shell"><code class="language-shell">gh issue list <span class="token parameter variable">--json</span> body,url <span class="token parameter variable">--limit</span> <span class="token number">1000</span> <span class="token punctuation">\</span><br>  <span class="token operator">|</span> <span class="token function">tee</span> issues.json <span class="token punctuation">\</span><br>  <span class="token operator">|</span> jq <span class="token string">'.[:3]'</span></code></pre><p>This created <code>issues.json</code> with all entries, and also emitted:</p><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"body"</span><span class="token operator">:</span> <span class="token string">"https://secondphase.com.au/seven-reasons-sap-tech-failing/"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/qmacro-org/url-notes/issues/564"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"body"</span><span class="token operator">:</span> <span class="token string">"https://github.blog/open-source/git/working-with-submodules/"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/qmacro-org/url-notes/issues/563"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"body"</span><span class="token operator">:</span> <span class="token string">"https://piannaf.com/blog/self-hosted-twitter-archive-with-github-pages-subdomain/"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/qmacro-org/url-notes/issues/562"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><p>At this point I had everything I needed from a source data perspective.</p><p><a name="generating-an-access-token-for-the-api-calls"></a></p><h3>Generating an access token for the API calls</h3><p>As mentioned earlier, the API <a href="https://doc.wallabag.org/developer/api/oauth/">is protected via OAuth</a> and so I created a new client definition using the API clients management section of the UI, and called it &quot;Command line&quot; (you can see the entry in the screenshot earlier).</p><p>The creation gave me a client ID and client secret with which I requested an access token:</p><pre class="language-shell"><code class="language-shell"><span class="token function">curl</span> <span class="token punctuation">\</span><br>  <span class="token parameter variable">--url</span> <span class="token string">'https://wallabag.secret.ts.net/oauth/v2/token'</span> <span class="token punctuation">\</span><br>  <span class="token parameter variable">--data</span> <span class="token assign-left variable">grant_type</span><span class="token operator">=</span>password <span class="token punctuation">\</span><br>  <span class="token parameter variable">--data</span> <span class="token assign-left variable">client_id</span><span class="token operator">=</span>3_5r9nw8bucwcos<span class="token punctuation">..</span>. <span class="token punctuation">\</span><br>  <span class="token parameter variable">--data</span> <span class="token assign-left variable">client_secret</span><span class="token operator">=</span>nrn7junh0pw4sgo<span class="token punctuation">..</span>. <span class="token punctuation">\</span><br>  <span class="token parameter variable">--data</span> <span class="token assign-left variable">username</span><span class="token operator">=</span>dj <span class="token punctuation">\</span><br>  --data-urlencode <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">'supersekrit'</span></code></pre><p>This returned something like this:</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"access_token"</span><span class="token operator">:</span> <span class="token string">"N2RkM2FjZmRkM..."</span><span class="token punctuation">,</span><br>  <span class="token property">"expires_in"</span><span class="token operator">:</span> <span class="token number">3600</span><span class="token punctuation">,</span><br>  <span class="token property">"token_type"</span><span class="token operator">:</span> <span class="token string">"bearer"</span><span class="token punctuation">,</span><br>  <span class="token property">"scope"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span><br>  <span class="token property">"refresh_token"</span><span class="token operator">:</span> <span class="token string">"ODg4NjA2YTMyN2..."</span><br><span class="token punctuation">}</span></code></pre><p>The one hour validity (3600 seconds) was plenty of time but it was nice to get a refresh token too in case I needed it.</p><p><a name="feeding-in-the-bookmarks"></a></p><h3>Feeding in the bookmarks</h3><p>At this point I had everything ready, and it was just a case of looping through the bookmarks in <code>issues.json</code> and making an API call for each one, to load into wallabag:</p><pre class="language-shell"><code class="language-shell">jq <span class="token parameter variable">-r</span> <span class="token string">'.[]|[.body,.url]|@tsv'</span> issues.json <span class="token punctuation">\</span><br><span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> url origin_url<br><span class="token keyword">do</span><br>  <span class="token function">curl</span> <span class="token punctuation">\</span><br>    <span class="token parameter variable">--url</span> <span class="token string">'https://wallabag.secret.ts.net/api/entries.json'</span> <span class="token punctuation">\</span><br>    <span class="token parameter variable">--header</span> <span class="token string">'Authorization: Bearer N2RkM2FjZmRk...'</span> <span class="token punctuation">\</span><br>    <span class="token parameter variable">--data</span> <span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$url</span>"</span> <span class="token punctuation">\</span><br>    <span class="token parameter variable">--data</span> <span class="token assign-left variable">origin_url</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$origin_url</span>"</span> <span class="token punctuation">\</span><br>    <span class="token parameter variable">--data</span> <span class="token assign-left variable">tags</span><span class="token operator">=</span><span class="token string">'url-notes'</span><br>  <span class="token function">sleep</span> <span class="token number">0.5</span><br><span class="token keyword">done</span></code></pre><p>A short while later, they were all loaded, all 400+ of them:</p><p><img src="/images/2025/03/wallabag-unread-entries.png" alt="441 unread entries"></p><p><a name="tidying-up"></a></p><h3>Tidying up</h3><p>I wanted to close all the issues I migrated, which I did like this:</p><pre class="language-shell"><code class="language-shell">jq <span class="token parameter variable">-r</span> <span class="token string">'.[].url'</span> issues.json <span class="token punctuation">\</span><br><span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> issue<br><span class="token keyword">do</span><br>  gh issue close <span class="token variable">$issue</span><br>  <span class="token function">sleep</span> <span class="token number">1</span><br><span class="token keyword">done</span></code></pre><p>The <code>gh issue close</code> command accepts an issue number or URL, which is great. The output is also nice and clean, which is pleasing to look at too:</p><pre class="language-log"><code class="language-log">✓ Closed issue <span class="token operator">#</span><span class="token number">564</span> <span class="token operator">(</span>The Seven Reasons Your SAP Tech Initiatives Are Failing — Second Phase Solutions<span class="token operator">)</span><br>✓ Closed issue <span class="token operator">#</span><span class="token number">563</span> <span class="token operator">(</span>Working with submodules <span class="token operator">-</span> The GitHub Blog<span class="token operator">)</span><br>✓ Closed issue <span class="token operator">#</span><span class="token number">562</span> <span class="token operator">(</span>Self Hosting Twitter Archive on Github Pages <span class="token operator">|</span> Justin Mancinelli<span class="token operator">)</span><br><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre><blockquote><p>I could have done this in the same loop as when <a href="#feeding-in-the-bookmarks">feeding in the bookmarks</a>, dependent on the outcome of the API calls, but in the end I did it separately.</p></blockquote><h2>Wrapping up</h2><p>So far I've been very impressed with wallabag - its functionality, the support for running in a Docker container, the documentation and the API too. Now all I have to do is actually get round to reading those bookmarked articles!</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/github/">#github</a> <a href="/tags/wallabag/">#wallabag</a> <a href="/tags/self-hosting/">#self-hosting</a> <a href="/tags/curl/">#curl</a> <a href="/tags/jq/">#jq</a> <a href="/tags/oauth/">#oauth</a> <a href="/tags/apis/">#apis</a> <a href="/tags/docker/">#docker</a> <a href="/tags/tailscale/">#tailscale</a> <a href="/tags/tsdproxy/">#tsdproxy</a> <a href="/tags/gh/">#gh</a> <a href="/tags/shell/">#shell</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2025/03/21/level-up-your-cap-skills-by-learning-how-to-use-the-cds-repl/"><span>←</span> <span>Level up your CAP skills by learning how to use the cds REPL</span> </a><a href="/blog/posts/2025/02/21/tasc-notes-part-9/"><span>TASC Notes - Part 9</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.org" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>