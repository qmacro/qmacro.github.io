<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2025/04/29/array.prototype.reduce-and-the-optional-initial-value/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.54fe08380532f159e78f.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Array.prototype.reduce and the optional initial value | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Array.prototype.reduce and the optional initial value"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2025/04/29/array.prototype.reduce-and-the-optional-initial-value/"><meta name="description" content="Array.prototype.reduce and the optional initial value 29 Apr 2025 | 2 min read Today I learned about the subtlety of the optional..."><meta property="og:description" content="Array.prototype.reduce and the optional initial value 29 Apr 2025 | 2 min read Today I learned about the subtlety of the optional..."><meta name="description" content="Array.prototype.reduce and the optional initial value 29 Apr 2025 | 2 min read Today I learned about the subtlety of the optional..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Array.prototype.reduce and the optional initial value</h1><div class="post__details"><time datetime="2025-04-29">29 Apr 2025 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p><em>Today I learned about the subtlety of the <em>optional</em> <code>initialValue</code> parameter for the <code>Array</code> prototype's <code>reduce</code> method in JavaScript.</em></p><p>This is almost too trivial to write about, but I was surprised to discover the behaviour, so perhaps others will be too.</p><p>I've recently been <a href="https://www.youtube.com/playlist?list=PL6RpkC85SLQB-0sK7KSRwCc2gdtlZDIkL">exploring functional programming</a> on our Hands-on SAP Dev show and had highlighted <code>reduce</code> both in native Node.js JavaScript and in the <a href="https://ramdajs.com">Ramda</a> flavour. There are generally three parameters to a <code>reduce</code> call:</p><ul><li>the iterator function (&quot;callbackFn&quot;)</li><li>an initial value for the accumulator (&quot;initialValue&quot;)</li><li>the list of values upon which to iterate (&quot;list&quot;)</li></ul><p>The way that the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce">standard JavaScript reduce</a> works, being a method available on the <code>Array</code> prototype, is that the &quot;list&quot; is provided not as an argument explicitly, but as the instance of the <code>Array</code> on which the <code>reduce</code> method is being called; then quite often the &quot;callbackFn&quot; is passed as the first argument, and that's it - no &quot;initialValue&quot;:</p><pre class="language-javascript"><code class="language-javascript">list<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>callbackFn<span class="token punctuation">)</span></code></pre><p>The <a href="https://ramdajs.com/docs/#reduce">Ramda flavour of reduce</a> is a regular function that expects three parameters, and (even when employing <a href="https://en.wikipedia.org/wiki/Partial_application">partial application</a>) it's not really possible to omit the &quot;initialValue&quot; here:</p><pre class="language-javascript"><code class="language-javascript"><span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>callbackFn<span class="token punctuation">,</span> initialValue<span class="token punctuation">,</span> list<span class="token punctuation">)</span></code></pre><p>With <code>Array.prototype.reduce</code>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#syntax">the &quot;initialValue&quot; is optional</a>. And all this time I hadn't thought much about what that implied; I think I might have (mistakenly) assumed it will (waves hands in air) choose the appropriate starting value - but investing any amount of thinking effort here reveals that expectation to be nonsensical.</p><p>The mechanics of <code>reduce</code> are such that each item of the &quot;list&quot; is passed, in turn, to the &quot;callbackFn&quot;, along with an accumulator, which starts out being set to the &quot;initialValue&quot;. This can be illustrated with the following example:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><br><span class="token keyword">const</span> <span class="token function-variable function">myadd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> + </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br>  <span class="token keyword">return</span> x <span class="token operator">+</span> y<br><span class="token punctuation">}</span></code></pre><p>Calling <code>nums.reduce(myadd, 0)</code>, i.e. supplying an &quot;initialValue&quot;, we <a href="https://ramdajs.com/repl/?v=0.30.1#?const%20nums%20%3D%20%5B1%2C2%2C3%5D%0Aconst%20myadd%20%3D%20%28x%2C%20y%29%20%3D%3E%20%7B%20%0A%20%20console.log%28%60%24%7Bx%7D%20%2B%20%24%7By%7D%60%29%0A%20%20return%20x%20%2B%20y%0A%7D%0A%0Anums.reduce%28myadd%2C%200%29">see this</a>:</p><pre class="language-log"><code class="language-log"><span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span><br><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><br><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">3</span><br><br><span class="token number">6</span></code></pre><p>So far so good.</p><p>But calling <code>nums.reduce(myadd)</code> without an &quot;initialValue&quot;, we <a href="https://ramdajs.com/repl/?v=0.30.1#?const%20nums%20%3D%20%5B1%2C2%2C3%5D%0Aconst%20myadd%20%3D%20%28x%2C%20y%29%20%3D%3E%20%7B%20%0A%20%20console.log%28%60%24%7Bx%7D%20%2B%20%24%7By%7D%60%29%0A%20%20return%20x%20%2B%20y%0A%7D%0A%0Anums.reduce%28myadd%29">see this</a>:</p><pre class="language-log"><code class="language-log"><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><br><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">3</span><br><br><span class="token number">6</span></code></pre><p>One iteration fewer.</p><p>In other words, and as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#initialvalue">the MDN documentation states</a>, relating to the <code>accumulator</code> and <code>currentValue</code> parameters of the <code>callbackFn</code>:</p><blockquote><p>If <code>initialValue</code> is <strong>not</strong> specified, <code>accumulator</code> <strong>is initialized to the first value in the array</strong>, and <code>callbackFn</code> starts executing with the <strong>second</strong> value in the array as <code>currentValue</code>.</p></blockquote><p>(emphasis mine). This makes total sense, and is the most practical approach if <code>initialValue</code> is to be optional.</p><p>Of course, it goes without saying that this behaviour is only related to the optional nature for <code>initialValue</code> in <code>Array.prototype.reduce</code>; Ramda's <code>reduce</code> cannot exhibit this behaviour as the <code>initialValue</code> parameter is not optional, and we can <a href="https://ramdajs.com/repl/?v=0.30.1#?const%20nums%20%3D%20%5B1%2C2%2C3%5D%0Aconst%20myadd%20%3D%20%28x%2C%20y%29%20%3D%3E%20%7B%20%0A%20%20console.log%28%60%24%7Bx%7D%20%2B%20%24%7By%7D%60%29%0A%20%20return%20x%20%2B%20y%0A%7D%0Areduce%28myadd%2C%200%2C%20nums%29">see that</a>:</p><pre class="language-javascript"><code class="language-javascript"><span class="token function">reduce</span><span class="token punctuation">(</span>myadd<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">)</span></code></pre><p>emits this:</p><pre class="language-log"><code class="language-log"><span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span><br><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><br><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">3</span><br><br><span class="token number">6</span></code></pre><p>That's it! Thanks again to the authors of the excellent MDN documentation.</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/javascript/">#javascript</a> <a href="/tags/fp/">#fp</a> <a href="/tags/reduce/">#reduce</a> <a href="/tags/til/">#til</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2025/05/01/fp-function-chains-and-cap-model-loading/"><span>←</span> <span>FP, function chains and CAP model loading</span> </a><a href="/blog/posts/2025/03/24/functional-programming-resources/"><span>Functional programming resources</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.org" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>