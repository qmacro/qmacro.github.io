<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2020/04/07/terminal-tip:-truncating-cf-output/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.7884d8f8e9dd86c3b137.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Terminal Tip: truncating CF output | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Terminal Tip: truncating CF output"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2020/04/07/terminal-tip:-truncating-cf-output/"><meta name="description" content="Terminal Tip: truncating CF output 07 Apr 2020 | 2 min read I am a big fan of the terminal, and it&#39;s my preferred work environment for many..."><meta property="og:description" content="Terminal Tip: truncating CF output 07 Apr 2020 | 2 min read I am a big fan of the terminal, and it&#39;s my preferred work environment for many..."><meta name="description" content="Terminal Tip: truncating CF output 07 Apr 2020 | 2 min read I am a big fan of the terminal, and it&#39;s my preferred work environment for many..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Terminal Tip: truncating CF output</h1><div class="post__details"><time datetime="2020-04-07">07 Apr 2020 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p>I am a big fan of the terminal, and it's my preferred work environment for many reasons.</p><p>I use the Cloud Foundry CLI <code>cf</code> frequently in my work on the SAP Cloud Platform but the output options are limited, and sometimes hard to read. One example is the output from <code>cf apps</code> or <code>cf services</code> (there are short versions of these two commands, <code>cf a</code> and <code>cf s</code> respectively).</p><p>This screenshot shows some typical output from the <code>cf s</code> command:</p><p><img src="/images/2020/04/Screenshot-2020-04-07-at-09.05.18.png" alt=""></p><p>There's a lot of information and it wraps onto new lines. Most of the time my focus is on the names of the service instances, and perhaps the service &amp; plan combination they represent - the information towards the end of the line is less important to me. But it's still being output and making the entire results difficult to read.</p><p>With the use of two venerable shell commands, we can fix that.</p><p><code>tput</code> will give us information on the current terminal capabilities. Running <code>tput cols</code> returns the number of columns in the current terminal.</p><p><a href="https://en.wikipedia.org/wiki/Cut_(Unix)"><code>cut</code></a> will slice and dice data in many ways; I use it to pick out various fields from output lines, but it can also pick out ranges of characters too.</p><p>A combination of these two commands, also making use of the <a href="http://www.tldp.org/LDP/abs/html/commandsub.html">command substitution</a> technique with <code>$(...)</code> (this is the newer &amp; better version of using <code>`...`</code>backticks) gives us the ability to truncate the output so that it's a lot more readable:</p><p><img src="/images/2020/04/Screenshot-2020-04-07-at-09.06.22.png" alt=""></p><p>Here's a breakdown of the command:</p><pre class="language-shell"><code class="language-shell">cf s <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-c</span> -<span class="token variable"><span class="token variable">$(</span>tput cols<span class="token variable">)</span></span></code></pre><p>Read it like this:</p><ol><li>Run the <code>cf s</code> command</li><li>Pipe the STDOUT of that into the STDIN of the <code>cut</code> command</li><li>To the <code>cut</code> command execution, supply a value for the <code>-c</code> option which selects specific characters</li><li>Which specific characters? Well, the range (x-y) that goes from 1 (implicit) to whatever the command <code>tput cols</code> outputs.</li><li>In the case of my terminal shown in the screenshots, <code>tput cols</code> tells me there are 101 columns, so the effective value for the range given to <code>-c</code> is 1-101.</li></ol><p>We can make this useful combination into a handy function by defining a shell function, like this:</p><pre class="language-shell"><code class="language-shell"><span class="token function-name function">trunc</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">cut</span> <span class="token parameter variable">-c</span> -<span class="token variable"><span class="token variable">$(</span>tput cols<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><p>Now we can use <code>trunc</code> like this:</p><pre class="language-shell"><code class="language-shell">cf s <span class="token operator">|</span> trunc</code></pre><p>which gives us the same thing. Lovely!</p><p><img src="/images/2020/04/Screenshot-2020-04-07-at-09.07.14.png" alt=""></p><p>Share &amp; enjoy, and remember, <a href="https://twitter.com/search?q=%23TheFutureIsTerminal&amp;src=typed_query">#TheFutureIsTerminal</a>!</p><hr><p><a href="https://community.sap.com/t5/technology-blogs-by-sap/terminal-tip-truncating-cf-output/ba-p/13457577">Originally published on SAP Community</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/sapcommunity/">#sapcommunity</a> <a href="/tags/terminal/">#terminal</a> <a href="/tags/terminaltip/">#terminaltip</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2020/04/14/terminal-tip:-parsing-cf-app-logs/"><span>←</span> <span>Terminal Tip: parsing CF app logs</span> </a><a href="/blog/posts/2020/04/05/initial-pi-configuration-via-ansible/"><span>Initial Pi configuration via Ansible</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.org" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>