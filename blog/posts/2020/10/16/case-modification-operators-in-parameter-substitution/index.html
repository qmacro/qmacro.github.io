<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2020/10/16/case-modification-operators-in-parameter-substitution/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.7884d8f8e9dd86c3b137.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Case modification operators in parameter substitution | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Case modification operators in parameter substitution"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2020/10/16/case-modification-operators-in-parameter-substitution/"><meta name="description" content="Case modification operators in parameter substitution 16 Oct 2020 | 2 min read Today I learned that in addition to the usual ways of..."><meta property="og:description" content="Case modification operators in parameter substitution 16 Oct 2020 | 2 min read Today I learned that in addition to the usual ways of..."><meta name="description" content="Case modification operators in parameter substitution 16 Oct 2020 | 2 min read Today I learned that in addition to the usual ways of..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Case modification operators in parameter substitution</h1><div class="post__details"><time datetime="2020-10-16">16 Oct 2020 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p><em>Today I learned that in addition to the usual ways of uppercasing strings, Bash 4 brought the addition of case modification operators to the parameter substitution family.</em></p><p>Spending a pleasant coffee on my day off today I looked at tackling another challenge in <a href="https://exercism.io/tracks/bash">Exercism's bash track</a> - <a href="https://exercism.io/tracks/bash/exercises/acronym/solutions/e70a7282d2fb4856bbeb1c2ae745d3c4">Acronym</a>. The requirement included ensuring that any generated acronym (I guess these might actually be initialisms, but that's a discussion for another time) was completely in uppercase, regardless of the source.</p><p>In my solution, I resorted to the usual use of <code>tr</code>, like this:</p><pre class="language-bash"><code class="language-bash"><span class="token function">tr</span> <span class="token string">'[:lower:]'</span> <span class="token string">'[:upper:]'</span></code></pre><p>All good. I like to peruse others' solutions, to learn from how they might have tackled the same challenge, and I came across something that looked rather odd at first, as I'd never seen it before. It was a solution by TopKech and looks like this:</p><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">OUTPUT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s/$/ /'</span> <span class="token parameter variable">-e</span> <span class="token string">'s/\([^ \-]\)[^ \-]*[ \-]/\1/g'</span> <span class="token parameter variable">-e</span> <span class="token string">'s/^ *//'</span><span class="token variable">)</span></span><br><span class="token builtin class-name">echo</span> <span class="token variable">${OUTPUT<span class="token operator">^^</span>}</span></code></pre><p>What's that <code>^^</code> in the second line?</p><p>Turns out that it's a case modification operator, within a parameter substitution context. What's more, it is &quot;relatively&quot; new, in that it was introduced with <a href="https://tldp.org/LDP/abs/html/bashver4.html">version 4 of Bash</a>. I say &quot;relatively&quot;, as version 4 was introduced way back in 2009; but having been a macOS user for a while, I'd been stuck with version 3 due to Apple's issues with the GPL v3 licence (prompting them not to ship any version beyond 3, and even go so far as to make <code>zsh</code> the default shell on newer versions of the OS).</p><p>Version 4 of Bash came with lots of wonderful stuff, including 4 separate case modification operators, that are illustrated in the <a href="https://tldp.org/LDP/abs/html/bashver4.html">Advanced Bash Scripting Guide - Chapter 37. Bash, versions 2, 3, and 4</a> and can be summarised thus:</p><p>|-|-| |<code>${var^}</code>|Make first char of <code>var</code> value uppercase| |<code>${var^^}</code>|Make all chars of <code>var</code> value uppercase| |<code>${var,}</code>|Make first char of <code>var</code> value lowercase| |<code>${var,,}</code>|Make all chars of <code>var</code> value lowercase|</p><p>I didn't know that, but <a href="/tweets/qmacro/status/1317046383950659584/">I do now!</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/autodidactics/">#autodidactics</a> <a href="/tags/shell/">#shell</a> <a href="/tags/exercism/">#exercism</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2020/11/01/the-subtle-art-of-quoting-newline-characters/"><span>←</span> <span>The subtle art of quoting newline characters</span> </a><a href="/blog/posts/2020/10/11/middollar-and-shell-parameter-expansion/"><span>MID$ and shell parameter expansion</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.bsky.social" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>