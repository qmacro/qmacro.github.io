<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2023/11/13/tmux-plugin-development-with-a-local-repo/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.4654d4542dcb045c9ba3.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Tmux plugin development with a local repo | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Tmux plugin development with a local repo"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2023/11/13/tmux-plugin-development-with-a-local-repo/"><meta name="description" content="Tmux plugin development with a local repo 13 Nov 2023 | 2 min read This weekend I wrote a simple Tmux plugin, tmux-focus-status, mostly to..."><meta property="og:description" content="Tmux plugin development with a local repo 13 Nov 2023 | 2 min read This weekend I wrote a simple Tmux plugin, tmux-focus-status, mostly to..."><meta name="description" content="Tmux plugin development with a local repo 13 Nov 2023 | 2 min read This weekend I wrote a simple Tmux plugin, tmux-focus-status, mostly to..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/talks">Talks</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Tmux plugin development with a local repo</h1><div class="post__details"><time datetime="2023-11-13">13 Nov 2023 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p>This weekend I wrote a simple Tmux plugin, <a href="https://github.com/qmacro/tmux-focus-status">tmux-focus-status</a>, mostly to learn how to do it, but also to modularise my Tmux configuration (perhaps organising chunks of configuration into plugins is a little extreme, ah well).</p><p>The way you add a plugin to your Tmux configuration requires you to specify a remote git repository, such as on GitHub or BitBucket. This would mean I'd have to push my fledgling plugin to GitHub to test it out in the context of Tmux itself, but I wanted to keep everything local while I developed it. So I used a bare repository on the local filesystem. Here's how.</p><p>The plugins are managed by <a href="https://github.com/tmux-plugins/tpm">Tmux Plugin Manager</a> (TPM) and there's a great document on how to create a plugin here: <a href="https://github.com/tmux-plugins/tpm/blob/master/docs/how_to_create_plugin.md">How to create Tmux plugins</a>.</p><p>While the plugin itself is essentially a script that uses <code>tmux</code> commands, including the plugin into your configuration and testing the installation and use in a real session means that you have to have the plugin code in a remote repository. The examples <a href="https://github.com/tmux-plugins/tpm#installation">in the main TPM README imply this</a>:</p><pre class="language-text"><code class="language-text">set -g @plugin 'github_username/plugin_name'<br>set -g @plugin 'github_username/plugin_name#branch'<br>set -g @plugin 'git@github.com:user/plugin'<br>set -g @plugin 'git@bitbucket.com:user/plugin'</code></pre><p>Nothing wrong with that at all, but I wanted to get the plugin right before pushing it anywhere like GitHub. So I remembered that you can initialise a repository with the <code>--bare</code> option (see the <a href="https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-init">&quot;Bare Repositories&quot; section in this document</a>), and this will effectively create a shared repository that can be used as a remote.</p><p>I was developing the plugin in a directory called:</p><pre class="language-text"><code class="language-text">~/work/scratch/tmux-focus-status/</code></pre><p>and had run <code>git init</code> in there, and committed my work.</p><p>I then created a bare repository with the <code>--bare</code> option, like this:</p><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">cd</span> ~/work/remotes/<br><span class="token function">git</span> init <span class="token parameter variable">--bare</span> tmux-focus-status.git</code></pre><blockquote><p>The convention is to add the <code>.git</code> ending to repositories initialised like this.</p></blockquote><p>Then I set up this location as a remote in my plugin directory:</p><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">cd</span> ~/work/scratch/tmux-focus-status/<br><span class="token function">git</span> remote <span class="token function">add</span> <span class="token builtin class-name">local</span> ~/work/remotes/tmux-focus-status.git</code></pre><blockquote><p>Calling the remote <code>local</code> might seem a little counter-intuitive, but it works for my brain.</p></blockquote><p>Having pushed the work to that remote:</p><pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">cd</span> ~/work/scratch/tmux-focus-status/<br><span class="token function">git</span> push <span class="token builtin class-name">local</span> main</code></pre><p>I could then reference that local filesystem remote in my Tmux configuration, alongside my other plugin lines, like this:</p><pre class="language-text"><code class="language-text">set -g @plugin 'tmux-plugins/tpm'<br>set -g @plugin 'tmux-plugins/tmux-sensible'<br>set -g @plugin 'christoomey/vim-tmux-navigator'<br>set -g @plugin '/root/work/remotes/tmux-focus-status.git'</code></pre><blockquote><p>I was doing this in a temporary dev container hence the <code>/root</code> home directory.</p></blockquote><p>And on invoking the TPM &quot;install&quot; function (with <code>&lt;prefix&gt; I</code>, see the <a href="https://github.com/tmux-plugins/tpm#key-bindings">keybindings</a> info), the plugin was successfully installed:</p><pre class="language-text"><code class="language-text">Already installed "tpm"<br>Already installed "tmux-sensible"<br>Already installed "vim-tmux-navigator"<br>Installing "tmux-focus-status"<br>  "tmux-focus-status" download success<br><br>TMUX environment reloaded.<br><br>Done, press ESCAPE to continue.</code></pre><p>Excellent!</p><p>Using local filesystem based remotes is also nicely summarised in <a href="https://thehorrors.org.uk/snippets/git-local-filesystem-remotes/">How to use local filesystem remotes with git</a> which I found helpful.</p><p>Note: You can also just clone the repo from the directory it's in, but it feels nicer and more organised to bridge this via a &quot;real&quot; git remote connection. Thanks to my son Joseph for pointing this out :-)</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/tmux/">#tmux</a> <a href="/tags/git/">#git</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2023/12/20/from-twitter-to-mastodon/"><span>←</span> <span>From Twitter to Mastodon</span> </a><a href="/blog/posts/2023/11/10/til-two-tmux-plugin-manager-features/"><span>TIL - Two Tmux Plugin Manager features</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>