<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2013/01/11/jump-to-shell-workset-item-from-url/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.bed7db4098e5e4fe9224.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Jump to Shell Workset Item from URL | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Jump to Shell Workset Item from URL"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2013/01/11/jump-to-shell-workset-item-from-url/"><meta name="description" content="Jump to Shell Workset Item from URL 11 Jan 2013 | 2 min read During SAP TechEd 2012 I attended CD163 &amp;quot;SAP HANA - Application Services..."><meta property="og:description" content="Jump to Shell Workset Item from URL 11 Jan 2013 | 2 min read During SAP TechEd 2012 I attended CD163 &amp;quot;SAP HANA - Application Services..."><meta name="description" content="Jump to Shell Workset Item from URL 11 Jan 2013 | 2 min read During SAP TechEd 2012 I attended CD163 &amp;quot;SAP HANA - Application Services..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Jump to Shell Workset Item from URL</h1><div class="post__details"><time datetime="2013-01-11">11 Jan 2013 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p>During SAP TechEd 2012 I attended CD163 &quot;SAP HANA - Application Services Basics&quot; which really helped firm up my knowledge of XS, thanks to the great presentation and exercises. What was interesting was that not only was SAPUI5 used for the UI components of the demos and exercises, but even the code snippets that the attendees would have to type in were made available to copy-n-paste, via a simple SAPUI5 Shell interface.</p><p>On reviewing the exercise text today, I noticed this bit:</p><p><img src="/images/2013/01/urlsub2_173826.png" alt=""></p><p>The URL that pointed to the SAPUI5 Shell that contained the code to copy-n-paste had a query string in it, and that sub=3.1 caused the browser to go straight to a subitem in the Shell's workset item collection:</p><p><img src="/images/2013/01/sub3_2_173827.png" alt=""></p><p>(please ignore the 256-colour quality of that shot)</p><p>I thought that was a nice touch, and dug around to see what they'd done. I was pretty certain I hadn't seen that as a feature described in the official and comprehensive SAPUI5 docu, so was curious.</p><p>What they'd done is added a small function to parse out the value of the &quot;sub&quot; parameter in the query string, and set the selected workset item accordingly. Here's that small function, <code>getURLParameter</code>:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getURLParameter</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">decodeURI</span><span class="token punctuation">(</span><br>        <span class="token punctuation">(</span><span class="token function">RegExp</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> <span class="token string">'(.+?)(&amp;|$)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>(In case you're wondering, the <code>||[,null]</code> bit towards the end just makes sure there's no exception when the requested parameter isn't found by the regex).</p><p>The workset items were defined in the Shell object like this:</p><pre class="language-javascript"><code class="language-javascript">oController<span class="token punctuation">.</span>oShell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>Shell</span><span class="token punctuation">(</span><span class="token string">"myShell"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>  <span class="token literal-property property">appIcon</span> <span class="token operator">:</span> <span class="token string">"./images/sap_18.png"</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">appIconTooltip</span> <span class="token operator">:</span> <span class="token string">"SAP"</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">appTitle</span> <span class="token operator">:</span> <span class="token string">"CD163 Exercise Templates"</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">showInspectorTool</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">showFeederTool</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">showSearchTool</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">content</span><span class="token operator">:</span> html21<span class="token punctuation">,</span><br>  <span class="token literal-property property">worksetItems</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>NavigationItem</span><span class="token punctuation">(</span><span class="token string">"NI_2″,{key:"</span>ni_2″<span class="token punctuation">,</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">"Exercise 2"</span><span class="token punctuation">,</span> <span class="token literal-property property">subItems</span><span class="token operator">:</span><span class="token punctuation">[</span><br>    <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>NavigationItem</span><span class="token punctuation">(</span><span class="token string">"NI_2_1″,{key:"</span>ni_2_1″<span class="token punctuation">,</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">"2.1 Hello World"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>NavigationItem</span><span class="token punctuation">(</span><span class="token string">"NI_3″,{key:"</span>ni_3″<span class="token punctuation">,</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">"Exercise 3"</span><span class="token punctuation">,</span> <span class="token literal-property property">subItems</span><span class="token operator">:</span><span class="token punctuation">[</span><br>      <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>NavigationItem</span><span class="token punctuation">(</span><span class="token string">"NI_3_1″,{key:"</span>ni_3_1″<span class="token punctuation">,</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">"3.1 Simple OData"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">[</span>…<span class="token punctuation">]</span></code></pre><p>and the requested workset item was set as selected, with the corresponding content, in a large switch statement like this:</p><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token function">getURLParameter</span><span class="token punctuation">(</span><span class="token string">"sub"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">case</span> <span class="token string">"2.1"</span><span class="token operator">:</span><br>      oController<span class="token punctuation">.</span>oShell<span class="token punctuation">.</span><span class="token function">setSelectedWorksetItem</span><span class="token punctuation">(</span><span class="token string">"NI_2_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      oController<span class="token punctuation">.</span>oShell<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>html21<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">break</span><span class="token punctuation">;</span><br>    <span class="token keyword">case</span> <span class="token string">"3.1"</span><span class="token operator">:</span><br>      oController<span class="token punctuation">.</span>oShell<span class="token punctuation">.</span><span class="token function">setSelectedWorksetItem</span><span class="token punctuation">(</span><span class="token string">"NI_3_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      oController<span class="token punctuation">.</span>oShell<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>html31<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">break</span><span class="token punctuation">;</span><br>    <span class="token keyword">case</span> <span class="token string">"3.2"</span><span class="token operator">:</span><br>      oController<span class="token punctuation">.</span>oShell<span class="token punctuation">.</span><span class="token function">setSelectedWorksetItem</span><span class="token punctuation">(</span><span class="token string">"NI_3_2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      oController<span class="token punctuation">.</span>oShell<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>html32<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">break</span><span class="token punctuation">;</span><br>    <span class="token punctuation">[</span>…<span class="token punctuation">]</span></code></pre><p>Nice effect.</p><p>I wanted to confirm this for myself, and try to use fewer lines of code than SAP had done, as it looked a little bit verbose. So I wrote a little standalone snippet, available in my Github repo '<a href="https://github.com/qmacro/sapui5bin">sapui5bin</a>'. The snippet is <a href="https://github.com/qmacro/sapui5bin/blob/master/SinglePageExamples/shell_wsi_nav.html">https://github.com/qmacro/sapui5bin/blob/master/SinglePageExamples/shell_wsi_nav.html</a> and defines a Shell with a few items / subitems like this:</p><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">var</span> oShell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>Shell</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <br>      <span class="token literal-property property">appTitle</span><span class="token operator">:</span> <span class="token string">"Shell WorksetItem Navigation"</span><span class="token punctuation">,</span><br>      <span class="token literal-property property">worksetItems</span><span class="token operator">:</span><span class="token punctuation">[</span><br>        <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>NavigationItem</span><span class="token punctuation">(</span><span class="token string">"id_wsiA"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">"wsiA"</span><span class="token punctuation">,</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token literal-property property">subItems</span><span class="token operator">:</span><span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>NavigationItem</span><span class="token punctuation">(</span><span class="token string">"id_wsiB"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">"wsiB"</span><span class="token punctuation">,</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token literal-property property">subItems</span><span class="token operator">:</span><span class="token punctuation">[</span><br>          <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>NavigationItem</span><span class="token punctuation">(</span><span class="token string">"id_wsiB.1″, {key:"</span>wsiB<span class="token punctuation">.</span><span class="token number">1</span>″<span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">"B.1"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>          <span class="token keyword">new</span> <span class="token class-name">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>ux3<span class="token punctuation">.</span>NavigationItem</span><span class="token punctuation">(</span><span class="token string">"id_wsiB.2″, {key:"</span>wsiB<span class="token punctuation">.</span><span class="token number">2</span>″<span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">"B.2"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token punctuation">]</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Note that my convention is to name the IDs the same as the keys, but with a prefix of <code>id_</code>.</p><p>I used the same <code>getUrlParameter()</code> function, but then used a simpler method to dynamically set the selected workitem and content based on the value of the <code>sub</code> query parameter, like this:</p><pre class="language-javascript"><code class="language-javascript">  <span class="token keyword">var</span> subId <span class="token operator">=</span> <span class="token string">"id_wsi"</span> <span class="token operator">+</span> <span class="token function">getUrlParameter</span><span class="token punctuation">(</span><span class="token string">"sub"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> wsi <span class="token operator">=</span> sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">getCore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">byId</span><span class="token punctuation">(</span>subId<span class="token punctuation">)</span> <span class="token operator">?</span> subId <span class="token operator">:</span> <span class="token string">'id_wsiA'</span><span class="token punctuation">;</span><br>    oShell<span class="token punctuation">.</span><span class="token function">setSelectedWorksetItem</span><span class="token punctuation">(</span>wsi<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    oShell<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token function">getContent</span><span class="token punctuation">(</span>wsi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In the second of these 4 lines, I'm just making sure I handle the case where the user hacks the URL query string to specify a sub item that doesn't exist: I make sure that I can find an element with the ID specified (knowing that if it begins <code>id_wsi</code> then it's a workset item) and defaulting to the first workset item if I can't.</p><p><img src="/images/2013/01/b2_173831.png" alt=""></p><p>And that's it. Not a huge deal, but I was intrigued, and thought you might be too. For more info, see the complete snippet <a href="https://github.com/qmacro/sapui5bin/blob/master/SinglePageExamples/shell_wsi_nav.html">shell_wsi_nav.html</a>.</p><p>Share and enjoy!</p><p><a href="https://blogs.sap.com/2013/01/11/jump-to-shell/">Originally published on SAP Community</a></p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/sapcommunity/">#sapcommunity</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2013/01/30/public-github-repo-sapui5bin-available/"><span>←</span> <span>Public Github repo sapui5bin available</span> </a><a href="/blog/posts/2013/01/02/30-days-challenges/"><span>30 Days Challenges</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>