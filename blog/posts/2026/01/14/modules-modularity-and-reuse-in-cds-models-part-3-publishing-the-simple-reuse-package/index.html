<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Modules, modularity &amp; reuse in CDS models - part 3 - publishing the simple reuse package</title>
		<meta name="description" content="Taking the simple passive reuse package created in part 2, I now publish it to the NPM registry which is part of GitHub Packages.">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
		<link rel="icon" type="image/x-icon" href="/images/favicon.ico">

      <meta property="og:title" content="Modules, modularity &amp; reuse in CDS models - part 3 - publishing the simple reuse package">
        <meta property="og:site_name" content="DJ Adams">
          <meta property="og:image" content="/images/site-image.png">
        <meta property="og:description" content="Taking the simple passive reuse package created in part 2, I now publish it to the NPM registry which is part of GitHub Packages.">
        <meta property="og:url" content="https://qmacro.org/blog/posts/2026/01/14/modules-modularity-and-reuse-in-cds-models-part-3-publishing-the-simple-reuse-package/">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #2884d2;
	--text-color-link-active: #15b0ed;
	--text-color-link-visited: #9f4199;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden:not(:focus):not(:active) {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
/* main :first-child { */
/* 	margin-top: 0; */
/* } */

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

#skip-link {
	text-decoration: none;
	background: var(--background-color);
	color: var(--text-color);
	padding: 0.5rem 1rem;
	border: 1px solid var(--color-gray-90);
	border-radius: 2px;
}

/* Prevent visually-hidden skip link fom pushing content around when focused */
#skip-link.visually-hidden:focus {
	position: absolute;
	top: 1rem;
	left: 1rem;
	/* Ensure it is positioned on top of everything else when it is shown */
	z-index: 999;
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
	color: seagreen;
}

pre,code[class*="language-"] {
	line-height: 1.2em !important;
	font-size: 0.93em !important;
}

pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-word;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	counter-reset: start-from var(--postlist-index);
	list-style: none;
	padding: 0;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-style: italic;
}

/* may want to make the description text smaller at some stage */
.post-description-list {
	font-size: 1.0em;
}

.post-description-main {
	font-style: italic;
}

.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

blockquote {
	margin-top: 0px;
	margin-left: 0px;
	margin-bottom: 15px;
	padding-left: 15px;
	border-left: 5px solid lightgray;
}
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
.utterances {
  margin-left: inherit !important;
}</style>
		

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script>
    

	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">DJ Adams</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
					<li class="nav-item"><a href="/blog/">Blog</a></li>
					<li class="nav-item"><a href="/feed/feed.xml">Feed</a></li>
				</ul>
			</nav>
		</header>

		<main id="main">
			<heading-anchors>
				


<h1 id="modules-modularity-and-reuse-in-cds-models-part-3-publishing-the-simple-reuse-package">Modules, modularity &amp; reuse in CDS models - part 3 - publishing the simple reuse package</h1>

<ul class="post-metadata">
	<li><time datetime="2026-01-14">14 January 2026</time></li>
	<li><a href="/tags/modularity/" class="post-tag">modularity</a>, </li>
	<li><a href="/tags/cds/" class="post-tag">cds</a>, </li>
	<li><a href="/tags/cap/" class="post-tag">cap</a>, </li>
	<li><a href="/tags/npm/" class="post-tag">npm</a>, </li>
	<li><a href="/tags/reuse/" class="post-tag">reuse</a>, </li>
	<li><a href="/tags/gh/" class="post-tag">gh</a></li>
</ul>

<p class="post-description-main">Taking the simple passive reuse package created in part 2, I now publish it to the NPM registry which is part of GitHub Packages.</p>

<p>(Get to all the parts in this series via the <a href="/blog/posts/2026/01/01/modules-modularity-and-reuse-in-cds-models/">series
post</a>.)</p>
<p>What we have from <a href="/blog/posts/2026/01/07/modules-modularity-and-reuse-in-cds-models-part-2-creating-a-simple-reuse-package/">part
2</a>
is a simple project <code>myproj/</code> which relies upon a simple reuse package
<code>@qmacro/common</code>. That reuse package currently exists only within a workspace
within the <code>myproj/</code> project. In order to be able to use it elsewhere and share
the reuse package with others, we need to publish it to a public NPM registry.</p>
<p>One possibility would be the standard NPM registry at <a href="https://www.npmjs.org">https://www.npmjs.org</a>.
Another is the NPM registry which is part of <a href="https://docs.github.com/en/packages">GitHub
Packages</a><a href="#footnotes"><sup>1</sup></a>.
That's what I'll use here. It makes sense also to share the source too, which I
can do in parallel via a public repo in my <a href="https://github.com/qmacro/">user
space</a> on GitHub, and I'll link the NPM package to
that repo as well.</p>
<p>What we want to end up with is a setup that follows the
<a href="https://github.com/capire/common">capire/common</a> repo and package:</p>
<p><img src="/images/2026/01/capire-common.png" alt="The capire/common repo"></p>
<h2 id="sharing-the-reuse-package-source">Sharing the reuse package source</h2>
<p>First, let's share the source of <code>@qmacro/common</code>. Clearly the content is not
earth-shattering, but serves to illustrate the pattern as a
passive<a href="#footnotes"><sup>2</sup></a> reuse package.</p>
<p>As a reminder, here's what the entire project and workspace-enclosed reuse
package looks like (minus the <code>node_modules/</code> directory, to keep things brief):</p>
<pre class="language-log" tabindex="0"><code class="language-log"><span class="token punctuation">.</span>
‚îú‚îÄ‚îÄ <span class="token domain constant">package-lock.json</span>
‚îú‚îÄ‚îÄ <span class="token domain constant">package.json</span>
‚îú‚îÄ‚îÄ packages
‚îÇ   ‚îî‚îÄ‚îÄ <span class="token operator">@</span>qmacro
‚îÇ       ‚îî‚îÄ‚îÄ common
‚îÇ           ‚îú‚îÄ‚îÄ <span class="token domain constant">index.cds</span>
‚îÇ           ‚îî‚îÄ‚îÄ <span class="token domain constant">package.json</span>
‚îî‚îÄ‚îÄ <span class="token domain constant">services.cds</span></code></pre>
<p>It's the content of <code>packages/@qmacro/common/</code> that we want to share, and we
can do that in the normal way, by introducing git-based source code control,
then creating a repo on GitHub based on that git-controlled source.</p>
<p>While we can also add the main <code>myproj/</code> project source to git-based source
code control, we won't do that now. Whenever we do it, we also want to remember
to exclude the content in <code>packages/</code> as we want to share and manage the
packages source lifecycle separately.</p>
<h3 id="moving-to-the-appropriate-place">Moving to the appropriate place</h3>
<p>So first of all, starting from within the main project's root, i.e. <code>myproj/</code>,
let's move into the reuse package's directory:</p>
<pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token builtin class-name">cd</span> packages/@qmacro/common/</code></pre>
<h3 id="adding-a-readme">Adding a README</h3>
<p>Every public repo on GitHub should have a README, even one as simple as this.
Let's just add one now:</p>
<pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">></span>README.md</span>
# @qmacro/common

See the series post
[Modules, modularity &amp; reuse in CDS models](https://qmacro.org/blog/posts/2026/01/01/modules-modularity-and-reuse-in-cds-models/)
for the background to this simple passive CDS model reuse package example.
EOF</span></code></pre>
<h3 id="setting-up-the-repo">Setting up the repo</h3>
<p>Now, within <code>packages/@qmacro/common/</code>, let's set up the git-based source code
control:</p>
<pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token function">git</span> init <span class="token punctuation">\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> <span class="token punctuation">\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'initial commit'</span></code></pre>
<p>This emits:</p>
<pre class="language-log" tabindex="0"><code class="language-log">Initialized empty Git repository in myproj<span class="token operator">/</span>packages<span class="token operator">/</span><span class="token operator">@</span>qmacro<span class="token operator">/</span>common<span class="token operator">/</span><span class="token punctuation">.</span>git<span class="token operator">/</span>
<span class="token punctuation">[</span>main <span class="token operator">(</span>root<span class="token operator">-</span>commit<span class="token operator">)</span> <span class="token number">37f0091</span><span class="token punctuation">]</span> initial commit
 <span class="token number">3</span> files changed<span class="token punctuation">,</span> <span class="token number">21</span> insertions<span class="token operator">(</span><span class="token operator">+</span><span class="token operator">)</span>
 create mode <span class="token number">100644</span> README<span class="token punctuation">.</span>md
 create mode <span class="token number">100644</span> <span class="token domain constant">index.cds</span>
 create mode <span class="token number">100644</span> <span class="token domain constant">package.json</span></code></pre>
<h3 id="pushing-the-repo-to-github">Pushing the repo to GitHub</h3>
<p>Now let's share this with others by pushing it to GitHub, specifically as <a href="https://github.com/qmacro?tab=repositories">a
new repo in my user space</a>. I'm a
<a href="/tags/gh/">happy user</a> of the excellent GitHub CLI
<a href="https://cli.github.com/">gh</a>, so let's use that
here<a href="#footnotes"><sup>3</sup></a>:</p>
<pre class="language-bash" tabindex="0"><code class="language-bash">gh repo create common <span class="token punctuation">\</span>
  <span class="token parameter variable">--description</span> <span class="token string">"Simple passive CDS model reuse package example"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--source</span> <span class="token builtin class-name">.</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--public</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--push</span></code></pre>
<p>This emits:</p>
<pre class="language-log" tabindex="0"><code class="language-log">‚úì Created repository qmacro<span class="token operator">/</span>common on GitHub
‚úì Added remote <span class="token url">https://github.com/qmacro/common.git</span>
<span class="token property">Enumerating objects:</span> <span class="token number">5</span><span class="token punctuation">,</span> done<span class="token punctuation">.</span>
<span class="token property">Counting objects:</span> <span class="token number">100</span><span class="token operator">%</span> <span class="token operator">(</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">)</span><span class="token punctuation">,</span> done<span class="token punctuation">.</span>
Delta compression using up to <span class="token number">8</span> threads
<span class="token property">Compressing objects:</span> <span class="token number">100</span><span class="token operator">%</span> <span class="token operator">(</span><span class="token number">4</span><span class="token operator">/</span><span class="token number">4</span><span class="token operator">)</span><span class="token punctuation">,</span> done<span class="token punctuation">.</span>
<span class="token property">Writing objects:</span> <span class="token number">100</span><span class="token operator">%</span> <span class="token operator">(</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">)</span><span class="token punctuation">,</span> <span class="token number">686</span> bytes <span class="token operator">|</span> <span class="token number">686.00</span> KiB<span class="token operator">/</span>s<span class="token punctuation">,</span> done<span class="token punctuation">.</span>
Total <span class="token number">5</span> <span class="token operator">(</span>delta <span class="token number">0</span><span class="token operator">)</span><span class="token punctuation">,</span> reused <span class="token number">0</span> <span class="token operator">(</span>delta <span class="token number">0</span><span class="token operator">)</span><span class="token punctuation">,</span> pack<span class="token operator">-</span>reused <span class="token number">0</span>
To <span class="token url">https://github.com/qmacro/common.git</span>
 <span class="token operator">*</span> <span class="token punctuation">[</span>new branch<span class="token punctuation">]</span>      HEAD <span class="token operator">-</span><span class="token operator">></span> main
branch <span class="token string">'main'</span> set up to track <span class="token string">'origin/main'</span><span class="token punctuation">.</span>
‚úì Pushed commits to <span class="token url">https://github.com/qmacro/common.git</span></code></pre>
<p>Et voila, the repo on GitHub is there.</p>
<p><img src="/images/2026/01/qmacro-common-no-package.png" alt="the qmacro/common repo on
GitHub"></p>
<p>But there's no package ... yet.</p>
<h2 id="preparing-to-publish-the-package">Preparing to publish the package</h2>
<p>Let's do that now. First, there's some setup required for working with the NPM
registry in GitHub Packages.</p>
<h3 id="generating-a-token-for-authentication">Generating a token for authentication</h3>
<p>As the GitHub documentation article <a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry">Working with the npm
registry</a>
states:</p>
<blockquote>
<p>&quot;You need an access token to publish, install, and delete private, internal,
and public packages.&quot;</p>
</blockquote>
<p>Heading over to the <a href="https://github.com/settings/tokens">Tokens (classic)</a> area
of the GitHub Developer Settings, we should create a new classic token with the
following scopes:</p>
<p><img src="/images/2026/01/token-scopes.png" alt="token scopes"></p>
<p>and will end up with something like this:</p>
<p><img src="/images/2026/01/classic-token-full-registry-access.png" alt="classic token"></p>
<h3 id="associating-the-token-with-the-registry">Associating the token with the registry</h3>
<p>The value of the token can now be associated, in the
<a href="https://docs.npmjs.com/cli/v11/configuring-npm/npmrc">npmrc</a>-based
configuration, with the NPM registry in GitHub Packages, which has the address
<code>npm.pkg.github.com</code>.</p>
<p>In an existing or new <code>.npmrc</code> file in your home directory, we need to add
this:</p>
<pre class="language-ini" tabindex="0"><code class="language-ini"><span class="token key attr-name">//npm.pkg.github.com/:_authToken</span><span class="token punctuation">=</span><span class="token value attr-value">THE-TOKEN-JUST-GENERATED</span></code></pre>
<blockquote>
<p>For more on this, see the <a href="blog/posts/2025/10/12/using-capire-modules-from-github-packages/#associate-the-token-with-the-registry">Associate the token with the
registry</a>
section of the blog post <a href="/blog/posts/2025/10/12/using-capire-modules-from-github-packages/">Using @capire modules from GitHub
Packages</a>.</p>
</blockquote>
<h3 id="associating-the-scope-with-the-registry">Associating the scope with the registry</h3>
<p>Additionally we'll need to tell the <code>npm</code> command line tool about how it should
use the GitHub Packages NPM registry, rather than the (default) NPM registry at
<a href="https://www.npmjs.com">https://www.npmjs.com</a>, for <code>@qmacro</code>-scoped packages.</p>
<p>Details about this are also covered in the aforementioned blog post in the
section <a href="/blog/posts/2025/10/12/using-capire-modules-from-github-packages/#namespace-registry-mapping-required">Namespace registry mapping
required</a>.</p>
<p>In that same <code>~/.npmrc</code> file, we need to add this too:</p>
<pre class="language-ini" tabindex="0"><code class="language-ini"><span class="token key attr-name">@qmacro:registry</span><span class="token punctuation">=</span><span class="token value attr-value">https://npm.pkg.github.com</span></code></pre>
<h2 id="associate-the-repo-with-the-package">Associate the repo with the package</h2>
<p>While one can register packages in the NPM registry on GitHub Packages that are
independent of any source repo on GitHub, it makes a lot of sense to have both
and have them linked. That way, one can go from the repo source to the package,
and from the package back to the repo source.</p>
<p>All that's needed to make this association is a <code>repository</code> property in the
<code>package.json</code> file. So let's add that, and commit &amp; push the change to GitHub.
Here's the entire contents of the <code>package.json</code> file with that new
<code>repository</code> property<a href="#footnotes"><sup>4</sup></a> added:</p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"@qmacro/common"</span><span class="token punctuation">,</span>
  <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"git"</span><span class="token punctuation">,</span>
    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"git+https://github.com/qmacro/common.git"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">""</span>
<span class="token punctuation">}</span></code></pre>
<p>After committing this change and pushing it to the remote on GitHub:</p>
<pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> package.json <span class="token punctuation">\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'add repository property'</span> <span class="token punctuation">\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> push</code></pre>
<p>we're ready to actually publish the package!</p>
<h2 id="publishing-the-package">Publishing the package</h2>
<p>After all that preparation, our <code>~/.npmrc</code> contents in place:</p>
<pre class="language-ini" tabindex="0"><code class="language-ini"><span class="token key attr-name">@qmacro:registry</span><span class="token punctuation">=</span><span class="token value attr-value">https://npm.pkg.github.com</span>
<span class="token key attr-name">//npm.pkg.github.com/:_authToken</span><span class="token punctuation">=</span><span class="token value attr-value">ghp_...</span></code></pre>
<p>we're all set, and the process is simple:</p>
<pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token function">npm</span> publish</code></pre>
<p>This emits output similar to the following:</p>
<pre class="language-log" tabindex="0"><code class="language-log">npm notice
npm notice üì¶  <span class="token operator">@</span>qmacro<span class="token operator">/</span>common<span class="token operator">@</span><span class="token number">1.0.0</span>
npm notice Tarball Contents
npm notice <span class="token number">243B</span> README<span class="token punctuation">.</span>md
npm notice <span class="token number">44B</span> <span class="token domain constant">index.cds</span>
npm notice <span class="token number">349B</span> <span class="token domain constant">package.json</span>
npm notice Tarball Details
<span class="token property">npm notice name:</span> <span class="token operator">@</span>qmacro<span class="token operator">/</span>common
<span class="token property">npm notice version:</span> <span class="token number">1.0.0</span>
<span class="token property">npm notice filename:</span> qmacro<span class="token operator">-</span>common<span class="token operator">-</span>1<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>tgz
<span class="token property">npm notice package size:</span> <span class="token number">528</span> B
<span class="token property">npm notice unpacked size:</span> <span class="token number">636</span> B
<span class="token property">npm notice shasum:</span> d6b369d2e3db3878df8f9d9745b393f68a18b18b
<span class="token property">npm notice integrity:</span> sha512<span class="token operator">-</span>Anr74Mjy9kRvb<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>RkUg3wgpto8UA<span class="token operator">=</span><span class="token operator">=</span>
<span class="token property">npm notice total files:</span> <span class="token number">3</span>
npm notice
npm notice Publishing to <span class="token url">https://npm.pkg.github.com</span> with tag latest and default access
<span class="token operator">+</span> <span class="token operator">@</span>qmacro<span class="token operator">/</span>common<span class="token operator">@</span><span class="token number">1.0.0</span></code></pre>
<p>which denotes success.</p>
<h2 id="examining-the-results">Examining the results</h2>
<p>Indeed, we can now see a package associated with the <code>qmacro/common</code> repo:</p>
<p><img src="/images/2026/01/qmacro-common-package-associated.png" alt="qmacro/common package
associated"></p>
<p>and following that package link to the <a href="https://github.com/qmacro/common/pkgs/npm/common">package
page</a>, we see:</p>
<p><img src="/images/2026/01/qmacro-common-package-info.png" alt="qmacro/common package info"></p>
<p>which indeed also has a link (via the README) back to the
<a href="https://github.com/qmacro/common">repo</a>.</p>
<h2 id="making-the-package-public">Making the package public</h2>
<p>As described in the <a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#publishing-a-package">Publishing a
package</a>
section of <a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry">Working with the npm
registry</a>:</p>
<blockquote>
<p>&quot;When you first publish a package, the default visibility is private.&quot;</p>
</blockquote>
<p>So in order for you to try this out, let's take one final step in this post,
and change the visibility to public.</p>
<p>This is also simple and can be done via the package settings:</p>
<p><img src="/images/2026/01/changing-package-visibility-to-public.png" alt="changing package visibility to
public"></p>
<p>And that's it!</p>
<h2 id="wrapping-up">Wrapping up</h2>
<p>All that's left for this post is for you to try the package out, by <code>npm add</code>ing it to a CAP Node.js project. Let me know in the comments if it works
for you.</p>
<p>Now that we understand the basics of a CDS model reuse package, in the next
post we'll start to take a closer look at
<a href="https://github.com/capire/common">capire/common</a>.</p>
<h2 id="footnotes">Footnotes</h2>
<ol>
<li>
<p>There are multiple registries in GitHub Packages - for Docker, Apache Maven,
RubyGems and more, as well as for Node.js packages.</p>
</li>
<li>
<p>There's that
<a href="/blog/posts/2026/01/01/modules-modularity-and-reuse-in-cds-models-part-1-an-introduction/#active-vs-passive">passive</a>
word again. I'll get to explaining what I mean by it at some point in this
series, honest!</p>
</li>
<li>
<p>If you're not yet familiar with the command line tool options, you can
invoke just <code>gh repo create</code> and follow the interactive prompts instead,
which start like this:</p>
<pre class="language-log" tabindex="0"><code class="language-log"><span class="token operator">?</span> What would you like to do<span class="token operator">?</span>  <span class="token punctuation">[</span>Use arrows to move<span class="token punctuation">,</span> type to filter<span class="token punctuation">]</span>
<span class="token operator">></span> Create a new repository on GitHub from scratch
  Push an existing local repository to GitHub</code></pre>
</li>
<li>
<p>While a simpler string value like this:</p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span> <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token string">"https://github.com/qmacro/common"</span> <span class="token punctuation">}</span></code></pre>
<p>will work (similar to <a href="https://github.com/capire/common/blob/6fe89fb51a6b06cf65d18f6d66ef880545a9054f/package.json#L4">how it's defined for
capire/common</a>),
<code>npm publish</code> will emit a warning like this:</p>
<pre class="language-log" tabindex="0"><code class="language-log">npm warn publish npm auto<span class="token operator">-</span>corrected some errors in your <span class="token domain constant">package.json</span> when publishing<span class="token punctuation">.</span>  Please run <span class="token string">"npm pkg fix"</span> to address these errors<span class="token punctuation">.</span>
<span class="token property">npm warn publish errors corrected:</span>
npm warn publish <span class="token string">"repository"</span> was changed from a string to an object
npm warn publish <span class="token string">"repository.url"</span> was normalized to <span class="token string">"git+https://github.com/qmacro/common.git"</span></code></pre>
</li>
</ol>



<script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async=""></script>

<ul class="links-nextprev"><li class="links-nextprev-prev">‚Üê Previous<br> <a href="/blog/posts/2026/01/07/modules-modularity-and-reuse-in-cds-models-part-2-creating-a-simple-reuse-package/">Modules, modularity &amp; reuse in CDS models - part 2 - creating a simple reuse package</a></li><li class="links-nextprev-next">Next ‚Üí<br><a href="/blog/posts/2026/01/21/modules-modularity-and-reuse-in-cds-models-part-4-from-passive-to-active-with-capire-common/">Modules, modularity &amp; reuse in CDS models - part 4 - from passive to active with @capire/common</a></li>
</ul>

			</heading-anchors>
		</main>

		<!-- This page `/blog/posts/2026/01/14/modules-modularity-and-reuse-in-cds-models-part-3-publishing-the-simple-reuse-package/` was built on 2026-02-07T11:09:43.336Z -->
		<script type="module" src="/dist/t-8sxMV3B9.js"></script>
	</body>
</html>
