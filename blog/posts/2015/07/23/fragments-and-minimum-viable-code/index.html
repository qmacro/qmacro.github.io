<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2015/07/23/fragments-and-minimum-viable-code/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.54fe08380532f159e78f.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Fragments and Minimum Viable Code | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Fragments and Minimum Viable Code"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2015/07/23/fragments-and-minimum-viable-code/"><meta name="description" content="Fragments and Minimum Viable Code 23 Jul 2015 | 2 min read 30 Days of UI5 — Day 20 by DJ Adams In an earlier post in this series, MVC –..."><meta property="og:description" content="Fragments and Minimum Viable Code 23 Jul 2015 | 2 min read 30 Days of UI5 — Day 20 by DJ Adams In an earlier post in this series, MVC –..."><meta name="description" content="Fragments and Minimum Viable Code 23 Jul 2015 | 2 min read 30 Days of UI5 — Day 20 by DJ Adams In an earlier post in this series, MVC –..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Fragments and Minimum Viable Code</h1><div class="post__details"><time datetime="2015-07-23">23 Jul 2015 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p><strong><a href="/blog/posts/2015/07/04/30-days-of-ui5/">30 Days of UI5</a> — Day 20 by <a href="//qmacro.org/about/">DJ Adams</a></strong></p><p>In an earlier post in this series, <a href="/blog/posts/2015/07/21/mvc-model-view-controller-minimum-viable-code/">MVC – Model View Controller, Minimum Viable Code</a>, I showed how you could write a single-file UI5 app but still embrace and use the concepts of Model View Controller, having separate controller definitions and declarative XML Views. I also mentioned you could use XML Fragments in this way too, and <a href="https://twitter.com/Qualiture/status/623467858652200960">Robin van het Hof asked</a> if I could explain how. So here we go, thanks Robin!</p><p>If we take the code from the previous post and run it, we end up with a UI that looks like this:</p><p><img src="/images/2018/02/Screen-Shot-2015-07-21-at-17.33.38-624x420.png" alt=""></p><p>Let’s add some behaviour to the Button so that it instantiates and opens a Dialog control. We’ll define this Dialog control in an XML Fragment.</p><p>In the same way that we defined the XML View, we’ll define the XML Fragment inside a script element, this time with a “ui5/xmlfragment” type, like this:</p><p><img src="/images/2018/02/Screen-Shot-2015-07-21-at-17.43.19-624x277.png" alt=""></p><p>It’s a standard XML Fragment definition, and even though it only contains a single root control –the Dialog — I’m using the Fragment Definition wrapper explicitly anyway (as I think it’s good practice).</p><p>When we press the Button, we want this Dialog to appear, like this:</p><p><img src="/images/2018/02/Screen-Shot-2015-07-21-at-17.39.49-624x422.png" alt=""></p><p>So let’s rewrite the handler “onPress” which is attached to the Button’s press event, so it now looks like this:</p><p><img src="/images/2018/02/Screen-Shot-2015-07-21-at-17.42.59-624x488.png" alt=""></p><p>This is a common pattern for fragments, so let’s examine the code line by line:</p><p><strong>48</strong>: We’re going to be storing a reference to the Dialog fragment’s instance in a controller variable “_oDialogFragment” so we declare it explicitly, mostly to give those reading our code a clue as to our intentions.</p><p><strong>51-56</strong>: Ensuring we only instantiate the Dialog once, we use the sap.ui.xmlfragment call, with the fragmentContent property, passing the content of the fragment script with jQuery’s help (remember, the name of the fragment script is “dialog”). Once instantiated we <a href="http://stackoverflow.com/a/24640317/384366">add it as a dependent</a> to the current XML View.</p><p><strong>57</strong>: At this stage we know we have a Dialog ready, so we just open it up.</p><p><strong>60-62</strong>: The onClose function handles the press event of the “Close” Button in the Dialog’s buttons aggregation.</p><p>And that’s pretty much it. Use script elements to embed XML Views and Fragments, and use sap.ui.xmlview and sap.ui.xmlfragment to instantiate them, with jQuery to grab the actual content.</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/fragment/">#fragment</a> <a href="/tags/mvc/">#mvc</a> <a href="/tags/openui5/">#openui5</a> <a href="/tags/xmlfragments/">#xmlfragments</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2015/07/24/spreading-the-ui5-message/"><span>←</span> <span>Spreading the UI5 Message</span> </a><a href="/blog/posts/2015/07/22/a-short-ui5-debugging-journey/"><span>A Short UI5 Debugging Journey</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://www.linkedin.com/in/djadams/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li><li><a rel="me" href="/tweets/">Tweet Archive</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a rel="me" href="https://bsky.app/profile/qmacro.org" target="_blank" rel="noopener noreferrer">Bluesky</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>