<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/blog/posts/2015/05/20/json-list-binding-and-maps/"><link rel="alternate" type="application/atom+xml" title="DJ's Weblog - Feed" href="https://qmacro.org/feed.xml"><link href="/assets/main.4654d4542dcb045c9ba3.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>JSON List Binding and maps | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="JSON List Binding and maps"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/blog/posts/2015/05/20/json-list-binding-and-maps/"><meta name="description" content="JSON List Binding and maps 20 May 2015 | 2 min read This morning, on a long train journey up from near Reading to Barnsley, I was hacking on..."><meta property="og:description" content="JSON List Binding and maps 20 May 2015 | 2 min read This morning, on a long train journey up from near Reading to Barnsley, I was hacking on..."><meta name="description" content="JSON List Binding and maps 20 May 2015 | 2 min read This morning, on a long train journey up from near Reading to Barnsley, I was hacking on..."><meta property="og:image" content="https://qmacro.org/images/site-image.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4WQKBG0L4Y"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4WQKBG0L4Y');</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>JSON List Binding and maps</h1><div class="post__details"><time datetime="2015-05-20">20 May 2015 </time><span>| </span><span>2 min read</span></div></header><main class="post__content"><p>This morning, on a long train journey up from near Reading to Barnsley, I was hacking on a UI5 app. I had a custom module to munge some JSON data into the shape I needed, and was binding the items aggregation of a List control to part of the resulting data structure.</p><p>In the developer console, I was examining the data structure in the JSON Model that was set on the List, and did a double-take. I’d mistakenly generated a map rather than an array, as the value of the property to which I wanted to bind the items aggregation. Naturally, I thought, it needed to be an array, but I had spotted that it was a map – the output of a nice little reduce function I was nicely proud of, with my functional JavaScript hat on (but that’s another story).</p><p>So I looked across to the app itself, expecting the List to be empty. But it wasn’t! It was showing exactly what I had expected to see, had the value of the property been an array. What was going on?!</p><p>After some digging, I found out. Introduced on 10 Dec 2014, within the 1.28.0 release, was a modest feature:</p><address>**[[FEATURE] sap.ui.model.json.JSONListBinding: iterate over maps](https://github.com/SAP/openui5/commit/38ab764601c061d5fbf256f8bb4703cd4ec89022)** Enhance JSONListBinding to iterate over maps (by key), not just over arrays (by index).</address>Interesting! A small modification to the JSON List Binding to treat the indices of a map as if they were of an array. After all, in JavaScript, arrays and maps are perhaps more closely related than one might think.<p>I set about confirming what I’d found with a small test on Plunkr, “<a href="http://plnkr.co/edit/QQU4bPNb5Kg65vZ8vnad?p=preview">Aggregation Binding Test</a>“:</p><p><img src="/images/2015/05/Screen-Shot-2015-05-20-at-19.11.18.png" alt="image"></p><p>But don’t take my word for it – the author has also added a test to the <a href="https://openui5.hana.ondemand.com/test-resources/sap/ui/core/qunit/JSONListBinding.qunit.html">JSON List Binding QUnit tests</a>:</p><p><img src="/images/2015/05/Screen-Shot-2015-05-20-at-19.14.05.png" alt="image"></p><p>It makes sense to blur the distinction between maps and arrays when it comes to aggregation bindings; already I have a use for it, and I didn’t even know the feature had been implemented!</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/aggregation/">#aggregation</a> <a href="/tags/binding/">#binding</a> <a href="/tags/json/">#json</a> <a href="/tags/ui5/">#ui5</a></div><style>.utterances {
  margin-left: inherit !important;
}</style><script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" crossorigin="anonymous" async></script><nav class="post__pagination"><a href="/blog/posts/2015/07/03/email-discipline/"><span>←</span> <span>Email Discipline</span> </a><a href="/blog/posts/2015/04/22/opensap-experiences/"><span>openSAP Experiences</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a rel="me" href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a rel="me" href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a rel="me" href="https://hachyderm.io/@qmacro" target="_blank" rel="noopener noreferrer">Mastodon</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>