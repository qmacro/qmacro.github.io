<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transferring my Amazon wishlist to AllConsuming.net</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>Transferring my Amazon wishlist to AllConsuming.net</h1>

<time datetime="2003-01-25">25 Jan 2003</time>

<p>Now that I can <a href="/undefined/">monitor comments about books I have in my AllConsuming collection</a>, I thought it would be nice to add those books in my <a href="http://www.amazon.co.uk/exec/obidos/wishlist/3G7VX6N7NMGWM/">Amazon wishlist</a> to that AllConsuming collection so that I could see what people were saying about the books I wanted to buy.</p>
<p>So I hacked up a few scripts, and here are the results.</p>
<p><em>Getting my wishlist</em></p>
<p>Using <a href="http://www.twoshortplanks.com/simon/">Simon Wistow</a>‘s very useful <a href="http://search.cpan.org/author/SIMONW/WWW-Amazon-Wishlist-0.85/">WWW::Amazon::Wishlist</a>, it was a cinch to grab details of the books on my <a href="http://www.amazon.co.uk/exec/obidos/wishlist/3G7VX6N7NMGWM/">wishlist</a>. (I had to <a href="/~dj/2003/01/Wishlist.pm.diff.txt">patch</a> the module very slightly because of a problem with the user agent string not being set).</p>
<p>The script I wrote, <a href="/~dj/2003/01/wishlist">wishlist</a>, simply outputs a list of ISBN/ASINs and title/author details, like this:</p>
<p>[dj@cicero scraps]$ ./wishlist 0751327824 The Forgotten Arts and Crafts by John Seymour 090498205X With Ammon Wrigley in Saddleworth by Sam Seville 0672322404 Mod_perl Developer's Cookbook by Geoffrey Young, et al 0465024750 Fluid Concepts and Creative Analogies: Computer Models of ... 0765304368 Down and Out in the Magic Kingdom by Cory Doctorow ...</p>
<p><em>Interacting with AllConsuming</em></p>
<p>While I’m sure the <a href="http://allconsuming.net/">allconsuming.net</a> site and services are going to morph as services are added and changed, I nevertheless couldn’t reist writing a very simple Perl class, <a href="/~dj/2003/01/Agent.pm">Allconsuming::Agent</a> that allows you to log in (<em>logIn()</em>) and add books to your collection (<em>addToFavouriteBooks()</em>, <em>addToCurrentlyReading()</em>). It’s very basic but does the job for now. It tries to play nice by logging you out (<em>logOut()</em>) of the site automatically when you’ve finished. It can also tell if the site knows about a certain book (<em>knowsBook()</em>) – I think AllConsuming uses <a href="http://www.amazon.com/">amazon.com</a> to look books up and so the discrepancies between that and <a href="http://www.amazon.co.uk/">www.amazon.co.uk</a>, for example, show themselves as AllConsuming’s innocent blankness with certain ISBNs.</p>
<p>Anyway, I’m prepared for the eventuality that things will change at <a href="http://allconsuming.net/">allconsuming.net</a> sooner or later, so this class won’t work forever…but it’s fine for now.</p>
<p><em>Adding my wishlisted books</em></p>
<p>So putting this all together, I wrote a driver script, <a href="/~dj/2003/01/acadd">acadd</a>, which grabs my current reading list data from AllConsuming, and reads in a list of ISBN/ASINs that would be typically produced from a script like <a href="/~dj/2003/01/wishlist">wishlist</a>.</p>
<p>Reading through the wishlist book data, <a href="/~dj/2003/01/acadd">acadd</a> does this:</p>
<ul>
<li>checks to make sure the book isn’t in my AllConsuming collection already</li>
<li>checks that AllConsuming knows about the book</li>
<li>adds the book to my collection at AllConsuming</li>
</ul>
<p>Here’s a snippet of what actually happened when I piped the output of the one script into the other:</p>
<p>[dj@cicero scraps]$ ./wishlist | ./acadd 0751327824 The Forgotten Arts and Crafts by John Se... [UNKNOWN] 090498205X With Ammon Wrigley in Saddleworth by Sam... [UNKNOWN] 0672322404 Mod_perl Developer's Cookbook by Geoffre... [HAVE] 0465024750 Fluid Concepts and Creative Analogies: C... [HAVE] 0765304368 Down and Out in the Magic Kingdom by Cor... [ADDED OK] ...</p>
<p>Woo! <a href="http://allconsuming.net/item.cgi?isbn=0765304368">Cory’s new book</a>, appearing on my <a href="http://www.amazon.co.uk/exec/obidos/wishlist/3G7VX6N7NMGWM/">Amazon wishlist</a>, was added to my <a href="http://allconsuming.net/">allconsuming.net</a> collection. (In case you’re wondering, I am only adding books like this to ‘Currently Reading’, rather than any other collection category, temporarily, as right now only the books in this category along with the ‘Favourites’ category can be retrieved with the <a href="http://allconsuming.net/news/000012.html">SOAP API</a> – and it’s upon this API that <a href="/~dj/2003/01/booktalk">booktalk</a> relies.)</p>
<p>Anyway, it’s late, time for bed, driving to Brussels early tomorrow morning. Mmmm. Belgian beer beckons!</p>

<hr>
<ul><li>Next: <a href="/blog/2003/26/1/the-fragility-of-retro-engineering/">The fragility of retro-engineering</a></li><li>Previous: <a href="/blog/2003/22/1/presentations-wikis-and-site-navigation/">Presentations, Wikis, and Site Navigation</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2003/25/1/transferring-my-amazon-wishlist-to-allconsuming-net/ -->
  </body>
</html>
