2019-10-04-annotated-links-episode-38-of-hands-on-sap-dev-with-qmacro
Annotated links: Episode 38 of Hands-on SAP dev with qmacro
technology-blog-sap
2019-10-04
https://community.sap.com/t5/technology-blogs-by-sap/annotated-links-episode-38-of-hands-on-sap-dev-with-qmacro/ba-p/13388795
<EM>This is a searchable description of the content of a live stream recording, specifically <STRONG>‚ÄúEp.38 ‚Äì Converting API EDMX metadata to CSN"</STRONG> in the ‚Äú<A href="https://bit.ly/handsonsapdev" target="_blank" rel="nofollow noopener noreferrer">Hands-on SAP dev with qmacro</A>‚Äù series. There are links directly to specific highlights in the video recording. For links to annotations of other episodes, please see the ‚Äú<A href="https://bit.ly/handsonsapdev#replays" target="_blank" rel="nofollow noopener noreferrer">Catch the replays</A>‚Äù section of the series blog post.</EM><BR />
<BR />
This episode, titled ‚Äú<A href="http://bit.ly/handsonsapdev#ep38" target="_blank" rel="nofollow noopener noreferrer">Converting API EDMX metadata to CSN</A>‚Äú, was streamed live on Fri 04 Oct 2019 and is approximately one hour in length. The stream recording is <A href="https://www.youtube.com/watch?v=JjY2MC3kJgM" target="_blank" rel="nofollow noopener noreferrer">available on YouTube</A>.<BR />
<BR />
<IMG class="migrated-image" src="https://community.sap.com/legacyfs/online/storage/blog_attachments/2019/10/Screenshot-2019-10-04-at-15.37.14.jpg" /><BR />
<BR />
Brief synopsis: In this episode we take a look at how OData metadata information, in the form of EDMX, can be converted to Core Schema Notation (CSN), and take a look at some SAP API Hub features along the way.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=01m50s" target="_blank" rel="nofollow noopener noreferrer">01:50</A> The latest edition to my keyboard family, the <A href="http://www.vortexgear.tw/vortex2_2.asp?kind=47&amp;kind2=224&amp;kind3=&amp;kind4=1033" target="_blank" rel="nofollow noopener noreferrer">Vortex Core</A>, a 40% keyboard layout.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=04m05s" target="_blank" rel="nofollow noopener noreferrer">04:05</A> Some small giveaways for #HandsOnSAPDev live stream family members - badges from SAP TechEd and some awesome #HandsOnSAPDev stickers that <A href="https://twitter.com/rsletta/status/1178030720045989890" target="_blank" rel="nofollow noopener noreferrer">Ronnie Sletta got made</A> for us. We‚Äôll bring some to TechEd and can give away up to 20 here.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=09m50s" target="_blank" rel="nofollow noopener noreferrer">09:50</A> The special secret keyword you need to send me when you request some badges or stickers <span class="lia-unicode-emoji" title=":slightly_smiling_face:">üôÇ</span><BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=11m20s" target="_blank" rel="nofollow noopener noreferrer">11:20</A> The Developer Garage is the place to be at <A href="https://events.sap.com/teched-emea/en/home" target="_blank" rel="noopener noreferrer">SAP TechEd Barcelona next week</A>, where you‚Äôll be able to also get your hands on a #HandsOnSAPDev sticker (you will have to ‚Äòearn‚Äô it though!).<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=12m10s" target="_blank" rel="nofollow noopener noreferrer">12:10</A> Reminding everyone of the upcoming <A href="https://adventofcode.com" target="_blank" rel="nofollow noopener noreferrer">Advent Of Code</A> in December; I‚Äôd like to be better prepared this year, possibly with a setup similar to what we used in <A href="http://bit.ly/handsonsapdev" target="_blank" rel="nofollow noopener noreferrer">Ep.0</A> (using <A href="https://www.npmjs.com/package/nodemon" target="_blank" rel="nofollow noopener noreferrer">nodemon</A>).<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=14m15s" target="_blank" rel="nofollow noopener noreferrer">14:15</A> Looking at <A href="https://help.github.com/en/categories/automating-your-workflow-with-github-actions" target="_blank" rel="nofollow noopener noreferrer">GitHub Actions</A>; I created a JavaScript based action to automate the assignment of new issues in a repo to a column in a project in that same repo (I use GitHub repo projects to organise a lot of my working activities).<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=15m15s" target="_blank" rel="nofollow noopener noreferrer">15:15</A> Looking at <A href="https://worldwideweb.cern.ch/browser/#https://qmacro.org" target="_blank" rel="nofollow noopener noreferrer">the original WWW browser</A> that Tim Berners-Lee developed on the NeXT Cube, a beautiful simulation, and also pleasing that my blog can be rendered even with the very first browser that existed. Nice!<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=16m30s" target="_blank" rel="nofollow noopener noreferrer">16:30</A> Info on the new <A href="https://anchor.fm/tech-aloud" target="_blank" rel="nofollow noopener noreferrer">Tech Aloud</A> podcast that I created, read more about it (especially how to subscribe and listen!) in this blog post: <A href="https://qmacro.org/2019/09/17/new-podcast-tech-aloud/" target="_blank" rel="nofollow noopener noreferrer">New podcast - Tech Aloud</A>.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=18m00s" target="_blank" rel="nofollow noopener noreferrer">18:00</A> A quick note on <A href="https://martinfowler.com/books/dsl.html" target="_blank" rel="nofollow noopener noreferrer">Domain Specific Languages</A> (DSLs), which are wonderful and something that is evident in CAP, as I explain in this SAP Community post: <A href="https://blogs.sap.com/2019/09/18/tech-aloud-podcast-an-introduction/" target="_blank" rel="noopener noreferrer">Tech Aloud podcast - an introduction</A>.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=19m30s" target="_blank" rel="nofollow noopener noreferrer">19:30</A> Showing how I manage the activities relating to Tech Aloud - using a GitHub <A href="https://github.com/qmacro/tech-aloud/projects/1" target="_blank" rel="nofollow noopener noreferrer">repo related project</A>, with various kanban style columns (Submitted, Planned, Recorded, Published in this particular case).<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=21m20s" target="_blank" rel="nofollow noopener noreferrer">21:20</A> Feel free to <A href="https://github.com/qmacro/tech-aloud/issues" target="_blank" rel="nofollow noopener noreferrer">submit articles / posts that you think are relevant and worthwhile</A> for the Tech Aloud podcast. Read more about that in this post: <A href="https://blogs.sap.com/2019/10/04/submit-suggestions-for-tech-aloud-during-sap-teched-barcelona/" target="_blank" rel="noopener noreferrer">Submit suggestions for Tech Aloud during SAP TechEd Barcelona</A>.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=21m50s" target="_blank" rel="nofollow noopener noreferrer">21:50</A> Demonstrating the automatic assignment of a new issue in a repo to a project in that repo, specifically to a particular column in that project. Done using a GitHub Action, which you can find here: <A href="https://github.com/qmacro/action-add-issue-to-project-column/" target="_blank" rel="nofollow noopener noreferrer">action-add-issue-to-project-column</A>.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=24m55s" target="_blank" rel="nofollow noopener noreferrer">24:55</A> Looking at the workflow definition in the Tech Aloud podcast management repo to see how the job (that uses the GitHub Action) is set up. See <A href="https://github.com/qmacro/tech-aloud/blob/master/.github/workflows/submission.yml" target="_blank" rel="nofollow noopener noreferrer">submission.yml</A>.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=25m40s" target="_blank" rel="nofollow noopener noreferrer">25:40</A> A quick reading recommendation: ‚Äú<A href="https://d.dam.sap.com/a/21EPJi8/SAP%20Fiori%20elements%20Usage%20Guide%20-%20August%202019.pdf" target="_blank" rel="noopener noreferrer">When to use SAP Fiori elements</A>‚Äù that was recently shared by the Twitter <SPAN class="citation" data-cites="sapdevs">@sapdevs</SPAN> account.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=26m40s" target="_blank" rel="nofollow noopener noreferrer">26:40</A> Looking at the <A href="https://answers.sap.com/questions/12878338/csn-file-in-the-cloud-programming-model-s4-hana-cl.html" target="_blank" rel="noopener noreferrer">question</A> asked by Kevin Hu on the SAP Community about the conversion of an S/4HANA API (from the SAP API Business Hub) to Core Schema Notation (CSN).<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=27m55s" target="_blank" rel="nofollow noopener noreferrer">27:55</A> Going to <A class="uri" href="https://developers.sap.com" target="_blank" rel="noopener noreferrer">https://developers.sap.com</A> you can get to the missions available in the SAP TechEd <A href="https://developers.sap.com/app-space.html" target="_blank" rel="noopener noreferrer">App Space</A>, one of which is on CAP &amp; the SAP Cloud SDK: ‚ÄúS/4HANA Extensions with Cloud Application Programming Model (CAP)‚Äù.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=29m10s" target="_blank" rel="nofollow noopener noreferrer">29:10</A> The <A href="https://developers.sap.com/tutorials/cap-cloudsdk-1-mock-service.html" target="_blank" rel="noopener noreferrer">first tutorial in that mission</A> is what Kevin was referring to, where a file called <CODE>API_BUSINESS_PARTNER.json</CODE> is presented to be used in the tutorial (and a subsequent tutorial too). The question is - what format is it in (CSN) and how was it actually generated?<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=31m55s" target="_blank" rel="nofollow noopener noreferrer">31:55</A> There are two packages available in the SAP NPM Registry: <CODE><a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1387241">@Sisn</a>/edm-converters</CODE> and <CODE><a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1387241">@Sisn</a>/edmx2csn</CODE> for exactly this sort of requirement.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=33m00s" target="_blank" rel="nofollow noopener noreferrer">33:00</A> Logging on to the <A href="http://api.sap.com" target="_blank" rel="noopener noreferrer">SAP API Business Hub</A> to get to the API so we can look at it and download the definition in the form of an EDMX file (OData FTW!).<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=35m45s" target="_blank" rel="nofollow noopener noreferrer">35:45</A> Adding the API to the SAP API Hub ‚ÄúAPI Cockpit‚Äù to try it out in the browser.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=38m20s" target="_blank" rel="nofollow noopener noreferrer">38:20</A> Poking the API from the terminal with curl, one step at a time. First getting a 401 (Unauthorized) response of course, then (eventually!) a 307 Temporary Redirect, which is better.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=39m45s" target="_blank" rel="nofollow noopener noreferrer">39:45</A> The tutorial that explains the use of the APIKey header is this one: <A href="https://developers.sap.com/tutorials/hcp-abh-test-locally.html" target="_blank" rel="noopener noreferrer">Testing API Business Hub APIs with Curl</A>.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=41m20s" target="_blank" rel="nofollow noopener noreferrer">41:20</A> Looking briefly at the difference between HTTP response codes 307 (Temporary Redirect) and 302 (Moved Temporarily). Looks like this Stack Overflow answer is useful to read: <A href="https://stackoverflow.com/questions/2068418/whats-the-difference-between-a-302-and-a-307-redirect" target="_blank" rel="nofollow noopener noreferrer">What‚Äôs the difference between a 302 and a 307 redirect?</A>.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=43m40s" target="_blank" rel="nofollow noopener noreferrer">43:40</A> Grabbing the API‚Äôs metadata from the <A href="https://api.sap.com/api/API_BUSINESS_PARTNER/overview" target="_blank" rel="noopener noreferrer">API specification page</A> in EDMX format (JSON and YAML are also available).<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=44m30s" target="_blank" rel="nofollow noopener noreferrer">44:30</A> To convert this EDMX we need one of two packages mentioned earlier. We opt to install <CODE><a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1387241">@Sisn</a>/edmx2csn</CODE> into a skeleton NPM project locally.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=45m35s" target="_blank" rel="nofollow noopener noreferrer">45:35</A> Looking at the metadata of the package with <CODE>npm info <a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1387241">@Sisn</a>/edmx2csn</CODE> before installing it with <CODE>npm i -D <a href="https://community.sap.com/t5/user/viewprofilepage/user-id/1387241">@Sisn</a>/edmx2csn</CODE>.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=46m50s" target="_blank" rel="nofollow noopener noreferrer">46:50</A> Exploring what we‚Äôve got inside <CODE>node_modules/</CODE> as a result of the package install, including the ‚Äúbinary‚Äù (executable!) and its location and invocation options.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=50m20s" target="_blank" rel="nofollow noopener noreferrer">50:20</A> Downloading the tutorial-specific, older version of <CODE>API_BUSINESS_PARTNER.json</CODE> to compare it with the one we‚Äôve just created with the <CODE>edmx2csn</CODE> tool, to see if it‚Äôs the same or if there are some differences.<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=53m40s" target="_blank" rel="nofollow noopener noreferrer">53:40</A> Using the excellent <A href="https://stedolan.github.io/jq/" target="_blank" rel="nofollow noopener noreferrer">jq</A> tool to format both the old and the new JSON CSN files so we can compare them properly, and it turns out that there‚Äôs only a single (repeated) difference, in the end: part of the Cardinality is expressed now using ‚Äòmax‚Äô rather than ‚ÄòtargetMax‚Äô. And that‚Äôs it!<BR />
<BR />
<A href="https://www.youtube.com/watch?v=JjY2MC3kJgM&amp;t=58m10s" target="_blank" rel="nofollow noopener noreferrer">58:10</A> Come and see us in the Developer Garage next week if you‚Äôre at SAP TechEd in Barcelona, and perhaps pick up a #HandsOnSAPDev sticker when you‚Äôre there!
