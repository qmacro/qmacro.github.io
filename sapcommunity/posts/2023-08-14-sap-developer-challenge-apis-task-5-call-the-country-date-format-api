2023-08-14-sap-developer-challenge-apis-task-5-call-the-country-date-format-api
SAP Developer Challenge - APIs - Task 5 - Call the country date format API endpoint
application-developmentforum-board
2023-08-14
https://community.sap.com/t5/application-development-discussions/sap-developer-challenge-apis-task-5-call-the-country-date-format-api/td-p/279160
<P>(Check out the <A href="https://blogs.sap.com/2023/08/01/sap-developer-challenge-apis/" target="_blank" rel="noopener noreferrer">SAP Developer Challenge - APIs</A> blog post for everything you need to know about the challenge to which this task relates!)</P><P>Now you're familiar with the <A href="https://api.sap.com/api/DateAndTime/overview" target="_blank" rel="noopener noreferrer">Date and Time</A> API, you are in a position to try out one of the endpoints.</P><H2 id="toc-hId-1651315063">Background</H2><P>For many APIs on the <A href="https://api.sap.com/" target="_blank" rel="noopener noreferrer">SAP Business Accelerator Hub</A> there are options to "try out" the endpoints. You can define your own environment that you can then use to connect to from the hub:</P><P><span class="lia-inline-image-display-wrapper lia-image-align-inline" image-alt="add-new-environment.png" style="width: 999px;"><img src="https://community.sap.com/t5/image/serverpage/image-id/41944i6E59A5D46DA4A37C/image-size/large?v=v2&amp;px=999" role="button" title="add-new-environment.png" alt="add-new-environment.png" /></span></P><P><IMG src="https://community.sap.com/assets/add-new-environment.png" border="0" alt="" /></P><P>There's also a sandbox environment that's available for some of the API packages too, and this Date and Time API is one that is available in this sandbox environment.</P><H2 id="toc-hId--900841898">Your task</H2><P>Your task is to make a call to a specific endpoint in this API.</P><P>That endpoint is one of those that you might have seen in the previous task, but not one that met the criteria of that task. It's this one:</P><PRE>/getCountryDateFormat</PRE><BLOCKQUOTE><P>The reason it doesn't meet the criteria is because a response to a request to this endpoint is returned in a text representation, i.e. MIME type text/plain, and not JSON.</P></BLOCKQUOTE><P>You must specify the value DE for the country parameter.</P><P>But rather than just use the <A href="https://api.sap.com/api/DateAndTime/tryout" target="_blank" rel="noopener noreferrer">Try Out</A> facility on the hub, you should instead make the call using an HTTP client of your choice. There's some examples given in the <A href="https://groups.community.sap.com/t5/application-development/sap-developer-challenge-apis-task-0-learn-to-share-your-task/m-p/276058" target="_blank" rel="noopener noreferrer">Hints and tips section of Task 0</A>.</P><P>In order to "persuade" you to make the HTTP call yourself, you need not only the response to such a call, but you'll need also a specific header from the HTTP response. That header is a custom header, i.e. is prefixed with x- and relates to a traditional programming language in the SAP world.</P><P>So you need to take two values:</P><UL><LI>the content of the response payload (remember, it is in a text/plain representation)</LI><LI>the x- prefixed SAP language related header name, as it appears in the HTTP response</LI></UL><P>The header name should already appear in lower case, but please make sure it is, i.e. before you use it (see the next paragraph), ensure that it is all-lowercase.</P><P>You must join these two values together into a single string, concatenated with a comma.</P><P>It's this single string that you must send to be hashed and shared in a reply to this discussion thread as described in <A href="https://groups.community.sap.com/t5/application-development/sap-developer-challenge-apis-task-0-learn-to-share-your-task/m-p/276058" target="_blank" rel="noopener noreferrer">Task 0</A>.</P><P>So for example, if the response payload was:</P><PRE>"banana"</PRE><P>and the response headers looked like this:</P><PRE>Date: Thu, 27 Jul 2023 12:05:40 GMT
Content-Type: application/json
Content-Length: 12
Connection: keep-alive
vary: Accept-Encoding
x-abap-hidden-header: 123.456ms
x-request-id: 54dcdcb3-cf10-4d2b-6a2d-64ad846bd1e5
x-response-time: 417.10979ms
x-vcap-request-id: 54dcdcb3-cf10-4d2b-6a2d-64ad846bd1e5
strict-transport-security: max-age=31536000; includeSubDomains; preload;
Access-Control-Allow-Origin: *
Access-Control-Allow-Credentials: false</PRE><P>then the string to hash would be:</P><PRE>"banana",x-abap-hidden-header</PRE><H2 id="toc-hId-841968437">Hints and tips</H2><P>You'll need to find out how to authenticate the HTTP request, and provide the appropriate authentication details. If you don't, your request will be refused, with an HTTP 401 status code. Here's an example, where you see the headers of the request (identified with &gt; characters at the start of the line) and of the response (identified with &lt; characters at the start of the line):</P><PRE>&gt; GET /dateandtime/getTimezoneFromLocation?country=DE HTTP/1.1
&gt; Host: sandbox.api.sap.com
&gt; User-Agent: curl/7.74.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 401 Unauthorized
&lt; Date: Thu, 27 Jul 2023 11:59:48 GMT
&lt; Content-Type: application/json
&lt; Content-Length: 146
&lt; Connection: keep-alive
&lt; </PRE><P>You'll also receive some JSON in the response body telling you what's missing.</P><P>In order to get the authentication details you need, you'll need to be logged on to the hub.</P><P>You'll need to get your HTTP client or client library to emit the details of the HTTP response, so you can see the headers and find the one required. For example with curl, you could use the --include option, or even the --verbose option.</P><H2 id="toc-hId--1710188524">For discussion</H2><P>Have you seen x- prefixed headers before? What does this prefix signify? Is this still common practice these days?</P>
