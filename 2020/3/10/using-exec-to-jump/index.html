<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using exec to jump</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>Using exec to jump</h1>

<time datetime="2020-10-03">03 Oct 2020</time><a href="/blog/tags/autodidactics/" class="post-tag">autodidactics</a><a href="/blog/tags/shell/" class="post-tag">shell</a>

<p><em>In <a href="https://rwx.gg">Mr Rob</a>'s <a href="https://gitlab.com/rwxrob/dotfiles/">dotfiles repo</a> (see <a href="https://qmacro.org/2020/10/03/a-new-learning-source-for-shell-scripting/">A new learning source for shell scripting</a>) there's a treasure trove of content that is very pleasant to peruse.</em></p>
<p>In one of his streams I saw him use <a href="https://gitlab.com/rwxrob/dotfiles/-/blob/master/scripts/ix"><code>ix</code></a> and thereby discovered <a href="http://ix.io">ix.io</a> - a simple pastebin. He uses his <code>ix</code> script to share code and other content, either from the command line or from within Vim directly. It's only 14 lines including comments, but I've learned stuff from it already.</p>
<p>If <code>ix</code> is invoked with an argument, it's treated as the unique identifier for a specific pastebin, and that pastebin is retrieved, such as <a href="http://ix.io/2pgP">2pgP</a> (which is another of his scripts with lots to learn from - <code>twitch</code>).</p>
<p>The part of <code>ix</code> that handles this is simply:</p>
<pre class="language-shell"><code class="language-shell"><span class="token keyword">if</span> <span class="token punctuation">[</span> -n <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span><br>  <span class="token builtin class-name">exec</span> <span class="token function">curl</span> -s <span class="token string">"ix.io/<span class="token variable">$1</span>"</span><br><span class="token keyword">fi</span></code></pre>
<p>Basically in this mode, there's no point in processing the rest of the script (beyond the small section you see here), so the handling of the input should finish when the pastebin is retrieved.</p>
<p>Until now, I would have written it like this:</p>
<pre class="language-shell"><code class="language-shell"><span class="token keyword">if</span> <span class="token punctuation">[</span> -n <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span><br>  <span class="token function">curl</span> -s <span class="token string">"ix.io/<span class="token variable">$1</span>"</span><br>  <span class="token builtin class-name">exit</span><br><span class="token keyword">fi</span></code></pre>
<p>But that's simply unnecessary, and in fact arguably less efficient too. The Bash man page mentions, for <code>exec</code>, this fact: &quot;<em>If command is specified, it replaces the shell. No new process is created.</em>&quot;. In other words, in this <code>if ... fi</code>, the <code>curl</code> command replaces the script's execution, rather than being executed as a sub process.</p>
<p>Sometimes there's a beauty in the smallest things.</p>

<hr>
<ul><li>Next: <a href="/blog/2020/4/10/checking-a-command-is-available-before-use/">Checking a command is available before use</a></li><li>Previous: <a href="/blog/2020/3/10/a-new-learning-source-for-shell-scripting/">A new learning source for shell scripting</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2020/3/10/using-exec-to-jump/ -->
  </body>
</html>
