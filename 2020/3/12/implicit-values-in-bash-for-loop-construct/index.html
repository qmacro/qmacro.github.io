<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implicit values in Bash for loop construct</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>Implicit values in Bash for loop construct</h1>

<time datetime="2020-12-03">03 Dec 2020</time><a href="/blog/tags/autodidactics/" class="post-tag">autodidactics</a><a href="/blog/tags/shell/" class="post-tag">shell</a>

<p><em>Bash's 'for loop' construct can use implicit values - who knew? Not me ...</em></p>
<p>I was browsing a <a href="https://superuser.com/questions/318067/how-to-iterate-over-all-pair-combinations-in-a-list-in-bash/732740">Superuser question and answer</a> this morning and the code in the <a href="https://superuser.com/a/318073/620229">accepted answer</a> looked like this:</p>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">set</span> -- value1 value2 <span class="token string">"value with spaces"</span><br><span class="token keyword">for</span> a<span class="token punctuation">;</span> <span class="token keyword">do</span><br>    <span class="token builtin class-name">shift</span><br>    <span class="token keyword">for</span> b<span class="token punctuation">;</span> <span class="token keyword">do</span><br>        <span class="token builtin class-name">printf</span> <span class="token string">"%s - %s<span class="token entity" title="\n">\n</span>"</span> <span class="token string">"<span class="token variable">$a</span>"</span> <span class="token string">"<span class="token variable">$b</span>"</span><br>    <span class="token keyword">done</span><br><span class="token keyword">done</span></code></pre>
<p>I was somewhat confused by the rather short <code>for</code> loop constructions here, and ended up looking it up in the <a href="https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Looping-Constructs">looping constructs section of the Bash manual</a>.</p>
<p>What looked odd to me was that there is no <code>in &lt;values&gt;</code> part to either of the <code>for</code> loops. I am used to seeing (and writing) <code>for var in x y z</code> or similar. So what were these loop constructions iterating over? Well, the Bash manual section says this (emphasis mine):</p>
<p><em><code>for name [ [in [words …] ] ; ] do commands; done</code></em></p>
<p><em>Expand words (see Shell Expansions), and execute commands once for each member in the resultant list, with name bound to the current member. <strong>If ‘in words’ is not present, the for command executes the commands once for each positional parameter that is set, as if ‘in &quot;$@&quot;’ had been specified</strong> (see Special Parameters).</em></p>
<p>So these <code>for</code> loops are processing the positional parameters in <code>$1</code>, <code>$2</code> and <code>$3</code> which were set by the <code>set</code> command on the first line, i.e. the values <code>value1</code>, <code>value2</code>, and <code>value with spaces</code> respectively.</p>
<p>So there you go - it's sort of obvious now I think about it - what else would the loop constructs be processing? Anyway - onwards and upwards!</p>

<hr>
<ul><li>Next: <a href="/blog/2020/28/12/waiting-for-jobs-and-the-concept-of-the-shell/">Waiting for jobs, and the concept of the shell</a></li><li>Previous: <a href="/blog/2020/8/11/the-myriad-meanings-of-pwd-in-unix-systems/">The myriad meanings of pwd in Unix systems</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2020/3/12/implicit-values-in-bash-for-loop-construct/ -->
  </body>
</html>
