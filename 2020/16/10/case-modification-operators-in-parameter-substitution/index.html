<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case modification operators in parameter substitution</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>Case modification operators in parameter substitution</h1>

<time datetime="2020-10-16">16 Oct 2020</time><a href="/blog/tags/autodidactics/" class="post-tag">autodidactics</a><a href="/blog/tags/shell/" class="post-tag">shell</a>

<p><em>Today I learned that in addition to the usual ways of uppercasing strings, Bash 4 brought the addition of case modification operators to the parameter substitution family.</em></p>
<p>Spending a pleasant coffee on my day off today I looked at tackling another challenge in <a href="https://exercism.io/tracks/bash">Exercism's bash track</a> - <a href="https://exercism.io/tracks/bash/exercises/acronym/solutions/e70a7282d2fb4856bbeb1c2ae745d3c4">Acronym</a>. The requirement included ensuring that any generated acronym (I guess these might actually be initialisms, but that's a discussion for another time) was completely in uppercase, regardless of the source.</p>
<p>In my solution, I resorted to the usual use of <code>tr</code>, like this:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">tr</span> <span class="token string">'[:lower:]'</span> <span class="token string">'[:upper:]'</span></code></pre>
<p>All good. I like to peruse others' solutions, to learn from how they might have tackled the same challenge, and I came across something that looked rather odd at first, as I'd never seen it before. It was a solution by TopKech and looks like this:</p>
<pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">OUTPUT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'s/$/ /'</span> -e <span class="token string">'s/\([^ \-]\)[^ \-]*[ \-]/\1/g'</span> -e <span class="token string">'s/^ *//'</span><span class="token variable">)</span></span><br><span class="token builtin class-name">echo</span> <span class="token variable">${OUTPUT<span class="token operator">^^</span>}</span></code></pre>
<p>What's that <code>^^</code> in the second line?</p>
<p>Turns out that it's a case modification operator, within a parameter substitution context. What's more, it is &quot;relatively&quot; new, in that it was introduced with <a href="https://tldp.org/LDP/abs/html/bashver4.html">version 4 of Bash</a>. I say &quot;relatively&quot;, as version 4 was introduced way back in 2009; but having been a macOS user for a while, I'd been stuck with version 3 due to Apple's issues with the GPL v3 licence (prompting them not to ship any version beyond 3, and even go so far as to make <code>zsh</code> the default shell on newer versions of the OS).</p>
<p>Version 4 of Bash came with lots of wonderful stuff, including 4 separate case modification operators, that are illustrated in the <a href="https://tldp.org/LDP/abs/html/bashver4.html">Advanced Bash Scripting Guide - Chapter 37. Bash, versions 2, 3, and 4</a> and can be summarised thus:</p>
<p>|-|-|<br>
|<code>${var^}</code>|Make first char of <code>var</code> value uppercase|<br>
|<code>${var^^}</code>|Make all chars of <code>var</code> value uppercase|<br>
|<code>${var,}</code>|Make first char of <code>var</code> value lowercase|<br>
|<code>${var,,}</code>|Make all chars of <code>var</code> value lowercase|</p>
<p>I didn't know that, but <a href="https://twitter.com/qmacro/status/1317046383950659584">I do now!</a></p>

<hr>
<ul><li>Next: <a href="/blog/2020/1/11/the-subtle-art-of-quoting-newline-characters/">The subtle art of quoting newline characters</a></li><li>Previous: <a href="/blog/2020/11/10/mid-and-shell-parameter-expansion/">MID$ and shell parameter expansion</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2020/16/10/case-modification-operators-in-parameter-substitution/ -->
  </body>
</html>
