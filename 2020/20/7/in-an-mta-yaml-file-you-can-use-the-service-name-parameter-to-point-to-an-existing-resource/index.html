<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>In an mta.yaml file you can use the service-name parameter to point to an existing resource</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>In an mta.yaml file you can use the service-name parameter to point to an existing resource</h1>

<time datetime="2020-07-20">20 Jul 2020</time><a href="/blog/tags/autodidactics/" class="post-tag">autodidactics</a><a href="/blog/tags/cloudfoundry/" class="post-tag">cloudfoundry</a>

<p><em>In <code>mta.yaml</code> files you can use the <code>service-name</code> parameter to point to an existing service instance with a different name than the resource.</em></p>
<p>When the contents of a <a href="https://help.sap.com/viewer/4505d0bdaf4948449b7f7379d24d0f0d/2.0.03/en-US/33548a721e6548688605049792d55295.html">multi-target application file</a> file have been created or modified automatically for you, and there are references to generated service instance names, you don't have to globally replace those names to match whatever service instances you may already have, but instead you can add the <code>service-name</code> <a href="https://help.sap.com/viewer/4505d0bdaf4948449b7f7379d24d0f0d/2.0.03/en-US/4050fee4c469498ebc31b10f2ae15ff2.html">parameter</a> in the resource definition.</p>
<p>For example, when adding a new Workflow module to an existing (<code>mta.yaml</code>-based) project, the generator will add something like this:</p>
<pre><code>modules:
  - name: OrderProcess
    type: com.sap.application.content
    path: OrderProcess
    requires:
      - name: workflow_mta
        parameters:
          content-target: true
resources:
  - name: workflow_mta
    parameters:
      service-plan: standard
      service: workflow
    type: org.cloudfoundry.managed-service
</code></pre>
<p>It's often the case that you already have a Workflow service instance, but not with the generated name <code>workflow_mta</code>. So after modifying the resource <code>type</code> to be <code>org.cloudfoundry.existing-service</code>, you can save some time and avoid changing all occurrences of <code>workflow_mta</code> to match your actual instance name (e.g. <code>my-workflow-instance</code>). Instead, use the <code>service-name</code> parameter, like this:</p>
<pre><code>modules:
  - name: OrderProcess
    type: com.sap.application.content
    path: OrderProcess
    requires:
      - name: workflow_mta
        parameters:
          content-target: true
resources:
  - name: workflow_mta
    parameters:
      service-name: my-workflow-instance
    type: org.cloudfoundry.existing-service
</code></pre>
<blockquote>
<p>I learned this a while ago but promptly forgot about it until now, when I needed it again.</p>
</blockquote>

<hr>
<ul><li>Next: <a href="/blog/2020/20/7/git-diff-can-emit-different-exit-codes/">git diff can emit different exit codes</a></li><li>Previous: <a href="/blog/2020/20/6/removing-the-knob-on-a-la-pavoni-steam-valve/">Removing the knob on a La Pavoni steam valve</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2020/20/7/in-an-mta-yaml-file-you-can-use-the-service-name-parameter-to-point-to-an-existing-resource/ -->
  </body>
</html>
