<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New tmux panes and windows in the right directory</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>New tmux panes and windows in the right directory</h1>

<time datetime="2021-04-01">01 Apr 2021</time><a href="/blog/tags/autodidactics/" class="post-tag">autodidactics</a><a href="/blog/tags/tmux/" class="post-tag">tmux</a>

<p><em>I finally got round to looking into how to be in the &quot;right&quot; directory when I create a new window or pane in <code>tmux</code>. Here's what I did.</em></p>
<p>I've been starting multiple <code>tmux</code> sessions, one for each project I'm working on, and ensuring that I'm in the &quot;right&quot; base directory for each of those projects before actually creating the corresponding <code>tmux</code> session. That way, each new window or pane I open places me in that project's base directory. Which isn't too bad.</p>
<p>But I'm trying to move to a simpler workflow, and use fewer <code>tmux</code> sessions. This meant I hit on that possibly age-old issue of being in the &quot;wrong&quot; directory when I create a new window or pane, and having to <code>cd</code> to where I want to be. Which is usually <em>where I just was</em> before invoking the new window or pane command!</p>
<p>I did a bit of digging and found the answer, which was quite simple in the end - and I would have known about it with a better level of knowledge about <code>tmux</code>. I had written a short essay on that subject: <a href="https://qmacro.org/2021/03/31/deeper-connections-to-everyday-tools/">Deeper connections to everyday tools</a>, and in that essay, I'd made a reference to this new discovery.</p>
<p><a href="https://twitter.com/ceedee666/status/1377501505226477569">Christian Drumm asked</a> me today about this very thing, so I thought I'd write this short entry that I could refer to for Christian and also for others.</p>
<p>Basically it involves using the <code>-c</code> option when creating a new window or pane, and passing the value of the built-in variable <code>pane_current_path</code> (see the <a href="https://man7.org/linux/man-pages/man1/tmux.1.html">manual</a> for info).</p>
<p>I initially got this info from a <a href="https://gist.github.com/william8th/faf23d311fc842be698a1d80737d9631">gist</a> by <a href="https://gist.github.com/william8th">William Heng</a> but <a href="https://unix.stackexchange.com/a/12091/87597">this Stack Exchange answer</a> by Chris Johnsen has some great background which is worth reading too.</p>
<p>The change I made to my <code>tmux</code> configuration is in this commit:</p>
<p><a href="https://github.com/qmacro/dotfiles/pull/2/commits/2664669d5922e640b232f185e2045e412852f47c">https://github.com/qmacro/dotfiles/pull/2/commits/2664669d5922e640b232f185e2045e412852f47c</a></p>
<p>and looks like this:</p>
<pre><code>bind c new-window -c &quot;#{pane_current_path}&quot;
bind '-' split-window -c &quot;#{pane_current_path}&quot;
bind '\' split-window -h -c &quot;#{pane_current_path}&quot;
bind C new-window
bind '_' split-window
bind '|' split-window -h
</code></pre>
<p>Basically I'm now set up to enjoy the new behaviour (opening new windows and panes in the current working directory) when I use the keys I normally use:</p>
<ul>
<li><code>c</code> - new window</li>
<li><code>-</code> - new vertically split pane</li>
<li><code>\</code> - new horizontally split pane</li>
</ul>
<p>But I've added three extra bindings in case I want the old behaviour, bindings to the &quot;shifted&quot; version of those keys:</p>
<ul>
<li><code>C</code> - new window</li>
<li><code>_</code> - new vertically split pane</li>
<li><code>|</code> - new horizontally split pane</li>
</ul>
<p>I've not found myself using these extra bindings for the old behaviour yet, and I'll probably end up removing them.</p>
<p>Anyway, there you have it. Thank you William and Chris for the help!</p>

<hr>
<ul><li>Next: <a href="/blog/2021/4/4/mainframes-sdsf-and-github-actions/">Mainframes, SDSF and GitHub Actions</a></li><li>Previous: <a href="/blog/2021/31/3/deeper-connections-to-everyday-tools/">Deeper connections to everyday tools</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2021/1/4/new-tmux-panes-and-windows-in-the-right-directory/ -->
  </body>
</html>
