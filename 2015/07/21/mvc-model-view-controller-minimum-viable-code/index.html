<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MVC - Model View Controller, Minimum Viable Code</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/">Home</a></li>
        <li class="nav-item"><a href="/about/">About</a></li>
        <li class="nav-item"><a href="/posts/">Archive</a></li>
        <li class="nav-item"><a href="/tags/">Tags</a></li>
        <li class="nav-item"><a href="/feed.xml">Feed</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>MVC - Model View Controller, Minimum Viable Code</h1>

<time datetime="2015-07-21">21 Jul 2015</time><a href="/tags/atom/" class="post-tag">atom</a><a href="/tags/controller/" class="post-tag">controller</a><a href="/tags/fragment/" class="post-tag">fragment</a><a href="/tags/mvc/" class="post-tag">mvc</a><a href="/tags/snippets/" class="post-tag">snippets</a><a href="/tags/startup/" class="post-tag">startup</a><a href="/tags/sublime/" class="post-tag">sublime</a><a href="/tags/ultisnip/" class="post-tag">ultisnip</a><a href="/tags/view/" class="post-tag">view</a><a href="/tags/vim/" class="post-tag">vim</a>

<p><strong><a href="/2015/07/04/30-days-of-ui5/">30 Days of UI5</a> â€” Day 18 by <a href="//qmacro.org/about/">DJ Adams</a></strong></p>
<p><img src="/img/2018/02/Screen-Shot-2015-07-19-at-18.58.14-1.png" alt="View and controller screenshot"></p>
<p>The solid Model View Controller implementation in UI5 forcesÂ the separation of concerns. The logical placeÂ for models, views and controllersÂ are files, in (usually) separate folders. Views, with specific file extensions, in a folder thatâ€™s usually called â€œviewsâ€, and controllers, with specific file extensions, in a folder called â€œcontrollersâ€. And models elsewhere too.</p>
<p>This means that if youâ€™re wanting to try something out quickly, and itâ€™s a little bit more than a Hello World construction, then youâ€™re off creating files and folders from the start before you can properly start thinking about the actual app idea you want to explore.</p>
<p>That is, unless you use a â€œMinimum Viable Codeâ€ technique. I like to think that itâ€™s due to aÂ combination of the three great virtues of a programmer (<a href="http://c2.com/cgi/wiki?LazinessImpatienceHubris">laziness, impatience and hubris</a>) that led to thisÂ approach :-).</p>
<p>Creating a folder structure and getting the right files in place does not go well with the â€œquicklyâ€ part of â€œtry something out quicklyâ€. Trying something out, for me, means ideally using just a single file. Itâ€™s fast, you can see everything in one place, and youâ€™re not creating unnecessary clutter. But when I want to try something out also, I also want to ensureÂ that the code I write is clean and separated. Which for me implies declarative views and fragments in XML.</p>
<p>Luckily, for nearlyÂ all of the cases where Iâ€™ve wanted to try something out, Iâ€™ve found that this single file technique works well. I can have one or more views, and fragments, all declared in XML, and one or more controllers too. And within that space I can declare models too.</p>
<p>Hereâ€™s how it works:</p>
<ul>
<li>I start out with a skeletal index.html with a UI5 bootstrap already there, and theÂ HTMLÂ body element defined properly</li>
<li>I add a simple triple (or <a href="http://www.beeradvocate.com/beer/style/58/">tripel</a>) Â of : view, corresponding controller, and what I call â€˜startup codeâ€™</li>
<li>I can then add controls to the view, functions to the controller, and off I go</li>
<li>I use jQuery to identify the XML views and fragments, and construct the view instances in UI5 that way</li>
</ul>
<p>And hereâ€™s an example:</p>
<p><img src="/img/2018/02/Screen-Shot-2015-07-19-at-18.09.27-725x1024.png" alt="MVC code"></p>
<p>Hereâ€™s a brief rundown of what you see:</p>
<p><strong>9-16</strong>: This is the UI5 bootstrap, nothing unusual here</p>
<p><strong>18-28</strong>: Here we have a script element that is of a made-up type â€œui5/xmlviewâ€. This could be pretty much anything, as long as the browser doesnâ€™t try to process it. Itâ€™s a technique used in templating systems. This contains some XML, which as you can see is a small but perfectly formed view definition (which incidentally conforms to the <a href="/2015/07/19/ui5-and-coding-standards/">UI5 Coding Standards explained in a previous post</a> in this series.</p>
<p><strong>31-36</strong>: This is the local controller definition, which is referenced in the Viewâ€™s controllerName attribute (in line 20). It has the onPress handler for the Buttonâ€™s press event.</p>
<p><strong>38-40</strong>: This is the startup code. It instantiates the XML View, getting the value for the viewContent property via jQuery from the script element we saw earlier, and then simply places that View in the body, via the â€œcontentâ€ ID, as usual.</p>
<p>And thatâ€™s pretty much it. You can add as many views as you want using the script element technique; I also use this technique for fragments too, and specify a made-up type of â€œui5/xmlfragmentâ€ instead.</p>
<p>Itâ€™s a great way to write simple one-file applications, especially for prototyping. I have written snippets to help me with this. I have been somewhat fickle when it comes to editors, so have left a trail of semi-finished snippet libraries for Sublime (<a href="https://github.com/qmacro/SublimeUI5">SublimeUI5</a>) and Atom (<a href="https://github.com/qmacro/ui5-snippets">ui5-snippets</a>), but have finally come full circle to my first love, vim. <a href="https://www.youtube.com/watch?v=nN1PYHa-YXQ">Hereâ€™s a quick screencast</a> of using my snippets in vim (powered by <a href="https://github.com/SirVer/ultisnips">UltiSnips</a>) to create aÂ Minimum Viable Code MVC style app:</p>
<iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/nN1PYHa-YXQ" width="560"></iframe>

<hr>
<script src="https://utteranc.es/client.js" repo="qmacro/qmacro.github.io" issue-term="title" label="ğŸ’¬" crossorigin="anonymous" async></script>

<hr>
<ul><li>Next: <a href="/2015/07/22/a-short-ui5-debugging-journey/">A Short UI5 Debugging Journey</a></li><li>Previous: <a href="/2015/07/20/ui5-and-fiori-the-story-of-open-and-free/">UI5 and Fiori - The Story of Open and Free</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /2015/07/21/mvc-model-view-controller-minimum-viable-code/ -->
  </body>
</html>
