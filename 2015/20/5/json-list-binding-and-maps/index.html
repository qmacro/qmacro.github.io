<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON List Binding and maps</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>JSON List Binding and maps</h1>

<time datetime="2015-05-20">20 May 2015</time><a href="/blog/tags/aggregation/" class="post-tag">aggregation</a><a href="/blog/tags/binding/" class="post-tag">binding</a><a href="/blog/tags/json/" class="post-tag">json</a><a href="/blog/tags/ui5/" class="post-tag">ui5</a>

<p>This morning, on a long train journey up from near Reading to Barnsley, I was hacking on a UI5 app. I had a custom module to munge some JSON data into the shape I needed, and was binding the items aggregation of a List control to part of the resulting data structure.</p>
<p>In the developer console, I was examining the data structure in the JSON Model that was set on the List, and did a double-take. I’d mistakenly generated a map rather than an array, as the value of the property to which I wanted to bind the items aggregation. Naturally, I thought, it needed to be an array, but I had spotted that it was a map – the output of a nice little reduce function I was nicely proud of, with my functional JavaScript hat on (but that’s another story).</p>
<p>So I looked across to the app itself, expecting the List to be empty. But it wasn’t! It was showing exactly what I had expected to see, had the value of the property been an array. What was going on?!</p>
<p>After some digging, I found out. Introduced on 10 Dec 2014, within the 1.28.0 release, was a modest feature:</p>
<address>**[[FEATURE] sap.ui.model.json.JSONListBinding: iterate over maps](https://github.com/SAP/openui5/commit/38ab764601c061d5fbf256f8bb4703cd4ec89022)**  
 Enhance JSONListBinding to iterate over maps (by key), not just over  
 arrays (by index).</address>Interesting! A small modification to the JSON List Binding to treat the indices of a map as if they were of an array. After all, in JavaScript, arrays and maps are perhaps more closely related than one might think.
<p>I set about confirming what I’d found with a small test on Plunkr, “<a href="http://plnkr.co/edit/QQU4bPNb5Kg65vZ8vnad?p=preview">Aggregation Binding Test</a>“:</p>
<p><img src="/blog/img/2015/05/Screen-Shot-2015-05-20-at-19.11.18.png" alt="image"></p>
<p>But don’t take my word for it – the author has also added a test to the <a href="https://openui5.hana.ondemand.com/test-resources/sap/ui/core/qunit/JSONListBinding.qunit.html">JSON List Binding QUnit tests</a>:</p>
<p><img src="/blog/img/2015/05/Screen-Shot-2015-05-20-at-19.14.05.png" alt="image"></p>
<p>It makes sense to blur the distinction between maps and arrays when it comes to aggregation bindings; already I have a use for it, and I didn’t even know the feature had been implemented!</p>

<hr>
<ul><li>Next: <a href="/blog/2015/3/7/email-discipline/">Email Discipline</a></li><li>Previous: <a href="/blog/2015/22/4/opensap-experiences/">openSAP Experiences</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2015/20/5/json-list-binding-and-maps/ -->
  </body>
</html>
