<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merging lists with UI5</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>Merging lists with UI5</h1>

<time datetime="2015-07-25">25 Jul 2015</time><a href="/blog/tags/customdata/" class="post-tag">customdata</a><a href="/blog/tags/jquery/" class="post-tag">jquery</a><a href="/blog/tags/openui5/" class="post-tag">openui5</a>

<p><strong><a href="/2015/07/04/30-days-of-ui5/">30 Days of UI5</a> — Day 22 by <a href="https://uk.linkedin.com/pub/christopher-choy/53/21/b71">Chris Choy</a></strong></p>
<p>Whilst recently developing a custom UI5 app with an SAP PI backend, I came across some useful mechanisms. My aim was to merge 2 sets of data from 2 service calls into an Object List Item.  Having already bound one set of data my XML View my initial thought was to perhaps use a formatter and pass in 2 arrays of objects and manipulate the data within the Formatter.js file. As you probably guessed, this simply didn’t work, I should mention that both service calls return data in a JSON format rather than standard OData. My next approach was to manipulate the 2 arrays in the View’s controller and merge them both into a new sorted array assigning it to the Component’s Model. One of the benefits of doing this is that you can define your own attribute names and data which is then globally accessible within the app.</p>
<p>Using the code below you can specify a path to set your new data:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>oModel<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"/newPath"</span><span class="token punctuation">,</span> mergedArray<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>One other related issue was the searching of specific object attributes within an array of objects. The context of this search was to allow a user to select an item from an Object List Item and load additional data in a new View. Having already passed the relevant parameters within my Router it was jQuery to the rescue. The jQuery.grep function allows you to perform wildcard search on an array of attributes without the need to manually loop through each element. By passing an array as an argument a test against a defined index is performed returning all the entries that satisfy the function as a new array.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> aResult <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>dataArray<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <br>  <span class="token keyword">return</span> e<span class="token punctuation">.</span>attributeName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">"searchAttribute"</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>One last interesting mechanism used was the storing of hidden Custom Data objects within an XML View. Using the following:</p>
<pre><code>xmlns:app=&quot;http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1&quot; 

&lt;ObjectListItem 
  title=”List” 
  app:key=&quot;{hiddenKey}&quot; /&gt;
</code></pre>
<p>you can access the Custom Data object using the data() method within the Controller of your View.</p>
<p>For additional information checkout the following links <a href="http://api.jquery.com/jquery.grep/">jQuery.grep</a> and <a href="http://help.sap.com/saphelp_uiaddon10/helpdata/en/91/f0c3ee6f4d1014b6dd926db0e91070/content.htm">CustomData objects</a>.</p>
<p></p>

<hr>
<ul><li>Next: <a href="/blog/2015/26/7/taming-the-resource-model-files/">Taming the Resource Model Files</a></li><li>Previous: <a href="/blog/2015/24/7/spreading-the-ui5-message/">Spreading the UI5 Message</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2015/25/7/merging-lists-with-ui5/ -->
  </body>
</html>
