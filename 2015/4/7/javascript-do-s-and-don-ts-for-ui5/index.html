<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Do&#39;s and Don&#39;ts for UI5</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>JavaScript Do&#39;s and Don&#39;ts for UI5</h1>

<time datetime="2015-07-04">04 Jul 2015</time><a href="/blog/tags/javascript/" class="post-tag">javascript</a><a href="/blog/tags/openui5/" class="post-tag">openui5</a>

<p><strong><a href="/2015/07/04/30-days-of-ui5/">30 Days of UI5</a>  — Day 7 by <a href="//qmacro.org/about/">DJ Adams</a></strong></p>
<p><img src="/blog/img/2018/02/Screen-Shot-2015-07-04-at-10.00.14.png" alt="Screenshot of coding issues menu item"></p>
<p>In recent versions of the SDK you’ll find a new section called “<a href="https://openui5.hana.ondemand.com/#docs/guide/030fcd14963048218488048f407f8f34.html">Coding Issues to Avoid</a>“. It’s great to see this take shape and start to become formalised. Some of them are obvious, at least to some folk, but it’s always helpful to have a reference.</p>
<p>Let’s have a look at a couple of the Do’s and Don’ts here.</p>
<p>The top item on my list is “Don’t use private and protected methods or properties of UI5″. Far too often, I see code that refers to internal properties of UI5 controls, especially to the arrays and maps that are managed internally (for the aggregations, for example). I think it’s fair to say that 98% of the time, the use here is totally wrong, and there’s a public API to give you what you want. There have been a couple of instances in the past where I’ve seen something for which there appeared no equivalent ‘legal’ alternative, but that could be down to API maturity, or lack of documentation.</p>
<p>Related to this item is almost the antithesis, which is to use (create) properties that inadvertently clobber properties of the same name in an existing context. A great example of this is within a controller definition. There’s a nice pattern, which can be seen in many places including the reference apps in the SAP Web IDE, where in any given controller you would create controller properties to refer to the related view, and often the domain or view properties model, in the init event, like this:</p>
<pre class="language-javascript"><code class="language-javascript">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">"local.controller"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br><br>  <span class="token literal-property property">_oView</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br> <br>  <span class="token function-variable function">onInit</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_oView <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br> <br>  <span class="token function-variable function">onSomeEvent</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>_oView<span class="token punctuation">.</span><span class="token function">someFunction</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token operator">...</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>But sometimes the developer, averse to underscores, will write it like this:</p>
<pre class="language-javascript"><code class="language-javascript">sap<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">"local.controller"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br><br>  <span class="token literal-property property">oView</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br> <br>  <span class="token function-variable function">onInit</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>oView <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br> <br>  <span class="token function-variable function">onSomeEvent</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>oView<span class="token punctuation">.</span><span class="token function">someFunction</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token operator">...</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>What actually happens is that the call to</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>oView <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>is clobbering the internal property oView of ‘this’ (the controller), which is pointing at the view it’s related to. Luckily what it’s being clobbered with in this small (underscore-less) antipattern is another reference to the view itself, so not much immediate harm done, but it’s not entirely safe or future proof.</p>
<p>Another interesting best practice described in this section of the SDK relates to internationalisation (i18n). What one should do is to use placeholders (such as {0}) in more complete sentences in translateable resources. What one often finds is that application texts are fragmented into short phrases and built up with concatenation, along with variables.</p>
<p>The problem is that sentence structure varies across languages – as described in the “Don’t” example in this section, a typical example is where the verb goes. It’s better to avoid programmatic text construction, and leave it to the translation experts. Go long, and go home.</p>
<p>Anyway, have a look at the rest of this <a href="https://openui5.hana.ondemand.com/#docs/guide/030fcd14963048218488048f407f8f34.html">JavaScript Code Issues</a> section in the SDK, plus there’s a <a href="https://openui5.hana.ondemand.com/#docs/guide/9d87f925dfbb4e99b9e2963693aa00ef.html">CSS Styling Issues</a> section too!</p>

<hr>
<ul><li>Next: <a href="/blog/2015/4/7/lightweight-notifications-with-the-message-strip/">Lightweight notifications with the Message Strip</a></li><li>Previous: <a href="/blog/2015/4/7/welcome-to-30-days-of-ui5/">Welcome to 30 Days of UI5!</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2015/4/7/javascript-do-s-and-don-ts-for-ui5/ -->
  </body>
</html>
