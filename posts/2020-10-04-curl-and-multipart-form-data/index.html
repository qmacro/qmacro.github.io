<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://qmacro.org/posts/2020-10-04-curl-and-multipart-form-data/"><link href="/assets/main.7bd42185b92fd44f892e.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>curl and multipart/form-data | DJ Adams</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="curl and multipart/form-data"><meta property="og:site_name" content="DJ Adams"><meta property="og:type" content="website"><meta property="og:url" content="https://qmacro.org/posts/2020-10-04-curl-and-multipart-form-data/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@qmacro"><meta name="description" content="curl and multipart/form-data 04 Oct 2020 | 1 min read In reading through Mr Rob&#39;s ix script, I discovered something about curl that I hadn&#39;t..."><meta property="og:description" content="curl and multipart/form-data 04 Oct 2020 | 1 min read In reading through Mr Rob&#39;s ix script, I discovered something about curl that I hadn&#39;t..."><meta name="description" content="curl and multipart/form-data 04 Oct 2020 | 1 min read In reading through Mr Rob&#39;s ix script, I discovered something about curl that I hadn&#39;t..."><meta property="og:image" content="https://qmacro.org/images/DJA-head.png"><meta name="twitter:image" content="https://qmacro.org/images/DJA-head.png"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/">DJ Adams</a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/about">About Me</a></li><li class="nav-item"><a href="/talks">Talks</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/feed.xml">Feed</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>curl and multipart/form-data</h1><div class="post__details"><time datetime="2020-10-04">04 Oct 2020 </time><span>| </span><span>1 min read</span></div></header><main class="post__content"><p><em>In <a href="/autodidactics/2020/10/03/using-exec-to-jump.html">reading through</a> <a href="https://rwx.gg/">Mr Rob</a>'s <a href="https://gitlab.com/rwxrob/dotfiles/-/blob/master/scripts/ix"><code>ix</code></a> script, I discovered something about <code>curl</code> that I hadn't known about.</em></p><p>The script's key line is this:</p><pre class="language-shell"><code class="language-shell"><span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> -s -F <span class="token string">'f:1=&lt;-'</span> http://ix.io<span class="token variable">)</span></span></code></pre><p>My gaze was immediately drawn to this bit: <code>-F 'f:1=&lt;-'</code>. Part of this initially cryptic incantation is actually down to the instructions from the <a href="http://ix.io">ix.io</a> website itself, in the TL;DR section.</p><p>Checking the <a href="https://curl.haxx.se/docs/manpage.html"><code>curl</code> documentation</a> for the <code>-F</code> option, I discover that this venerable command line HTTP client can send multipart/form-data payloads, with files or file contents. So, breaking this incantation down, we have:</p><table><thead><tr><th>Part</th><th>Meaning</th></tr></thead><tbody><tr><td><code>-F</code></td><td>send a POST with multipart/form-data content</td></tr><tr><td><code>f:1</code></td><td>the name of the form field that the website is expecting</td></tr><tr><td><code>&lt;</code></td><td>send as file contents (rather than an actual file)</td></tr><tr><td><code>-</code></td><td>read the contents from STDIN</td></tr></tbody></table><p>And in the context of where this is being executed, STDIN is the <code>ix</code> script's STDIN, in other words, whatever is piped into <code>ix</code> when it's invoked.</p><p>In response to the form being POSTed, the <a href="http://ix.io">ix.io</a> website returns the newly minted unique pastebin URL that was created, and this is saved into the <code>url</code> variable in the script, to be shared in various ways.</p><p>Lovely!</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/autodidactics/">#autodidactics</a> <a href="/tags/curl/">#curl</a></div><nav class="post__pagination"><a href="/posts/2020-10-05-improving-my-shell-scripting/"><span>←</span> <span>Improving my shell scripting</span> </a><a href="/posts/2020-10-04-check-command-available/"><span>Checking a command is available before use</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a href="https://github.com/qmacro" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://www.youtube.com/djadams-qmacro" target="_blank" rel="noopener noreferrer">YouTube</a></li><li><a href="https://twitter.com/qmacro" target="_blank" rel="noopener noreferrer">Twitter</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>