<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REST, Google, and idempotency</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>REST, Google, and idempotency</h1>

<time datetime="2002-09-02">02 Sep 2002</time>

<p>Sam has <a href="http://radio.weblogs.com/0101679/2002/09/02.html#a784">asked</a> Mark Baker a question, or rather, presented an apparent conundrum. It was a pleasant subject to ponder as I was rolling out the pastry for some apple and blackberry pies, and on returning to the keyboard, I’ve decided to put some of my own thoughts down on Sam’s points, even though I’m still learning about all this stuff.</p>
<p><em>Point #1: ‘GETs must not have side effects’ is perhaps REST’s most cherished axiom</em></p>
<p>If I had to pick one as being the most cherished, I’d go for the one that says that anything that’s important is a first class URI citizen (i.e. addressable by a URI). The ‘no side effects’ axiom appears to be ‘just’ a natural follow on from the presentation of how the HTTP verbs are supposed to be understood and used.</p>
<p><em>Point #2: The 1001st call to Google is different, and [so] the [GET] query is not idempotent</em></p>
<p>In the SOAP context, a SOAP Fault will be returned by Google if you exceed your limit of 1000 calls in a day. Returning a SOAP Fault within the context of an HTTP 200 OK status is one thing. But percolating this response up to a REST (i.e. HTTP) context would imply returning, say, an HTTP 403 FORBIDDEN, with a body explaining why. This is a valid response to a GET.Having different results, different status codes, returned on a GET query doesn’t necessarily imply any side effects. Indeed, in our beloved canonical stock-quote example, we don’t even need to regard the HTTP status codes to see that results can be different on the same GET query (the stock market would be a very dull place if they weren’t). And what about Google itself? The same search query one day will not necessarily return the same results the next day. Different query results, no implied side-effects.</p>
<p><em>Point #3: So, what do you do?</em></p>
<p>Nothing different. Through REST-tinted spectacles, the 1001th GET receives a 403, and you act accordingly. No lives have been lost, no state has been changed. Potentatus idem manet. As the saying goes. Well. It does now.</p>
<p>Of course, these are just my thoughts. Apologies to Sam if I’ve misunderstood his points, and to Mark if I’ve potentially muddied the waters.</p>
<p>P.S. maybe I should have used ‘potestas’…</p>
<p>P.P.S. I’m a grey, not a black-and-white, person</p>

<hr>
<ul><li>Next: <a href="/blog/2002/3/9/mozilla-bookmark-this-group-of-tabs/">Mozilla &quot;Bookmark This Group of Tabs&quot;</a></li><li>Previous: <a href="/blog/2002/31/8/cacheing-on-xslt-service/">Cacheing on XSLT service</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2002/2/9/rest-google-and-idempotency/ -->
  </body>
</html>
