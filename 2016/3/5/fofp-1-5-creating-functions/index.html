<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOFP 1.5 Creating functions</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>FOFP 1.5 Creating functions</h1>

<time datetime="2016-05-03">03 May 2016</time><a href="/blog/tags/language-ramblings/" class="post-tag">language-ramblings</a>

<p>Part of the <a href="/2016/05/03/fofp">Fundamentals of Functional Programming</a> document.</p>
<p>Prev: <a href="/2016/05/03/fofp-1-4-a-different-approach-with-map">FOFP 1.4 A different approach with map</a></p>
<p>In our previous example, we defined a helper function <code>square</code> and used it like this:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>nums<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>square<span class="token punctuation">)</span><br><span class="token comment">// [1, 4, 9, 16, 25]</span></code></pre>
<h2 id="helper-functions" tabindex="-1">Helper functions <a class="direct-link" href="#helper-functions" aria-hidden="true">#</a></h2>
<p>Let's go one step further and write something that will produce helper functions for us. We'll move away from squaring numbers, but stay on the simple theme of increasing integers.</p>
<p>Consider this:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">times</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> x <span class="token operator">*</span> n<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>What's going on? We have a function, which is returning a function. Yes, it's that higher-order nature again. Here we're defining a function that takes a multiple <code>n</code>. The scope defined by that function's block (the outermost <code>{...}</code>) closes over the value passed for <code>n</code>, creating a so-called &quot;closure&quot;, with the value forged into the inner function that's returned.</p>
<p>The inner function also expects a value <code>x</code> that will be multiplied by that value of <code>n</code>.</p>
<p>Let's have a look at how we might use that:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> double <span class="token operator">=</span> <span class="token function">times</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> triple <span class="token operator">=</span> <span class="token function">times</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>So take <code>triple</code>. What is it that we have, as a result of calling <code>times(3)</code>? Well, we have a function expecting an argument:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">triple</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><br><span class="token comment">// 18</span></code></pre>
<p>So really, with <code>times</code>, we have a function, that takes a value, and produces a function, that takes a value, that produces a value. If you're familiar with type signatures at all, for example from Haskell, you'd represent this like so:</p>
<pre><code>f :: a -&gt; (a -&gt; a)
</code></pre>
<p>or simply:</p>
<pre><code>f :: a -&gt; a -&gt; a
</code></pre>
<h2 id="partial-application" tabindex="-1">Partial application <a class="direct-link" href="#partial-application" aria-hidden="true">#</a></h2>
<p>You could even use <code>times</code> like this:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><br><span class="token comment">// 12</span></code></pre>
<p>In some ways, our simple <code>times</code> function embodies some of the essence of partial application [4.12.1.4]. Calling <code>times</code> with a single argument:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></code></pre>
<p>is a partial application, and results in a function which is waiting for the second argument:</p>
<pre><code>&lt;function-produced-by-times(3)&gt;(4)
</code></pre>
<h2 id="using-helpers" tabindex="-1">Using helpers <a class="direct-link" href="#using-helpers" aria-hidden="true">#</a></h2>
<p>Now we have everything we need to use <code>map</code> to process our list, with a helper function:</p>
<pre class="language-javascript"><code class="language-javascript">nums<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment">// [2, 4, 8, 8, 10]</span></code></pre>
<p>Neat!</p>
<p>Next: <a href="/2016/05/04/fofp-2-1-a-look-at-filter">FOFP 2.1 A look at filter</a></p>

<hr>
<ul><li>Next: <a href="/blog/2016/3/5/fofp-fundamentals-of-functional-programming/">FOFP Fundamentals of functional programming</a></li><li>Previous: <a href="/blog/2016/3/5/fofp-1-4-a-different-approach-with-map/">FOFP 1.4 A different approach with map</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2016/3/5/fofp-1-5-creating-functions/ -->
  </body>
</html>
