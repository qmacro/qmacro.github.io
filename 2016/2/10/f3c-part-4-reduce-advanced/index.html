<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F3C Part 4 - Reduce advanced</title>
    <meta name="description" content="Reserving the right to be wrong.">
    <link rel="stylesheet" href="/blog/css/index.css">
    <link rel="stylesheet" href="/blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/blog/feed/feed.xml" type="application/atom+xml" title="DJ Adams">
    <link rel="alternate" href="/blog/feed/feed.json" type="application/json" title="DJ Adams">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/blog/">DJ Adams</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/blog/">Home</a></li>
        <li class="nav-item"><a href="/blog/about/">About</a></li>
        <li class="nav-item"><a href="/blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/blog/tags/">Tags</a></li>
      </ul>
    </header>

    <main class="tmpl-post">
      <h1>F3C Part 4 - Reduce advanced</h1>

<time datetime="2016-10-02">02 Oct 2016</time><a href="/blog/tags/language-ramblings/" class="post-tag">language-ramblings</a>

<p>FunFunFunction Video: <a href="https://www.youtube.com/watch?v=1DMolJ2FrNY&amp;index=4&amp;list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84">Reduce advanced - Part 4 of Functional Programming in JavaScript</a></p>
<p>(This post is part of the <a href="/f3c/">F3C</a> series)</p>
<p>Reduce is powerful, much more than its siblings. You can use it not only to sum values (the classic &quot;hello world&quot; example for <code>reduce</code>), but also to build up a complex end result that may look nothing like what you started with, i.e. the list you are calling <code>reduce</code> upon. It's a mistake to think of <code>reduce</code> in terms of what that word means in English; you're not necessarily making something smaller than what you started with, you can make pretty much anything, of any size[^n].</p>
<p>As well as function composition (slotting functions into each other), another common style in functional programming is function chaining. The binding together of small functions that operate on data one after the other[^n].</p>
<p>The example that MPJ uses in this video is a good illustration of chaining. Aside from the call to <code>console.log</code>, the entire program is a single statement - an assignment of a value to the <code>output</code> variable:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> output <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">line</span> <span class="token operator">=></span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">customers<span class="token punctuation">,</span> line</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>What MPJ doesn't say explicitly, but is one of the reasons why this approach is so powerful and simple, is that each of these functions take input, and produce <em>new</em> output. There's no mutation of state. This means that there is less to go wrong. Further, apart from <code>trim</code>, all functions produce or operate on lists:</p>
<p><code>split</code> operates on a string and produces a list<br>
<code>map</code> operates on a list and produces another list<br>
<code>reduce</code> operates on a list and produces ... well, whatever you want</p>
<p>Notice that this part: <code>map(line =&gt; line.split('\t'))</code> actually produces a list ... of lists.</p>
<p>[^n]: It may help to think of reduce by its other common name, in other languages: &quot;fold&quot;, a name which signifies the action of executing the callback function on each element in turn.</p>
<p>[^n]: This reminds me of the Unix philosophy of small programs doing one thing well, connected and passing data via a series of pipes.</p>

<hr>
<ul><li>Next: <a href="/blog/2016/2/10/f3c-part-5-closures/">F3C Part 5 - Closures</a></li><li>Previous: <a href="/blog/2016/2/10/f3c-part-3-reduce-basics/">F3C Part 3 - Reduce basics</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /blog/2016/2/10/f3c-part-4-reduce-advanced/ -->
  </body>
</html>
